<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ— åª›æ— æ•… - wangchloeçš„ä¸ªäººåšå®¢</title>
  
  <subtitle>(à¹‘â€¢á´—â€¢à¹‘)åšä¸€ä¸ªæœ‰è®°æ€§æœ‰æ¸©åº¦ä¸æ‰å‘çš„ç¨‹åºåª›ï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://wangchloe.vip/"/>
  <updated>2019-07-24T06:30:13.036Z</updated>
  <id>https://wangchloe.vip/</id>
  
  <author>
    <name>Chloe Wang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>NativeApiæ€è€ƒ</title>
    <link href="https://wangchloe.vip/2019/07/23/blog43/"/>
    <id>https://wangchloe.vip/2019/07/23/blog43/</id>
    <published>2019-07-22T19:27:35.000Z</published>
    <updated>2019-07-24T06:30:13.036Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><!-- MarkdownTOC --><ul><li>NativeApiæ€è€ƒ<ul><li>ä»¥è°ƒç”¨Nativeä¸Šä¼ å›¾ç‰‡ç»„ä»¶ä¸ºä¾‹</li><li>Hybridé€šä¿¡åŸç†<ul><li>JS Bridge</li></ul></li></ul></li></ul><!-- /MarkdownTOC --><a id="more"></a><h2 id="NativeApiæ€è€ƒ"><a href="#NativeApiæ€è€ƒ" class="headerlink" title="NativeApiæ€è€ƒ"></a>NativeApiæ€è€ƒ</h2><p>â€œ//webapp/js/common/hybridapi/nativefunction.jsâ€,</p><h3 id="ä»¥è°ƒç”¨Nativeä¸Šä¼ å›¾ç‰‡ç»„ä»¶ä¸ºä¾‹"><a href="#ä»¥è°ƒç”¨Nativeä¸Šä¼ å›¾ç‰‡ç»„ä»¶ä¸ºä¾‹" class="headerlink" title="ä»¥è°ƒç”¨Nativeä¸Šä¼ å›¾ç‰‡ç»„ä»¶ä¸ºä¾‹"></a>ä»¥è°ƒç”¨Nativeä¸Šä¼ å›¾ç‰‡ç»„ä»¶ä¸ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    NS.register(<span class="string">"NativeApi"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›®å‰Android webviewä¸æ”¯æŒtype=fileäº‹ä»¶ï¼Œé€šè¿‡åè®®è§£å†³ï¼š</span></span><br><span class="line">    <span class="comment">// å®šä¹‰å…¨å±€å‡½æ•°ç”¨äºå›è°ƒ </span></span><br><span class="line">    <span class="built_in">window</span>[<span class="string">"nativeTakePhotoCallback"</span>] = <span class="function"><span class="keyword">function</span>(<span class="params">result, url, ud</span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//optionså‚æ•°è‹¥æœ‰ç›¸åŒé¡¹ï¼Œåˆ™æ›¿æ¢$.extendå†…çš„ç¬¬ä¸‰ä¸ª&#123;&#125;ç±»ç›®</span></span><br><span class="line">    NS.NativeApi.add(<span class="string">"takePhoto"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> settings = $.extend(<span class="literal">true</span>, &#123;&#125;, &#123;</span><br><span class="line">            imgMaxWidth: <span class="number">640</span>,</span><br><span class="line">            uploadUrl: <span class="string">"&#123;0&#125;xiaozu/ajaxUploadImg"</span>.format(currentApiRoot),</span><br><span class="line">            userData: <span class="string">""</span>,</span><br><span class="line">            t: <span class="number">0</span>,</span><br><span class="line">            callback: <span class="string">"nativeTakePhotoCallback"</span></span><br><span class="line">        &#125;, options);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> protocol = <span class="string">"ns://&#123;0&#125;/dev/takephoto?cb=&#123;1&#125;&amp;w=&#123;2&#125;&amp;ud=&#123;3&#125;&amp;upload=&#123;4&#125;&amp;t=&#123;5&#125;"</span></span><br><span class="line">            .format(domain,</span><br><span class="line">                rebuildCallback(settings.callback),</span><br><span class="line">                settings.imgMaxWidth,</span><br><span class="line">                settings.userData,</span><br><span class="line">                <span class="comment">// æŠŠå­—ç¬¦ä¸²ä½œä¸º URI ç»„ä»¶è¿›è¡Œç¼–ç ï¼Œå…¶ä¸­çš„æŸäº›å­—ç¬¦å°†è¢«åå…­è¿›åˆ¶çš„è½¬ä¹‰åºåˆ—è¿›è¡Œæ›¿æ¢ã€‚</span></span><br><span class="line">                <span class="comment">// eg: : -&gt; %3A   / -&gt; %2F</span></span><br><span class="line">                <span class="built_in">encodeURIComponent</span>(settings.uploadUrl),</span><br><span class="line">                settings.t);</span><br><span class="line">        connectApp(protocol);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// js Bridgeå»ºç«‹Nativeä¸H5é—´é€šä¿¡</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">connectApp</span>(<span class="params">protocol</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">"iframe"</span>);</span><br><span class="line">        <span class="keyword">var</span> iframeStyle = <span class="built_in">document</span>.createAttribute(<span class="string">"style"</span>);</span><br><span class="line">        <span class="keyword">var</span> iframeSrc = <span class="built_in">document</span>.createAttribute(<span class="string">"src"</span>);</span><br><span class="line"></span><br><span class="line">        iframeStyle.nodeValue = <span class="string">"display:none;width:0;height:0;"</span>;</span><br><span class="line">        iframeSrc.nodeValue = protocol;</span><br><span class="line">        iframe.setAttributeNode(iframeStyle);</span><br><span class="line">        iframe.setAttributeNode(iframeSrc);</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line"></span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(iframe);</span><br><span class="line">        &#125;, <span class="number">250</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">rebuildCallback</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> t = cb;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($.isFunction(cb)) &#123;</span><br><span class="line">            t = <span class="string">"hybrid_"</span> + (+<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">            <span class="built_in">window</span>[t] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„</span></span><br><span class="line">                cb.apply(<span class="literal">null</span>, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>));</span><br><span class="line">                <span class="keyword">delete</span> <span class="built_in">window</span>[t];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><hr><ul><li>formatä¼ å…¥å‚æ•°å®ç°</li></ul><p>â€œ//webapp/js/base.jsâ€,<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="built_in">String</span>.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> temS = <span class="keyword">this</span>, i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; ++i) &#123;</span><br><span class="line">            temS = temS.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\&#123;"</span> + i + <span class="string">"\\&#125;"</span>, <span class="string">"g"</span>), <span class="built_in">arguments</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temS;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li><code>+new Date()</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    s = <span class="keyword">new</span> <span class="built_in">Date</span>().toString();</span><br><span class="line">    <span class="comment">// "Wed May 17 2017 11:00:16 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)"</span></span><br><span class="line"></span><br><span class="line">    t = (+<span class="keyword">new</span> <span class="built_in">Date</span>()).toString();</span><br><span class="line">    <span class="comment">// "1494990039861"</span></span><br><span class="line">    <span class="comment">// +new Date(); ç­‰åŒäº new Date().getTime(); ç®€ç•¥å†™æ³•ï¼Œå¾—åˆ°æ¯«ç§’</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>Array.prototype.slice.call(arguments, 0)</code>å‰–æ</li></ul><p>å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//ES5 ä¸­çš„æ•°ç»„æ–¹æ³•sliceçš„åº•å±‚å†…éƒ¨å®ç°</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice=<span class="function"><span class="keyword">function</span>(<span class="params">start,end</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//æ–°æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> start = start || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> end = end || <span class="keyword">this</span>.length; <span class="comment">//thisæŒ‡å‘è°ƒç”¨çš„å¯¹è±¡ï¼Œç”¨äº†callä¹‹åï¼Œæ”¹å˜thisçš„æŒ‡å‘ï¼ŒæŒ‡å‘ä¼ è¿›æ¥çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=start; i&lt;end; i++)&#123;</span><br><span class="line">        result.push(<span class="keyword">this</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;<span class="comment">//è¿”å›çš„ä¸ºä¸€ä¸ªæ–°çš„æ•°ç»„</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// ä¼ å…¥argumentsç±»æ•°ç»„ï¼Œè°ƒç”¨Array.prototype.sliceåŸå‹æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// å¹¶ç”¨call()æ–¹æ³•ï¼Œå°†ä½œç”¨åŸŸé™å®šåœ¨argumentsä¸­</span></span><br><span class="line">    <span class="comment">// è¿™é‡ŒArray.prototypeå°±å¯ä»¥ç†è§£ä¸ºarguments</span></span><br><span class="line">    <span class="comment">// å‚æ•°0ä¸ºslice()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³å¼€å§‹ä½ç½®ç´¢å¼•ï¼Œè¿”å›æ•´ä¸ªæ•°ç»„ã€‚</span></span><br><span class="line">    <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><ul><li>JS Bridgeå»ºç«‹Nativeä¸H5é—´é€šä¿¡</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">connectApp</span>(<span class="params">protocol</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">"iframe"</span>);</span><br><span class="line">    <span class="keyword">var</span> iframeStyle = <span class="built_in">document</span>.createAttribute(<span class="string">"style"</span>);</span><br><span class="line">    <span class="keyword">var</span> iframeSrc = <span class="built_in">document</span>.createAttribute(<span class="string">"src"</span>);</span><br><span class="line"></span><br><span class="line">    iframeStyle.nodeValue = <span class="string">"display:none;width:0;height:0;"</span>;</span><br><span class="line">    iframeSrc.nodeValue = protocol;</span><br><span class="line">    iframe.setAttributeNode(iframeStyle);</span><br><span class="line">    iframe.setAttributeNode(iframeSrc);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.body.removeChild(iframe);</span><br><span class="line">    &#125;, <span class="number">250</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Hybridé€šä¿¡åŸç†"><a href="#Hybridé€šä¿¡åŸç†" class="headerlink" title="Hybridé€šä¿¡åŸç†"></a>Hybridé€šä¿¡åŸç†</h3><p>èƒŒæ™¯ï¼šåŸç”ŸAPPå¼€å‘ä¸­æœ‰ä¸€ä¸ªwebviewçš„ç»„ä»¶(Androidä¸­æ˜¯webview,iOS7ä»¥ä¸‹æœ‰UIWebview,7ä»¥ä¸Šæœ‰WKWebview),è¿™ä¸ªç»„ä»¶å¯ä»¥åŠ è½½Htmlæ–‡ä»¶ã€‚</p><ul><li><p>IOS</p><ul><li>Object-Cå¯ç›´æ¥è°ƒç”¨jsï¼Œåªéœ€è°ƒç”¨stringByEvaluatingJavaScriptFromStringå³å¯ï¼Œå¯ç›´æ¥è·å–jsè¿”å›å€¼ã€‚</li><li>jsä¸å¯ç›´æ¥è°ƒç”¨Object-Cï¼Œåˆ©ç”¨ shouldStartLoadWithRequestï¼Œéœ€æ‹¦æˆªæ¯ä¸ªurlï¼Œå¯¹æŒ‡å®šçš„schemaè¿›è¡Œæ‹¦æˆªåšç›¸åº”çš„æœ¬åœ°æ–¹æ³•ã€‚</li></ul></li><li><p>Android</p><ul><li>Javaå¯ç›´æ¥è°ƒç”¨jsï¼Œä½†ä¸å¯ç›´æ¥è·å–jsè¿”å›å€¼ã€‚</li><li>Javaæ³¨å†ŒaddJavascriptInterface åï¼Œjså¯ç›´æ¥è°ƒç”¨Nativeçš„æ¥å£ï¼Œå¹¶è·å–Nativeçš„è¿”å›å€¼ã€‚<a href="http://www.alloyteam.com/2013/02/rang-java-gen-javascript-geng-jia-qin-mi/" target="_blank" rel="noopener">è®©Javaè·ŸJavascriptæ›´åŠ äº²å¯†</a></li><li>é€šè¿‡ shouldOverrideUrlLoadingï¼Œä¹Ÿè¿˜æ˜¯æ‹¦æˆªWebçš„æ‰€æœ‰URLè¯·æ±‚æ¥è¾¾åˆ°é€šä¿¡çš„ç›®çš„ã€‚</li></ul></li></ul><p><strong>åŸºç¡€é€šä¿¡å­˜åœ¨ä»¥ä¸‹é—®é¢˜</strong></p><ul><li><p>Android4.2ä»¥ä¸‹,addJavascriptInterfaceæ–¹å¼æœ‰å®‰å…¨æ¼æ´</p></li><li><p>iOS7ä»¥ä¸‹,jsæ— æ³•è°ƒç”¨Native</p></li></ul><h4 id="JS-Bridge"><a href="#JS-Bridge" class="headerlink" title="JS Bridge"></a>JS Bridge</h4><ul><li>url schemeäº¤äº’æ–¹å¼æ˜¯ä¸€å¥—ç°æœ‰çš„æˆç†Ÿæ–¹æ¡ˆï¼Œå¯ä»¥å®Œç¾å…¼å®¹å„ç§ç‰ˆæœ¬ï¼Œä¸å­˜åœ¨ä¸Šè¿°é—®é¢˜ã€‚</li></ul><p>é€šè¿‡JSBridge(JSå’ŒNativeé€šä¿¡æœºåˆ¶),H5é¡µé¢å¯ä»¥è°ƒç”¨Nativeçš„api,Nativeä¹Ÿå¯è°ƒç”¨H5é¡µé¢çš„æ–¹æ³•æˆ–è€…é€šçŸ¥H5é¡µé¢å›è°ƒã€‚</p><p><img src="https://dailc.github.io/staticResource/blog/hybrid/jsbridge/img_hybrid_base_jsbridgePrinciple_1.png?_=5931322" alt="JSBridgeçš„æ ¸å¿ƒåŸç†"></p><p>åŸç†ï¼š<br>ï¼ˆ1ï¼‰åˆå§‹åŒ–åˆ›å»ºçš„ä¸€ä¸ªstyle.display=none çš„iframe,å¹¶å°†iframe.srcè®¾ç½®ä¸ºè‡ªæœ‰åè®®ï¼Œæ¯æ¬¡jséœ€è¦ä¸Nativeé€šä¿¡æ—¶ï¼Œjsç«¯ä¸»åŠ¨è°ƒç”¨iframe.srcå³å¯ï¼ŒNativeæ”¶åˆ°è¯·æ±‚é€šçŸ¥åï¼Œåå‘è°ƒç”¨fetchQueue(å¯è§æºç )è·å–æ¶ˆæ¯å†…å®¹ï¼›è‹¥Nativeéœ€è¦ä¸jsé€šä¿¡ï¼Œç›´æ¥è°ƒç”¨jsï¼Œå¹¶è·å–è¿”å›å€¼</p><p>ï¼ˆ2ï¼‰</p><ul><li><p>IOS<br>js-&gt;Nativeï¼šjså°†è¦å‘é€çš„æ¶ˆæ¯å­˜æ”¾åœ¨jsç«¯-&gt;è°ƒç”¨iframe.srcï¼Œè§¦å‘é€šçŸ¥Native-&gt;Nativeæ‹¦æˆªè¯·æ±‚ï¼Œè°ƒç”¨js bridgeé‡Œé¢çš„fetchQueueå¹¶è·å–è¿”å›çš„æ¶ˆæ¯å†…å®¹ï¼Œå¤„ç†æ¶ˆæ¯-&gt;å°†éœ€è¦è¿”å›çš„æ•°æ®é€šè¿‡ç›´æ¥è°ƒç”¨jsçš„æ–¹å¼ï¼Œè®©jså¤„ç†</p></li><li><p>Android<br>js-&gt;Native: é€šè¿‡ shouldOverrideUrlLoading æºå¸¦Jsçš„è¿”å›å€¼<br>ï¼ˆ3ï¼‰Native-&gt;js: Nativeå¯ç›´æ¥è°ƒç”¨Jså¹¶è·å–è¿”å›çš„å†…å®¹</p></li></ul><p><a href="http://www.cnblogs.com/dailc/p/5930231.html" target="_blank" rel="noopener">è¿ç»­äº”ç¯‡è®²è¿°Hybridä»¥åŠJSBridgeè§£å†³æ–¹æ¡ˆ</a></p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;NativeApiæ€è€ƒ&lt;ul&gt;
&lt;li&gt;ä»¥è°ƒç”¨Nativeä¸Šä¼ å›¾ç‰‡ç»„ä»¶ä¸ºä¾‹&lt;/li&gt;
&lt;li&gt;Hybridé€šä¿¡åŸç†&lt;ul&gt;
&lt;li&gt;JS Bridge&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="webview" scheme="https://wangchloe.vip/tags/webview/"/>
    
  </entry>
  
  <entry>
    <title>video.jså°è®°</title>
    <link href="https://wangchloe.vip/2019/06/25/blog55/"/>
    <id>https://wangchloe.vip/2019/06/25/blog55/</id>
    <published>2019-06-25T07:34:01.000Z</published>
    <updated>2019-06-25T07:34:01.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><!-- MarkdownTOC --><ul><li>1.chrome videoä¸èƒ½è‡ªåŠ¨æ’­æ”¾</li><li><ol start="2"><li>videojsæš‚åœåä¸èƒ½æ’­æ”¾</li></ol></li><li>3.iOS 10+ æ–°æ”¿ç­–ã€‚</li><li><ol start="4"><li>Refused to create worker from blob</li></ol></li></ul><!-- /MarkdownTOC --><a id="more"></a><p><a href="https://www.awaimai.com/2053.html" target="_blank" rel="noopener">video.jsä½¿ç”¨æŠ€å·§</a></p><h3 id="1-chrome-videoä¸èƒ½è‡ªåŠ¨æ’­æ”¾"><a href="#1-chrome-videoä¸èƒ½è‡ªåŠ¨æ’­æ”¾" class="headerlink" title="1.chrome videoä¸èƒ½è‡ªåŠ¨æ’­æ”¾"></a>1.chrome videoä¸èƒ½è‡ªåŠ¨æ’­æ”¾</h3><ul><li>æ–¹æ³•ä¸€</li></ul><p>åœ¨chrome æµè§ˆå™¨ä¸­è¾“å…¥ï¼šchrome://flagsï¼Œæœç´¢â€œAutoplay policyâ€ï¼Œé»˜è®¤ä¸ºâ€œDefaultâ€ï¼Œ</p><p>ä¿®æ”¹ä¸º â€œNo user gesture is requiredâ€ </p><ul><li>æ–¹æ³•äºŒ</li></ul><p>åœ¨ä½¿ç”¨videoæ ‡ç­¾çš„è¿‡ç¨‹ä¸­ï¼Œè®¾ç½®é™éŸ³æ’­æ”¾</p><h3 id="2-videojsæš‚åœåä¸èƒ½æ’­æ”¾"><a href="#2-videojsæš‚åœåä¸èƒ½æ’­æ”¾" class="headerlink" title="2. videojsæš‚åœåä¸èƒ½æ’­æ”¾"></a>2. videojsæš‚åœåä¸èƒ½æ’­æ”¾</h3><p>éœ€ä½¿ç”¨sourceé…ç½®videoèµ„æº</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"J_video_wrap"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"video-js video-box"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">"video"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">controls</span></span></span><br><span class="line"><span class="tag">    <span class="attr">preload</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-webkit-airplay</span>=<span class="string">"allow"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">webkit-playsinline</span></span></span><br><span class="line"><span class="tag">    <span class="attr">playsinline</span></span></span><br><span class="line"><span class="tag">   <span class="attr">poster</span>=<span class="string">"&#123;$video.img&#125;"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">src</span>=<span class="string">"&#123;$video.link&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"J_video_wrap"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"video-js video-box"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">"video"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">controls</span></span></span><br><span class="line"><span class="tag">    <span class="attr">preload</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-webkit-airplay</span>=<span class="string">"allow"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">webkit-playsinline</span></span></span><br><span class="line"><span class="tag">    <span class="attr">playsinline</span></span></span><br><span class="line"><span class="tag">   <span class="attr">poster</span>=<span class="string">"&#123;$video.img&#125;"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"&#123;$video.link&#125;"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-iOS-10-æ–°æ”¿ç­–ã€‚"><a href="#3-iOS-10-æ–°æ”¿ç­–ã€‚" class="headerlink" title="3.iOS 10+ æ–°æ”¿ç­–ã€‚"></a>3.iOS 10+ æ–°æ”¿ç­–ã€‚</h3><p>åœ¨çœç”µæ¨¡å¼ä¸‹æ— æ³•è‡ªåŠ¨æ’­æ”¾è§†é¢‘ã€‚androidä»»ä½•æ¨¡å¼éƒ½ä¸èƒ½è‡ªåŠ¨æ’­æ”¾ï¼Œåªèƒ½è®©ç”¨æˆ·æ‰‹åŠ¨è§¦å‘</p><h3 id="4-Refused-to-create-worker-from-blob"><a href="#4-Refused-to-create-worker-from-blob" class="headerlink" title="4. Refused to create worker from blob"></a>4. Refused to create worker from blob</h3><p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5b2chlepnj30tj01xdgf.jpg" alt=""></p><p>è§£å†³ï¼š</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5b2ckq6f6j30tj06l3zq.jpg" alt=""></p><p>åœ¨headerçš„CSP(Content Security Policy ,å†…å®¹å®‰å…¨ç­–ç•¥)å¤„æ·»åŠ blob:</p><p><a href="https://www.cnblogs.com/heyuqing/p/6215761.html" target="_blank" rel="noopener">å‰ç«¯å®‰å…¨é…ç½®ä¹‹Content-Security-Policy(csp)</a></p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;1.chrome videoä¸èƒ½è‡ªåŠ¨æ’­æ”¾&lt;/li&gt;
&lt;li&gt;&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;videojsæš‚åœåä¸èƒ½æ’­æ”¾&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;3.iOS 10+ æ–°æ”¿ç­–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;Refused to create worker from blob&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
      <category term="video.js" scheme="https://wangchloe.vip/tags/video-js/"/>
    
  </entry>
  
  <entry>
    <title>visibilitychangeç›‘å¬å›åˆ°å½“å‰webview</title>
    <link href="https://wangchloe.vip/2019/05/24/blog50/"/>
    <id>https://wangchloe.vip/2019/05/24/blog50/</id>
    <published>2019-05-24T06:47:24.000Z</published>
    <updated>2019-07-24T06:58:36.709Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">appSubsribe: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">"visibilitychange"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">document</span>.hidden) &#123;</span><br><span class="line">            that.fetchData();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="webview" scheme="https://wangchloe.vip/tags/webview/"/>
    
  </entry>
  
  <entry>
    <title>é‚£äº›prototypeé‚£äº›call</title>
    <link href="https://wangchloe.vip/2019/05/13/blog46/"/>
    <id>https://wangchloe.vip/2019/05/13/blog46/</id>
    <published>2019-05-12T19:27:35.000Z</published>
    <updated>2019-07-24T06:28:15.653Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><p>åŸå‹é“¾å¤§æ³•å¥½ï¼</p><a id="more"></a><h3 id="Array-prototype-slice-call-arguments-0-å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„"><a href="#Array-prototype-slice-call-arguments-0-å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„" class="headerlink" title="Array.prototype.slice.call(arguments, 0)  å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„"></a><code>Array.prototype.slice.call(arguments, 0)</code>  å°†å…·æœ‰lengthå±æ€§çš„å¯¹è±¡è½¬æˆæ•°ç»„</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//ES5 ä¸­çš„æ•°ç»„æ–¹æ³•sliceçš„åº•å±‚å†…éƒ¨å®ç°</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice=<span class="function"><span class="keyword">function</span>(<span class="params">start,end</span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//æ–°æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> start = start || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> end = end || <span class="keyword">this</span>.length; <span class="comment">//thisæŒ‡å‘è°ƒç”¨çš„å¯¹è±¡ï¼Œç”¨äº†callä¹‹åï¼Œæ”¹å˜thisçš„æŒ‡å‘ï¼ŒæŒ‡å‘ä¼ è¿›æ¥çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=start; i&lt;end; i++)&#123;</span><br><span class="line">        result.push(<span class="keyword">this</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;<span class="comment">//è¿”å›çš„ä¸ºä¸€ä¸ªæ–°çš„æ•°ç»„</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// ä¼ å…¥argumentsç±»æ•°ç»„ï¼Œè°ƒç”¨Array.prototype.sliceåŸå‹æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// å¹¶ç”¨call()æ–¹æ³•ï¼Œå°†ä½œç”¨åŸŸé™å®šåœ¨argumentsä¸­</span></span><br><span class="line">    <span class="comment">// è¿™é‡ŒArray.prototypeå°±å¯ä»¥ç†è§£ä¸ºarguments</span></span><br><span class="line">    <span class="comment">// å‚æ•°0ä¸ºslice()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³å¼€å§‹ä½ç½®ç´¢å¼•ï¼Œè¿”å›æ•´ä¸ªæ•°ç»„ã€‚</span></span><br><span class="line">    <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Object-prototype-toString-call-xxx-æ£€æŸ¥å¯¹è±¡ç±»å‹"><a href="#Object-prototype-toString-call-xxx-æ£€æŸ¥å¯¹è±¡ç±»å‹" class="headerlink" title="Object.prototype.toString.call(xxx)  æ£€æŸ¥å¯¹è±¡ç±»å‹"></a><code>Object.prototype.toString.call(xxx)</code>  æ£€æŸ¥å¯¹è±¡ç±»å‹</h3><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1flaq2qoy21j309l06vjsa.jpg" alt="Object.prototype.toString.call"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> InputValidation = &#123;</span><br><span class="line">    <span class="string">"isNumber"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">intArg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(intArg) === <span class="string">"[object Number]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">InputValidation.isNumber(<span class="number">111</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><blockquote><p><a href="https://www.cnblogs.com/youhong/p/6209054.html" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆç”¨Object.prototype.toString.call(obj)æ£€æµ‹å¯¹è±¡ç±»å‹?</a><br>toStringä¸ºObjectçš„åŸå‹æ–¹æ³•ï¼Œè€ŒArray ã€Functionç­‰ç±»å‹ä½œä¸ºObjectçš„å®ä¾‹ï¼Œéƒ½é‡å†™äº†toStringæ–¹æ³•ã€‚ä¸åŒçš„å¯¹è±¡ç±»å‹è°ƒç”¨toStringæ–¹æ³•æ—¶ï¼Œæ ¹æ®åŸå‹é“¾çš„çŸ¥è¯†ï¼Œè°ƒç”¨çš„æ˜¯å¯¹åº”çš„é‡å†™ä¹‹åçš„toStringæ–¹æ³•ï¼ˆFunctionç±»å‹è¿”å›å†…å®¹ä¸ºå‡½æ•°ä½“çš„å­—ç¬¦ä¸²ï¼ŒArrayç±»å‹è¿”å›å…ƒç´ ç»„æˆçš„å­—ç¬¦ä¸²â€¦..ï¼‰ï¼Œè€Œä¸ä¼šå»è°ƒç”¨Objectä¸ŠåŸå‹toStringæ–¹æ³•ï¼ˆè¿”å›å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼‰ï¼Œæ‰€ä»¥é‡‡ç”¨obj.toString()ä¸èƒ½å¾—åˆ°å…¶å¯¹è±¡ç±»å‹ï¼Œåªèƒ½å°†objè½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼›å› æ­¤ï¼Œåœ¨æƒ³è¦å¾—åˆ°å¯¹è±¡çš„å…·ä½“ç±»å‹æ—¶ï¼Œåº”è¯¥è°ƒç”¨Objectä¸ŠåŸå‹toStringæ–¹æ³•ã€‚</p></blockquote><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åŸå‹é“¾å¤§æ³•å¥½ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>æ›´æ”¹å¾®ä¿¡å†…åˆ†äº«é“¾æ¥</title>
    <link href="https://wangchloe.vip/2019/05/10/blog45/"/>
    <id>https://wangchloe.vip/2019/05/10/blog45/</id>
    <published>2019-05-09T19:27:35.000Z</published>
    <updated>2019-07-24T06:28:10.972Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">wx.ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ†äº«ç»™æœ‹å‹</span></span><br><span class="line">    wx.onMenuShareAppMessage(&#123;</span><br><span class="line">        link: shareUrl,</span><br><span class="line">        title: wxFanliConfig.session.title,</span><br><span class="line">        desc: wxFanliConfig.session.desc,</span><br><span class="line">        imgUrl: wxFanliConfig.session.img,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (wagv.inWeiXin &amp;&amp; <span class="keyword">typeof</span> wagv.inWeiXin[<span class="string">"shareAppSuccess"</span>] == <span class="string">"function"</span>) &#123;</span><br><span class="line">                wagv.inWeiXin[<span class="string">"shareAppSuccess"</span>]();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">'åˆ†äº«å¤±è´¥'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†äº«åˆ°æœ‹å‹åœˆ</span></span><br><span class="line">    wx.onMenuShareTimeline(&#123;</span><br><span class="line">        link: shareUrl,</span><br><span class="line">        title: wxFanliConfig.timeline.title,</span><br><span class="line">        desc: wxFanliConfig.timeline.desc,</span><br><span class="line">        imgUrl: wxFanliConfig.timeline.img,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (wagv.inWeiXin &amp;&amp; <span class="keyword">typeof</span> wagv.inWeiXin[<span class="string">"shareTimelineSuccess"</span>] == <span class="string">"function"</span>) &#123;</span><br><span class="line">                wagv.inWeiXin[<span class="string">"shareTimelineSuccess"</span>]();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">'åˆ†äº«å¤±è´¥'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="å¾®ä¿¡" scheme="https://wangchloe.vip/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>å·´é€‚å·æ¸</title>
    <link href="https://wangchloe.vip/2019/05/04/life7/"/>
    <id>https://wangchloe.vip/2019/05/04/life7/</id>
    <published>2019-05-03T19:12:48.000Z</published>
    <updated>2019-07-23T09:41:35.558Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>å·´é€‚æ»´ç‹ ï¼</p><a id="more"></a><hr><p><a href="https://v.vuevideo.net/share/post/7699160849240349086" target="_blank" rel="noopener">wangchloe çš„ Vlog | å·´é€‚å·æ¸</a></p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å·´é€‚æ»´ç‹ ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="ä½ å¥½ï¼Œé™Œç”Ÿäºº" scheme="https://wangchloe.vip/categories/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E9%99%8C%E7%94%9F%E4%BA%BA/"/>
    
    
      <category term="çˆ±æ—…æ¸¸" scheme="https://wangchloe.vip/tags/%E7%88%B1%E6%97%85%E6%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>Intellij IDEAå»ºç«‹macä¸‹javaå¼€å‘ç¯å¢ƒ</title>
    <link href="https://wangchloe.vip/2019/04/05/blog44/"/>
    <id>https://wangchloe.vip/2019/04/05/blog44/</id>
    <published>2019-04-04T19:27:35.000Z</published>
    <updated>2019-07-24T06:13:41.451Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><ul><li><code>commond+T</code> æ‹‰å–åˆ†æ”¯</li><li><code>commond+k</code> æäº¤åˆ†æ</li><li><code>shift+shift</code> å…¨å±€æœç´¢æ–‡ä»¶å</li><li><code>control+shift+f</code> å…¨å±€æœç´¢å†…å®¹(.do)</li><li><p><code>command+command</code> maven projects</p><a id="more"></a></li><li><p>æ–‡ä»¶å mall.properties æœ¬åœ°æŸ¥çœ‹htmlæ•ˆæœ</p></li><li>æ–‡ä»¶å page-config.xml é…ç½®cssã€js</li><li>æ–°å»ºåˆ†æ”¯</li></ul><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fm5o3mjyi1j30l10om114.jpg" alt="æ–°å»ºåˆ†æ”¯"><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5awgmpl9qj30nc0qetgv.jpg" alt="æ–°å»ºåˆ†æ”¯"></p><blockquote><p>æ–°å»ºåˆ†æ”¯åæ›´æ”¹mall.propertiesæ–‡ä»¶å†…å®¹ï¼Œå¢åŠ ç«¯å£å·</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mall.common.api.url=http://service.shzyfl.cn:7101</span><br></pre></td></tr></table></figure><ul><li>ç«¯å£å ç”¨è§£å†³æ–¹æ³•<br>ç»ˆç«¯è¾“å…¥å ç”¨ç«¯å£å·10100<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:10100</span><br></pre></td></tr></table></figure></li></ul><p>æ˜¾ç¤º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COMMAND  PID    USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME</span><br><span class="line">java    1372 wangjie   18u  IPv6 0x40969a7cc34a9943      0t0  TCP *:itap-ddtp (LISTEN)</span><br></pre></td></tr></table></figure></p><p>killè¯¥ç«¯å£è¿›ç¨‹PID<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 1372</span><br></pre></td></tr></table></figure></p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;commond+T&lt;/code&gt; æ‹‰å–åˆ†æ”¯&lt;/li&gt;
&lt;li&gt;&lt;code&gt;commond+k&lt;/code&gt; æäº¤åˆ†æ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;shift+shift&lt;/code&gt; å…¨å±€æœç´¢æ–‡ä»¶å&lt;/li&gt;
&lt;li&gt;&lt;code&gt;control+shift+f&lt;/code&gt; å…¨å±€æœç´¢å†…å®¹(.do)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;command+command&lt;/code&gt; maven projects&lt;/p&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="java" scheme="https://wangchloe.vip/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>å¾æœå®å²›ï½</title>
    <link href="https://wangchloe.vip/2019/04/01/life6/"/>
    <id>https://wangchloe.vip/2019/04/01/life6/</id>
    <published>2019-03-31T19:12:48.000Z</published>
    <updated>2019-07-23T09:38:45.104Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä¸–ç•Œå¤šå¤§ï¼Œè€æ±ªçš„è„šæ­¥å°±è¿ˆå¤šå¤§ï¼PSï¼šğŸ‡¨ğŸ‡³å°æ¹¾çœŸå¥½åƒ</p><a id="more"></a><p><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59wjj0d8wj31bq0u0e82.jpg" alt="å²ä¸Šè¶…å¼ºè‡ªåˆ¶æ”»ç•¥"></p><hr><p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqi6df9j30rs15oaix.jpg" alt=""><br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g59wqi0bnnj30rs15owln.jpg" alt=""><br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g59wqhui4kj30rs15ogt1.jpg" alt=""><br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g59wqghp3uj30u00u0dlc.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqfxuvtj30u00u0wjj.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqfrqfej30rs15o12k.jpg" alt=""><br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59wqhp5r4j30u00u0thd.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqhighuj30u00u0gw4.jpg" alt=""><br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59wqgn8gyj30u00u047u.jpg" alt=""></p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸–ç•Œå¤šå¤§ï¼Œè€æ±ªçš„è„šæ­¥å°±è¿ˆå¤šå¤§ï¼PSï¼šğŸ‡¨ğŸ‡³å°æ¹¾çœŸå¥½åƒ&lt;/p&gt;
    
    </summary>
    
      <category term="ä½ å¥½ï¼Œé™Œç”Ÿäºº" scheme="https://wangchloe.vip/categories/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E9%99%8C%E7%94%9F%E4%BA%BA/"/>
    
    
      <category term="çˆ±æ—…æ¸¸" scheme="https://wangchloe.vip/tags/%E7%88%B1%E6%97%85%E6%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>æ‰¿æ¥é¡µé—®é¢˜æ±‡æ€»</title>
    <link href="https://wangchloe.vip/2019/03/25/blog52/"/>
    <id>https://wangchloe.vip/2019/03/25/blog52/</id>
    <published>2019-03-25T07:00:04.000Z</published>
    <updated>2019-07-24T07:00:04.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><a id="more"></a><h2 id="é¡µé¢ç»“æ„"><a href="#é¡µé¢ç»“æ„" class="headerlink" title="é¡µé¢ç»“æ„"></a>é¡µé¢ç»“æ„</h2><ul><li><p>æ‰¿æ¥é¡µ</p><ul><li>å•ä¸ªå•†å“+å“ç‰Œä¸€æ’ä¸€ä¸ªå•†å“+çŒœä½ å–œæ¬¢ä¸€æ’ä¸¤åˆ—å•†å“</li><li><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g1etu8gs40j30u03q6b2c.jpg" alt=""></li><li>ç½®é¡¶æ•ˆæœ</li><li><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g1etv6irx8j30u01hd1kx.jpg" alt=""></li></ul></li><li><p>å“ç‰Œé¡µ</p><ul><li>å“ç‰Œä¸€æ’ä¸€ä¸ªå•†å“+çŒœä½ å–œæ¬¢ä¸€æ’ä¸¤åˆ—å•†å“</li><li><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1etvs203qj30u02uzx6q.jpg" alt=""></li><li>ç½®é¡¶æ•ˆæœ</li><li><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1etvuyy5lj30u02uzhdv.jpg" alt=""></li></ul></li></ul><h2 id="é‡åˆ°é—®é¢˜"><a href="#é‡åˆ°é—®é¢˜" class="headerlink" title="é‡åˆ°é—®é¢˜"></a>é‡åˆ°é—®é¢˜</h2><h3 id="1-æœ‰fixed-barçš„æƒ…å†µä¸‹è¿˜éœ€ä¼˜æƒ åˆ¸ç½®é¡¶"><a href="#1-æœ‰fixed-barçš„æƒ…å†µä¸‹è¿˜éœ€ä¼˜æƒ åˆ¸ç½®é¡¶" class="headerlink" title="1. æœ‰fixed barçš„æƒ…å†µä¸‹è¿˜éœ€ä¼˜æƒ åˆ¸ç½®é¡¶"></a>1. æœ‰fixed barçš„æƒ…å†µä¸‹è¿˜éœ€ä¼˜æƒ åˆ¸ç½®é¡¶</h3><ul><li><p>æ–¹æ¡ˆ1: append <code>$(&quot;.page-bar&quot;).append($(&quot;#J_coupon&quot;))</code>âœ˜</p><ul><li>ä¼˜ç‚¹ï¼šä¸éœ€è¦ä¸º<code>$(&quot;#J_coupon&quot;)</code>å¢åŠ fixedæ ·å¼</li><li>ç¼ºç‚¹ï¼šå¦‚æœåˆ¸å·²å‘å³æ»‘åŠ¨ï¼Œä¸ä¾¿äºä¿æŒæ»‘åŠ¨çŠ¶æ€ï¼Œéœ€iscroll/è®°å½•translateX(..)</li></ul></li><li><p>æ–¹æ¡ˆ2: <code>$(&quot;#J_coupon.fixed&quot;)</code> âœ”ï¸</p><ul><li>ä¼˜ç‚¹ï¼šèƒ½ä¿æŒåˆ¸çŠ¶æ€</li><li>ç¼ºç‚¹ï¼šéœ€è¦ä¸º<code>$(&quot;#J_coupon&quot;)</code>å¢åŠ fixedæ ·å¼</li></ul></li></ul><h3 id="2-æ»šåŠ¨éœ€ç›‘å¬äº‹ä»¶é¢‡å¤š-ç›®å‰æ–¹æ¡ˆä¸æ˜¯æœ€ä¼˜"><a href="#2-æ»šåŠ¨éœ€ç›‘å¬äº‹ä»¶é¢‡å¤š-ç›®å‰æ–¹æ¡ˆä¸æ˜¯æœ€ä¼˜" class="headerlink" title="2. æ»šåŠ¨éœ€ç›‘å¬äº‹ä»¶é¢‡å¤š (ç›®å‰æ–¹æ¡ˆä¸æ˜¯æœ€ä¼˜)"></a>2. æ»šåŠ¨éœ€ç›‘å¬äº‹ä»¶é¢‡å¤š (ç›®å‰æ–¹æ¡ˆä¸æ˜¯æœ€ä¼˜)</h3><ul><li><strong>bar</strong></li><li><strong>åˆ¸</strong></li><li><strong>æŸ¥çœ‹æ›´å¤šxxä»¶å•†å“</strong></li><li><strong>å³ä¸‹è§’ç½®é¡¶æŒ‰é’®</strong><ul><li>å“ç‰Œå•†å“æ•°é‡ &gt; 20<ul><li>ä¸‹æ»‘ å±•ç¤ºå½“å‰å·²æµè§ˆæ•°é‡</li><li>ä¸Šæ»‘ å±•ç¤ºç½®é¡¶æŒ‰é’®</li></ul></li><li>å“ç‰Œå•†å“æ•°é‡ &lt;= 20<ul><li>å±•ç¤ºç½®é¡¶æŒ‰é’®</li></ul></li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">bindScroll: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $relate = $(<span class="string">"#J_relate"</span>);</span><br><span class="line">    <span class="keyword">var</span> $brand = $(<span class="string">"#J_brand"</span>);</span><br><span class="line">    <span class="keyword">var</span> $coupon = $(<span class="string">"#J_coupon"</span>);</span><br><span class="line">    <span class="keyword">var</span> $couponSpacer = $(<span class="string">"#J_coupon_spacer"</span>);</span><br><span class="line">    <span class="keyword">var</span> barHeight = $(<span class="string">"#J_page_bar"</span>).outerHeight();</span><br><span class="line">    brandTop = $brand.length &amp;&amp; $brand.offset().top &gt; <span class="number">0</span> ? ($brand.offset().top - (<span class="keyword">this</span>.isPageBrand ? barHeight : <span class="number">0</span>)) : <span class="number">0</span>;</span><br><span class="line">    couponTop = $couponSpacer.length ? $couponSpacer.offset().top - barHeight : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> relateTop = $relate.length &amp;&amp; $relate.offset().top &gt; <span class="number">0</span> ? <span class="keyword">this</span>.isBrandManji ? $relate.offset().top - (<span class="keyword">this</span>.isPageBrand ? (barHeight + $coupon.outerHeight() ) : (barHeight + $coupon.height() - <span class="built_in">parseFloat</span>(<span class="number">.3</span> * htmlFS))) : $relate.offset().top - barHeight : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> brandColH = <span class="keyword">this</span>.isBrandManji ? <span class="built_in">parseFloat</span>(<span class="number">2.6</span> * htmlFS) : <span class="built_in">parseFloat</span>(<span class="number">1.48</span> * htmlFS);</span><br><span class="line">    <span class="keyword">var</span> brandItemH = <span class="built_in">parseFloat</span>(<span class="number">3.18</span> * htmlFS);</span><br><span class="line">    <span class="keyword">var</span> n = brandTop + brandColH - $win.height();</span><br><span class="line">    <span class="keyword">var</span> inRelate = <span class="literal">false</span>,</span><br><span class="line">        pgCFixed = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> curTop = <span class="number">0</span>,</span><br><span class="line">        beTop = <span class="number">0</span>,</span><br><span class="line">        stand = <span class="number">0</span>;</span><br><span class="line">    that.manji = that.isBrandManji;</span><br><span class="line"></span><br><span class="line">    $win.on(<span class="string">'scroll.HUB'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        curTop = <span class="built_in">parseFloat</span>($win.scrollTop());</span><br><span class="line">        <span class="keyword">if</span> (curTop == <span class="number">0</span>) &#123; <span class="comment">// æ˜¾ç¤ºæ›´å¤šæ‚¬æµ® éšè—ç½®é¡¶æ‚¬æµ® éšè—bar éšè—ä¼˜æƒ åˆ¸ offç›‘å¬</span></span><br><span class="line">            that.showMore = <span class="literal">true</span>;</span><br><span class="line">            that.goTopShow = <span class="literal">false</span>;</span><br><span class="line">            that.scroll = <span class="literal">false</span>;</span><br><span class="line">            $doc.off(<span class="string">"touchmove.HUB"</span>);</span><br><span class="line">            that.inBrand = <span class="literal">false</span>;</span><br><span class="line">            that.cfixed = <span class="literal">false</span>;</span><br><span class="line">            inRelate = <span class="literal">false</span>;</span><br><span class="line">            pgCFixed = <span class="literal">false</span>;</span><br><span class="line">            that.manji = that.isBrandManji;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curTop &gt; <span class="number">0</span> &amp;&amp; ((brandTop &amp;&amp; curTop &lt; brandTop) || (!brandTop &amp;&amp; curTop &lt; relateTop))) &#123; <span class="comment">// éšè—æ›´å¤šæ‚¬æµ® éšè—ç½®é¡¶æ‚¬æµ® éšè—bar éšè—ä¼˜æƒ åˆ¸ offç›‘å¬</span></span><br><span class="line">            that.showMore = <span class="literal">false</span>;</span><br><span class="line">            that.goTopShow = <span class="literal">false</span>;</span><br><span class="line">            that.scroll = <span class="literal">false</span>;</span><br><span class="line">            $doc.off(<span class="string">"touchmove.HUB"</span>);</span><br><span class="line">            that.inBrand = <span class="literal">false</span>;</span><br><span class="line">            that.cfixed = <span class="literal">false</span>;</span><br><span class="line">            inRelate = <span class="literal">false</span>;</span><br><span class="line">            pgCFixed = <span class="literal">false</span>;</span><br><span class="line">            that.manji = that.isBrandManji;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (brandTop &amp;&amp; curTop &gt; brandTop &amp;&amp; (relateTop &amp;&amp; curTop &lt; relateTop) || !relateTop) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!that.inBrand) &#123; <span class="comment">// inBrand ç¬¬ä¸€æ¬¡ æ˜¾ç¤ºç½®é¡¶æ‚¬æµ® æ˜¾ç¤ºbar æ˜¾ç¤ºä¼˜æƒ åˆ¸</span></span><br><span class="line">                that.inBrand = <span class="literal">true</span>;</span><br><span class="line">                that.goTopShow = <span class="literal">true</span>;</span><br><span class="line">                that.showMore = <span class="literal">false</span>;</span><br><span class="line">                that.scroll = <span class="literal">true</span>;</span><br><span class="line">                inRelate = <span class="literal">false</span>;</span><br><span class="line">                pgCFixed = <span class="literal">false</span>;</span><br><span class="line">                that.manji = that.isBrandManji;</span><br><span class="line">                <span class="keyword">if</span> (that.isPageBrand) &#123;</span><br><span class="line">                    that.cfixed = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">if</span>(!pgCFixed &amp;&amp; curTop &gt;= couponTop) &#123;</span><br><span class="line">                        pgCFixed = <span class="literal">true</span>;</span><br><span class="line">                        that.cfixed = that.isBrandManji;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    that.cfixed = that.isBrandManji;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                that.barTitle = that.brandTitle;</span><br><span class="line">                <span class="keyword">if</span> (that.brandNum &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                    stand = <span class="built_in">Math</span>.ceil((curTop - n) / brandItemH);</span><br><span class="line">                    that.divide = stand &gt; that.brandNum ? that.brandNum : stand;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// å‘ä¸Š/å‘ä¸‹ è®¡ç®—æ»‘åŠ¨ä¸ªæ•°</span></span><br><span class="line">                <span class="keyword">if</span> (that.isPageBrand &amp;&amp; !pgCFixed &amp;&amp; curTop &gt;= couponTop) &#123;</span><br><span class="line">                    pgCFixed = <span class="literal">true</span>;</span><br><span class="line">                    that.cfixed = that.isBrandManji;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (pgCFixed &amp;&amp; curTop &lt; couponTop) &#123;</span><br><span class="line">                    that.cfixed = <span class="literal">false</span>;</span><br><span class="line">                    that.manji = that.isBrandManji;</span><br><span class="line">                    pgCFixed = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (curTop &lt; beTop &amp;&amp; that.down) &#123; <span class="comment">// å‘ä¸Š</span></span><br><span class="line">                    that.down = <span class="literal">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curTop &gt; beTop &amp;&amp; !that.down) &#123; <span class="comment">// å‘ä¸‹</span></span><br><span class="line">                    that.down = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                beTop = curTop;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (that.brandNum &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                    stand = <span class="built_in">Math</span>.ceil((curTop - n) / brandItemH);</span><br><span class="line">                    that.divide = stand &gt; that.brandNum ? that.brandNum : stand;</span><br><span class="line">                    $doc.on(<span class="string">"touchmove.HUB"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                        stand = <span class="built_in">Math</span>.ceil((curTop - n) / brandItemH);</span><br><span class="line">                        that.divide = stand &gt; that.brandNum ? that.brandNum : stand;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (relateTop &amp;&amp; curTop &gt; relateTop &amp;&amp; !inRelate) &#123; <span class="comment">// inRelate éšè—ä¼˜æƒ åˆ¸ offç›‘å¬</span></span><br><span class="line">            inRelate = <span class="literal">true</span>;</span><br><span class="line">            pgCFixed = <span class="literal">false</span>;</span><br><span class="line">            that.inBrand = <span class="literal">false</span>;</span><br><span class="line">            that.cfixed = <span class="literal">false</span>;</span><br><span class="line">            that.showMore = <span class="literal">false</span>;</span><br><span class="line">            that.goTopShow = <span class="literal">true</span>;</span><br><span class="line">            that.scroll = <span class="literal">true</span>;</span><br><span class="line">            that.manji = <span class="literal">false</span>;</span><br><span class="line">            $doc.off(<span class="string">"touchmove.HUB"</span>);</span><br><span class="line">            that.barTitle = <span class="string">"çŒœä½ å–œæ¬¢"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1ez9l6zw2j30c80c274o.jpg" alt=""></p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1ez9nxix6j306c03kaa1.jpg" alt=""></p><h4 id="åæœŸä¼˜åŒ–"><a href="#åæœŸä¼˜åŒ–" class="headerlink" title="åæœŸä¼˜åŒ–"></a>åæœŸä¼˜åŒ–</h4><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1g1ezax6t2wj30k0032mx5.jpg" alt=""></p><h5 id="ä¼˜åŒ–scrollæ€§èƒ½"><a href="#ä¼˜åŒ–scrollæ€§èƒ½" class="headerlink" title="ä¼˜åŒ–scrollæ€§èƒ½"></a>ä¼˜åŒ–scrollæ€§èƒ½</h5><ul><li>å‡½æ•°èŠ‚æµ<ul><li>å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œdebounce ä¼šåˆå¹¶äº‹ä»¶ä¸”ä¸ä¼šå»è§¦å‘äº‹ä»¶ï¼Œå½“ä¸€å®šæ—¶é—´å†…æ²¡æœ‰è§¦å‘å†è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œæ‰çœŸæ­£å»è§¦å‘äº‹ä»¶ã€‚</li><li>é€‚ç”¨äºå¤šæ¬¡æäº¤ï¼ˆcommitï¼‰çš„åœºæ™¯ï¼Œå¦‚ç‚¹å‡»æŒ‰é’®æäº¤å‘é€è¯·æ±‚çš„æƒ…å†µ</li></ul></li><li><p>å‡½æ•°é˜²æŠ–</p><ul><li>æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œthrottle ä¼šåˆå¹¶ä¸€å®šæ—¶é—´å†…çš„äº‹ä»¶ï¼Œå¹¶åœ¨è¯¥æ—¶é—´ç»“æŸæ—¶çœŸæ­£å»è§¦å‘ä¸€æ¬¡äº‹ä»¶ã€‚</li><li>é€‚ç”¨äºscroll/resizeç­‰åœºæ™¯</li></ul></li><li><p>=&gt; èŠ‚æµæ–¹æ¡ˆ</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> didScroll = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    didScroll = <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( didScroll ) &#123;</span><br><span class="line">        didScroll = <span class="literal">false</span>;</span><br><span class="line">        fun();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">250</span>);</span><br></pre></td></tr></table></figure><h5 id="ä¼˜åŒ–æ¸²æŸ“æ–¹å¼"><a href="#ä¼˜åŒ–æ¸²æŸ“æ–¹å¼" class="headerlink" title="ä¼˜åŒ–æ¸²æŸ“æ–¹å¼"></a>ä¼˜åŒ–æ¸²æŸ“æ–¹å¼</h5><ul><li><p>å½“è®¿é—®scrollWidthç³»åˆ—ã€clientHeightç³»åˆ—ã€offsetTopç³»åˆ—ã€ComputedStyleç­‰å±æ€§æ—¶ï¼Œä¼šJSå¼ºåˆ¶é‡æ’ï¼Œå¯¼è‡´Styleå’ŒLayoutå‰ç§»åˆ°JSä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­</p></li><li><p>ä½¿ç”¨<code>requestAnimationFrame()</code>ï¼Œå°†ä»¥ä¸Šç‰¹æ®Šæ“ä½œæ±‡é›†å¹¶å»¶è¿Ÿå…¥é˜Ÿ</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newScrollTop = <span class="keyword">this</span>.getPosition(<span class="keyword">this</span>.panes[index].$refs.content).top - <span class="keyword">this</span>.distance</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollStep</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.documentElement.scrollTop += <span class="number">5</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.documentElement.scrollTop &lt; newScrollTop) &#123;</span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame(scrollStep)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.requestAnimationFrame(scrollStep);</span><br></pre></td></tr></table></figure><h5 id="åšä½ç§»æ•ˆæœæ—¶ä½¿ç”¨tranformä»£æ›¿top-left-bottom-right"><a href="#åšä½ç§»æ•ˆæœæ—¶ä½¿ç”¨tranformä»£æ›¿top-left-bottom-right" class="headerlink" title="åšä½ç§»æ•ˆæœæ—¶ä½¿ç”¨tranformä»£æ›¿top/left/bottom/right"></a>åšä½ç§»æ•ˆæœæ—¶ä½¿ç”¨tranformä»£æ›¿top/left/bottom/right</h5><ul><li><code>top/left/bottom/right</code>è¿™ç±»å±æ€§ä¼šå½±å“å…ƒç´ åœ¨æ–‡æ¡£ä¸­çš„å¸ƒå±€ï¼Œå¯èƒ½æ”¹å˜å…¶ä»–å…ƒç´ çš„ä½ç½®ï¼Œå¼•èµ·é‡æ’ï¼Œé€ æˆæ€§èƒ½å¼€é”€</li><li>ä½¿ç”¨<code>transformå±æ€§ï¼ˆ3D/animationï¼‰</code>å°†å…ƒç´ æå‡è‡³åˆæˆå±‚ï¼Œçœå»å¸ƒå±€å’Œç»˜åˆ¶ç¯èŠ‚<ul><li><code>åˆæˆå±‚</code>ï¼š åˆæˆå±‚çš„ä½å›¾ï¼Œä¼šäº¤ç”± GPU åˆæˆï¼Œæ¯” CPU å¤„ç†è¦å¿«ã€‚å½“éœ€è¦ repaint æ—¶ï¼Œåªéœ€è¦ repaint æœ¬èº«ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å±‚ã€‚</li></ul></li></ul><h3 id="3-æé†’ç»„ä»¶"><a href="#3-æé†’ç»„ä»¶" class="headerlink" title="3. æé†’ç»„ä»¶"></a>3. æé†’ç»„ä»¶</h3><ul><li><code>static/super/src/h5/js/common/subscribe-jq.js</code></li></ul><p>å¢åŠ callback</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> bindSub: <span class="function"><span class="keyword">function</span>(<span class="params">selector, spmSub, spmCancel, item</span>) </span>&#123;</span><br><span class="line">    Super.H5.Common.SubScribe(&#123;</span><br><span class="line">        triggerSelector: selector,</span><br><span class="line">        isNeedLogin: <span class="literal">true</span>,</span><br><span class="line">        isToast: <span class="literal">true</span>,</span><br><span class="line">        subsrcibeSelectorText: <span class="string">"æé†’æˆ‘"</span>,</span><br><span class="line">        toastSubsrcibedVal: <span class="string">"å·²å–æ¶ˆæé†’å’Œæ”¶è—"</span>,</span><br><span class="line">        toastUnsubsrcibeVal: <span class="string">'å·²è®¾ç½®æé†’å¹¶æ”¶è—æˆåŠŸ'</span>,</span><br><span class="line">        subCallback: <span class="function"><span class="keyword">function</span>(<span class="params">itemId</span>) </span>&#123;</span><br><span class="line">            $.getJSON(ajaxAddSubUrl, &#123;</span><br><span class="line">                item_id: itemId,</span><br><span class="line">                t: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">            &#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">                UBT.track(spmSub);</span><br><span class="line">                <span class="keyword">if</span> (item) &#123;</span><br><span class="line">                    Vue.set(item, <span class="string">'isSubscribe'</span>, <span class="literal">true</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        unSubCallback: <span class="function"><span class="keyword">function</span>(<span class="params">itemId</span>) </span>&#123;</span><br><span class="line">            $.getJSON(ajaxAddSubUrl, &#123;</span><br><span class="line">                item_id: itemId,</span><br><span class="line">                t: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">            &#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">                UBT.track(spmCancel);</span><br><span class="line">                <span class="keyword">if</span> (item) &#123;</span><br><span class="line">                    Vue.set(item, <span class="string">'isSubscribe'</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-iphoneX-1pxè¾¹æ¡†é—®é¢˜-ï¼ˆè‹¥é‡åˆ°ç›¸åŒé—®é¢˜ï¼Œå¯è¿›ä¸€æ­¥å…¬ç”¨ï¼‰"><a href="#4-iphoneX-1pxè¾¹æ¡†é—®é¢˜-ï¼ˆè‹¥é‡åˆ°ç›¸åŒé—®é¢˜ï¼Œå¯è¿›ä¸€æ­¥å…¬ç”¨ï¼‰" class="headerlink" title="4. iphoneX 1pxè¾¹æ¡†é—®é¢˜ ï¼ˆè‹¥é‡åˆ°ç›¸åŒé—®é¢˜ï¼Œå¯è¿›ä¸€æ­¥å…¬ç”¨ï¼‰"></a>4. iphoneX 1pxè¾¹æ¡†é—®é¢˜ ï¼ˆè‹¥é‡åˆ°ç›¸åŒé—®é¢˜ï¼Œå¯è¿›ä¸€æ­¥å…¬ç”¨ï¼‰</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*fl hairlines */</span></span><br><span class="line"><span class="selector-class">.fl-hairlines</span> <span class="selector-class">.border1px</span>&#123;<span class="attribute">border-width</span>:<span class="number">0.5px</span>;&#125;</span><br><span class="line"><span class="selector-class">.b1px</span> &#123; <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>; &#125;</span><br><span class="line"><span class="selector-class">.fl-hairlines</span> <span class="selector-class">.b1px</span> &#123; <span class="attribute">border-width</span>: <span class="number">0.7px</span>;&#125;</span><br><span class="line"> @<span class="keyword">media</span> all and (max-device-width:<span class="number">320px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.fl-hairlines</span><span class="selector-class">.fl-iphone</span> <span class="selector-class">.b1px</span> &#123;<span class="attribute">border-width</span>: <span class="number">0.5px</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>1pxåœ¨ç”¨äº†hairlinesèƒ½è§£å†³å¤§éƒ¨åˆ†ï¼Œä½†åœ¨iphoneXçš„å‘ˆç°ä¸Šä¼šå‡ºç°<strong>ä¸Šç»†ä¸‹ç²—ä¸”æœ‰æ¯›è¾¹</strong></p></li><li><p>å½“å‰è§£å†³æ–¹æ¡ˆï¼šé’ˆå¯¹<code>iphonex</code>ï¼Œå»æ‰åŸæœ‰borderï¼Œå°†borderå†™ä¸º<code>:before</code>/<code>:after</code>å®šä½åœ¨æŒ‰é’®ä¸Šï¼Œå½“å‰æµ‹è¯•borderå®½åº¦å®œä¸º<code>.8px</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> only screen and (device-width:<span class="number">375px</span>) and (device-height:<span class="number">812px</span>) and (-webkit-device-pixel-ratio:<span class="number">3</span>) &#123;</span><br><span class="line"><span class="selector-class">.fl-hairlines</span><span class="selector-class">.fl-iphone</span> <span class="selector-class">.brand-list</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">content</span>: <span class="string">""</span>; <span class="attribute">position</span>: absolute; <span class="attribute">top</span>: .<span class="number">8px</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">width</span>: <span class="number">1.4rem</span>; <span class="attribute">height</span>: .<span class="number">5rem</span>; <span class="attribute">border</span>: .<span class="number">8px</span> solid <span class="number">#F10C10</span>; <span class="attribute">border-radius</span>: .<span class="number">25rem</span>; <span class="attribute">box-sizing</span>: border-box; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-iphoneXå…¬ç”¨"><a href="#5-iphoneXå…¬ç”¨" class="headerlink" title="5. iphoneXå…¬ç”¨"></a>5. iphoneXå…¬ç”¨</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">supports</span> (padding-bottom:constant(safe-area-inset-bottom))&#123;</span><br><span class="line">    <span class="selector-class">.nav-foot</span>&#123;<span class="attribute">padding-bottom</span>:<span class="built_in">constant</span>(safe-area-inset-bottom);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>static/webapp/js/common/attrsniffer.js</code></li><li><code>static/webapp/js/base.js</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isIos) &#123;</span><br><span class="line">    html.classList.add(<span class="string">"fl-ios"</span>);</span><br><span class="line">    vArr = appv.match(<span class="regexp">/OS (\d+)[_\.](?:\d+)[_\.]?(?:\d+)?/</span>);</span><br><span class="line">    ver = <span class="built_in">parseInt</span>(vArr[<span class="number">1</span>], <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ver &gt;= <span class="number">8</span>) &#123;</span><br><span class="line">        html.classList.add(<span class="string">"fl-hairlines"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(ratio == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>( w = <span class="number">375</span> &amp;&amp; h == <span class="number">812</span>) &#123; <span class="comment">// iPhone Xã€iPhone XS</span></span><br><span class="line">            html.classList.add(<span class="string">"fl-ios-bangs"</span>, <span class="string">"fl-ios-x"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( w = <span class="number">414</span> &amp;&amp; h == <span class="number">896</span>) &#123; <span class="comment">// iPhone XS Max</span></span><br><span class="line">            html.classList.add(<span class="string">"fl-ios-bangs"</span>, <span class="string">"fl-ios-xmax"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(ratio == <span class="number">2</span> &amp;&amp; w == <span class="number">414</span> &amp;&amp; h == <span class="number">896</span>) &#123;</span><br><span class="line">        html.classList.add(<span class="string">"fl-ios-bangs"</span>, <span class="string">"fl-ios-xr"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    vArr = appv;</span><br><span class="line">    ver = <span class="built_in">parseInt</span>(ua.substr(ua.indexOf(<span class="string">'android'</span>) + <span class="number">8</span>, <span class="number">3</span>));</span><br><span class="line">    html.classList.add(<span class="string">"fl-android"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ver &lt; <span class="number">6</span>) &#123;</span><br><span class="line">        html.classList.add(<span class="string">"fl-android-"</span> + ver);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// iPhone Xã€iPhone XS</span></span><br><span class="line"><span class="string">"isIosX"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">3</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">375</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">812</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// iPhone XS Max</span></span><br><span class="line"><span class="string">"isIosXMax"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">3</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">414</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">896</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// iPhone XR</span></span><br><span class="line"><span class="string">"isIosXR"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">2</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">414</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">896</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">"isIosBangs"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Fanli.Utility.isIosX || Fanli.Utility.isIosXMax || Fanli.Utility.isIosXR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-åœ†è§’æ‚¬æµ®åŠ¨æ•ˆ"><a href="#6-åœ†è§’æ‚¬æµ®åŠ¨æ•ˆ" class="headerlink" title="6. åœ†è§’æ‚¬æµ®åŠ¨æ•ˆ"></a>6. åœ†è§’æ‚¬æµ®åŠ¨æ•ˆ</h3><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1g119qw0ovgj30vt04576k.jpg" alt=""></p><p>uiæƒ³è¦çš„æ•ˆæœï¼š</p><ul><li>è¾¹ä¸Šæ»‘è¾¹æ”¶åœ†è§’</li><li>é¡µé¢ä»zè½´åˆ†ä¸ºä¸‰å±‚ï¼šèƒŒæ™¯å›¾å±‚ï¼Œé¡µé¢æ»šåŠ¨å±‚ï¼Œbarå±‚</li></ul><p>å®ç°ï¼š</p><ul><li>åœ†è§’ï¼šåˆ‡å‡ºä¸€è¡Œåœ†è§’pngå›¾</li><li>èƒŒæ™¯å›¾åšä¸€ä¸ªdiv background-image <code>z-index:-1;position:fixed;</code></li><li>barå±‚åšä¸€ä¸ªdivï¼Œé™åˆ¶é«˜åº¦ï¼Œå¹¶ä¸”background: url(xxx) no-repeat top; ä¿è¯ä»è§†è§‰æ˜¯barå±‚çš„èƒŒæ™¯å›¾æ˜¯ä¸€ç›´åœ¨èƒŒæ™¯å›¾å±‚çš„</li><li>åˆ¸å±‚è™½è·Ÿbarå±‚åœ¨ä¸€ä¸ªå¹³é¢ï¼Œä½†å› ä¸ºç‹¬ç«‹fixedï¼Œæ‰€ä»¥ä¹ŸåŠ ä¸Šbackground</li></ul><h3 id="7-skeletonéª¨æ¶å±åˆ‡æ¢"><a href="#7-skeletonéª¨æ¶å±åˆ‡æ¢" class="headerlink" title="7. skeletonéª¨æ¶å±åˆ‡æ¢"></a>7. skeletonéª¨æ¶å±åˆ‡æ¢</h3><ul><li>vue-router</li></ul><p><code>this.$route.name</code></p><ul><li>Fanli.Utility.getUrlParam(url, name)</li></ul><p><code>Fanli.Utility.getUrlParam(href, &#39;isbrand&#39;) == 1</code></p><h3 id="8-æ»šåŠ¨åŠ è½½-async-data"><a href="#8-æ»šåŠ¨åŠ è½½-async-data" class="headerlink" title="8. æ»šåŠ¨åŠ è½½ async-data"></a>8. æ»šåŠ¨åŠ è½½ async-data</h3><ul><li><code>static/super/src/h5/css/common/async-data.css</code></li><li><code>static/super/src/h5/js/common/async-data.vue.js</code></li></ul><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>vueå°è®°</title>
    <link href="https://wangchloe.vip/2019/03/24/blog49/"/>
    <id>https://wangchloe.vip/2019/03/24/blog49/</id>
    <published>2019-03-24T06:39:21.000Z</published>
    <updated>2019-07-24T06:58:28.550Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><a id="more"></a><h3 id="v-htmlä½¿ç”¨filter"><a href="#v-htmlä½¿ç”¨filter" class="headerlink" title="v-htmlä½¿ç”¨filter"></a>v-htmlä½¿ç”¨filter</h3><p><code>v-html=&quot;$options.filters.highlight(option.title)&quot;</code></p><h3 id="é”€æ¯window-scroll"><a href="#é”€æ¯window-scroll" class="headerlink" title="é”€æ¯window.scroll"></a>é”€æ¯window.scroll</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mounted()&#123;</span><br><span class="line">   <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.scrollListener,<span class="literal">false</span>)</span><br><span class="line">&#125;,</span><br><span class="line">destroyed()&#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>,<span class="keyword">this</span>.scrollListener,<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="vue" scheme="https://wangchloe.vip/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>æ•°å­—é€Ÿå˜ç‰¹æ•ˆ</title>
    <link href="https://wangchloe.vip/2018/12/11/blog58/"/>
    <id>https://wangchloe.vip/2018/12/11/blog58/</id>
    <published>2018-12-11T09:12:06.000Z</published>
    <updated>2019-07-24T09:28:07.809Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><p>åš“åš“åš“ é¡¿é¡¿é¡¿<br><a id="more"></a></p><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5b1ulk5ydg30hs08we6m.gif" alt=""></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">bindNumScroll: <span class="function"><span class="keyword">function</span>(<span class="params">val, initVal</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> current = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> step = val &gt;= <span class="number">400</span> ? <span class="built_in">Math</span>.ceil(val / <span class="number">100</span>) : <span class="built_in">Math</span>.ceil(val / <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">var</span> start = <span class="built_in">parseFloat</span>(initVal);</span><br><span class="line"></span><br><span class="line">    timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        start += step;</span><br><span class="line">        <span class="keyword">if</span> (start &gt; val) &#123;</span><br><span class="line">            clearInterval(timer);</span><br><span class="line">            start = val;</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (current === start) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        current = start;</span><br><span class="line">        $numBounty.html(current.toString().replace(<span class="regexp">/(\d)(?=(?:\d&#123;3&#125;[+]?)+$)/g</span>, <span class="string">'$1,'</span>));</span><br><span class="line">    &#125;, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åš“åš“åš“ é¡¿é¡¿é¡¿&lt;br&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="ç‰¹æ•ˆ" scheme="https://wangchloe.vip/tags/%E7%89%B9%E6%95%88/"/>
    
  </entry>
  
  <entry>
    <title>nextTickç ”ç©¶æŠ¥å‘Š</title>
    <link href="https://wangchloe.vip/2018/10/12/blog42/"/>
    <id>https://wangchloe.vip/2018/10/12/blog42/</id>
    <published>2018-10-11T19:27:35.000Z</published>
    <updated>2019-07-23T09:17:36.829Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><ul><li>nextTick<ul><li>es5æºç </li><li>å…³äºsetTimeout(fn,0)</li></ul></li><li>è®¨è®ºç‚¹</li><li>å¸¸ç”¨ç¤ºä¾‹<ul><li>1.mountedæ—¶æ›´æ–°<ul><li>console</li></ul></li><li>2.æ›´æ”¹å­ç»„ä»¶æ›´æ–°æ—¶é—´<ul><li>console</li></ul></li><li>3.åŒæ—¶æ›´æ”¹çˆ¶ç»„ä»¶æ›´æ–°æ—¶é—´<ul><li>console</li></ul></li><li>4.nextTické¡ºåºé—®é¢˜<ul><li>console</li></ul></li></ul></li><li>æ€»ç»“</li></ul><a id="more"></a><hr><h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><p>åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„ DOMã€‚</p><blockquote><p>vueè¿™ä¹ˆåšæ˜¯å› ä¸ºé¢‘ç¹çš„æ›´æ–°domæ˜¯ç‰¹åˆ«è€—è´¹æ€§èƒ½çš„ï¼Œæ‰€ä»¥æäº†ä¸€ä¸ªæ‰¹å¤„ç†æ›´æ–°ï¼ŒæŠŠæ‰€æœ‰çš„updateæ“ä½œæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œæ ˆçš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ã€‚</p></blockquote><h3 id="es5æºç "><a href="#es5æºç " class="headerlink" title="es5æºç "></a>es5æºç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Defer a task to execute it asynchronously.</span></span><br><span class="line"><span class="comment"> * å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> nextTick = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> callbacks = [];</span><br><span class="line">    <span class="keyword">var</span> pending = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> timerFunc;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">nextTickHandler</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        pending = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> copies = callbacks.slice(<span class="number">0</span>);</span><br><span class="line">        callbacks.length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; copies.length; i++) &#123;</span><br><span class="line">            copies[i]();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªè¦è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®æ”¹å˜ã€‚</span></span><br><span class="line">    <span class="comment">// å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚</span></span><br><span class="line">    <span class="comment">// è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œä¸Šéå¸¸é‡è¦ã€‚</span></span><br><span class="line">    <span class="comment">// ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚</span></span><br><span class="line">    <span class="comment">// Vue åœ¨å†…éƒ¨å°è¯•å¯¹å¼‚æ­¥é˜Ÿåˆ—ä½¿ç”¨åŸç”Ÿçš„ Promise.then å’Œ MessageChannelï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚</span></span><br><span class="line">    timerFunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        setTimeout(nextTickHandler, <span class="number">0</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">queueNextTick</span>(<span class="params">cb, ctx</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _resolve;</span><br><span class="line">        callbacks.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (cb) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    cb.call(ctx);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                    handleError(e, ctx, <span class="string">'nextTick'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_resolve) &#123;</span><br><span class="line">                _resolve(ctx);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (!pending) &#123;</span><br><span class="line">            pending = <span class="literal">true</span>;</span><br><span class="line">            timerFunc();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">Vue.prototype.$nextTick = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> nextTick(fn, <span class="keyword">this</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å…³äºsetTimeout-fn-0"><a href="#å…³äºsetTimeout-fn-0" class="headerlink" title="å…³äºsetTimeout(fn,0)"></a>å…³äºsetTimeout(fn,0)</h3><p><a href="https://juejin.im/entry/58d4df3b5c497d0057eb99ff" target="_blank" rel="noopener">ç†è§£ JavaScript ä¸­çš„ macrotask å’Œ microtask</a></p><blockquote><p> JavaScript ä¸»çº¿ç¨‹æ‹¥æœ‰ä¸€ä¸ª <code>æ‰§è¡Œæ ˆ</code> ä»¥åŠä¸€ä¸ª <code>ä»»åŠ¡é˜Ÿåˆ—</code>ï¼Œä¸»çº¿ç¨‹ä¼šä¾æ¬¡æ‰§è¡Œä»£ç ï¼Œå½“é‡åˆ°å‡½æ•°æ—¶ï¼Œä¼šå…ˆå°†<code>å‡½æ•° å…¥æ ˆ</code>ï¼Œå‡½æ•°è¿è¡Œå®Œæ¯•åå†å°†è¯¥<code>å‡½æ•° å‡ºæ ˆ</code>ï¼Œç›´åˆ°æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚</p></blockquote><ul><li>macrotasks: setTimeout, setInterval, setImmediate, I/O, UI rendering</li><li>microtasks: process.nextTick, Promises, Object.observe(åºŸå¼ƒ), MutationObserver</li></ul><blockquote><p>åœ¨æ¯ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œmacrotask åªä¼šæå–ä¸€ä¸ªæ‰§è¡Œï¼Œè€Œ microtask ä¼šä¸€ç›´æå–ï¼Œç›´åˆ° microtasks é˜Ÿåˆ—æ¸…ç©ºã€‚</p></blockquote><h2 id="è®¨è®ºç‚¹"><a href="#è®¨è®ºç‚¹" class="headerlink" title="è®¨è®ºç‚¹"></a>è®¨è®ºç‚¹</h2><ul><li>çˆ¶ç»„ä»¶nextTickçš„è§¦å‘åœ¨å­ç»„ä»¶DOMå®Œæˆå‰è¿˜æ˜¯å®Œæˆåï¼Ÿ</li></ul><h2 id="å¸¸ç”¨ç¤ºä¾‹"><a href="#å¸¸ç”¨ç¤ºä¾‹" class="headerlink" title="å¸¸ç”¨ç¤ºä¾‹"></a>å¸¸ç”¨ç¤ºä¾‹</h2><p><a href="https://codepen.io/WangChloe/pen/JmEbxb" target="_blank" rel="noopener">codepenç¤ºä¾‹</a></p><ul><li>DOM</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span>&gt;</span><span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-mountedæ—¶æ›´æ–°"><a href="#1-mountedæ—¶æ›´æ–°" class="headerlink" title="1.mountedæ—¶æ›´æ–°"></a>1.mountedæ—¶æ›´æ–°</h3><ul><li>çˆ¶ç»„ä»¶</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#J_app"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            title: <span class="string">"çˆ¶ç»„ä»¶"</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆå§‹åŒ–ä¹‹å</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeCreate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶created"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeMount"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeUpdate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeUpdate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶updated"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// elè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼ŒæŒ‚è½½åˆ°å®ä¾‹ä¸Š</span></span><br><span class="line">            <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶mounted"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶nextTick"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            that.title = <span class="string">"çˆ¶ç»„ä»¶æ›´æ–°"</span>;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶æ›´æ–°"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><ul><li>å­ç»„ä»¶</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tpl = <span class="string">"&lt;h4&gt;&#123;&#123;subtitle&#125;&#125;&lt;/h4&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    Vue.component(<span class="string">'item'</span>, &#123;</span><br><span class="line">        data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                subtitle: <span class="string">"å­ç»„ä»¶"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        props: [],</span><br><span class="line">        template: tpl,</span><br><span class="line">        beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆå§‹åŒ–ä¹‹å</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeCreate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶created"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeMount"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeUpdate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeUpdate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶updated"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// elè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼ŒæŒ‚è½½åˆ°å®ä¾‹ä¸Š</span></span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶mounted"</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶nextTick"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            that.subtitle = <span class="string">"å­ç»„ä»¶æ›´æ–°"</span>;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶æ›´æ–°"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h4 id="console"><a href="#console" class="headerlink" title="console"></a>console</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶beforeCreate</span><br><span class="line">çˆ¶ç»„ä»¶created</span><br><span class="line">çˆ¶ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶beforeCreate</span><br><span class="line">å­ç»„ä»¶created</span><br><span class="line">å­ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶mounted</span><br><span class="line">å­ç»„ä»¶æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶</span><br><span class="line">çˆ¶ç»„ä»¶mounted</span><br><span class="line">çˆ¶ç»„ä»¶æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶ å­ç»„ä»¶</span><br><span class="line">å­ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶</span><br><span class="line">çˆ¶ç»„ä»¶beforeUpdate</span><br><span class="line">å­ç»„ä»¶beforeUpdate</span><br><span class="line">å­ç»„ä»¶updated</span><br><span class="line">çˆ¶ç»„ä»¶updated</span><br><span class="line">çˆ¶ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶æ›´æ–° å­ç»„ä»¶æ›´æ–°</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fw0xto1eidj30wn0a80t4.jpg" alt=""></p><blockquote><p>nextTickå†™åœ¨æ•°æ®æ›´æ”¹å‰ä¸èƒ½æ‹¿åˆ°æ›´æ–°åçš„æ•°æ®ã€‚</p></blockquote><h3 id="2-æ›´æ”¹å­ç»„ä»¶æ›´æ–°æ—¶é—´"><a href="#2-æ›´æ”¹å­ç»„ä»¶æ›´æ–°æ—¶é—´" class="headerlink" title="2.æ›´æ”¹å­ç»„ä»¶æ›´æ–°æ—¶é—´"></a>2.æ›´æ”¹å­ç»„ä»¶æ›´æ–°æ—¶é—´</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tpl = <span class="string">"&lt;h4&gt;&#123;&#123;subtitle&#125;&#125;&lt;/h4&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    Vue.component(<span class="string">'item'</span>, &#123;</span><br><span class="line">        data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                subtitle: <span class="string">"å­ç»„ä»¶"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        props: [],</span><br><span class="line">        template: tpl,</span><br><span class="line">        beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆå§‹åŒ–ä¹‹å</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeCreate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶created"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeMount"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeUpdate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeUpdate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶updated"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// elè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼ŒæŒ‚è½½åˆ°å®ä¾‹ä¸Š</span></span><br><span class="line">            <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶mounted"</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶nextTick"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                that.subtitle = <span class="string">"å­ç»„ä»¶æ›´æ–°"</span>;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶æ›´æ–°"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h4 id="console-1"><a href="#console-1" class="headerlink" title="console"></a>console</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶beforeCreate</span><br><span class="line">çˆ¶ç»„ä»¶created</span><br><span class="line">çˆ¶ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶beforeCreate</span><br><span class="line">å­ç»„ä»¶created</span><br><span class="line">å­ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶mounted</span><br><span class="line">çˆ¶ç»„ä»¶mounted</span><br><span class="line">çˆ¶ç»„ä»¶æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶ å­ç»„ä»¶</span><br><span class="line">å­ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶</span><br><span class="line">çˆ¶ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶ å­ç»„ä»¶</span><br><span class="line">çˆ¶ç»„ä»¶beforeUpdate</span><br><span class="line">çˆ¶ç»„ä»¶updated</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶</span><br><span class="line">å­ç»„ä»¶beforeUpdate</span><br><span class="line">å­ç»„ä»¶updated</span><br></pre></td></tr></table></figure><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fw0xu13un4j30wn0b6jrs.jpg" alt=""></p><blockquote><p>è‹¥å­ç»„ä»¶åœ¨mountedå³æ›´æ–°ï¼Œå­ç»„ä»¶çš„updateåŠ¨ä½œä¼šåœ¨çˆ¶ç»„ä»¶çš„beforeUpdateä¹‹åupdatedä¹‹å‰æ‰§è¡Œã€‚<br>åä¹‹åˆ™æ›´æ–°åå­ç»„ä»¶è‡ªå·±æ‰§è¡Œupdateï¼Œå¹¶ä¸”ç”±äºçˆ¶ç»„ä»¶nextTickå†™åœ¨æ•°æ®æ›´æ”¹ä¹‹å‰ï¼Œå¯¼è‡´å…ˆæ‰§è¡Œçˆ¶ç»„ä»¶nextTickå†æ‰§è¡Œçˆ¶ç»„ä»¶çš„updateåŠ¨ä½œã€‚</p></blockquote><h3 id="3-åŒæ—¶æ›´æ”¹çˆ¶ç»„ä»¶æ›´æ–°æ—¶é—´"><a href="#3-åŒæ—¶æ›´æ”¹çˆ¶ç»„ä»¶æ›´æ–°æ—¶é—´" class="headerlink" title="3.åŒæ—¶æ›´æ”¹çˆ¶ç»„ä»¶æ›´æ–°æ—¶é—´"></a>3.åŒæ—¶æ›´æ”¹çˆ¶ç»„ä»¶æ›´æ–°æ—¶é—´</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#J_app"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            title: <span class="string">"çˆ¶ç»„ä»¶"</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆå§‹åŒ–ä¹‹å</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeCreate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶created"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeMount"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeUpdate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeUpdate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶updated"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// elè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼ŒæŒ‚è½½åˆ°å®ä¾‹ä¸Š</span></span><br><span class="line">            <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶mounted"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶nextTick"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                that.title = <span class="string">"çˆ¶ç»„ä»¶æ›´æ–°"</span>;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶æ›´æ–°"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h4 id="console-2"><a href="#console-2" class="headerlink" title="console"></a>console</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶beforeCreate</span><br><span class="line">çˆ¶ç»„ä»¶created</span><br><span class="line">çˆ¶ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶beforeCreate</span><br><span class="line">å­ç»„ä»¶created</span><br><span class="line">å­ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶mounted</span><br><span class="line">çˆ¶ç»„ä»¶mounted</span><br><span class="line">å­ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶</span><br><span class="line">çˆ¶ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶ å­ç»„ä»¶</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶</span><br><span class="line">å­ç»„ä»¶beforeUpdate</span><br><span class="line">å­ç»„ä»¶updated</span><br><span class="line">çˆ¶ç»„ä»¶æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶ å­ç»„ä»¶æ›´æ–°</span><br><span class="line">çˆ¶ç»„ä»¶beforeUpdate</span><br><span class="line">çˆ¶ç»„ä»¶updated</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fw0y07buyqj30wn0b6mxk.jpg" alt=""></p><blockquote><p>è‹¥çˆ¶ã€å­ç»„ä»¶çš„æ›´æ–°å»¶æ—¶ç›¸åŒï¼Œåˆ™ä¼šå„è‡ªæ‰§è¡Œå„è‡ªçš„updateåŠ¨ä½œï¼Œå­ç»„ä»¶ä¼˜å…ˆã€‚</p></blockquote><h3 id="4-nextTické¡ºåºé—®é¢˜"><a href="#4-nextTické¡ºåºé—®é¢˜" class="headerlink" title="4.nextTické¡ºåºé—®é¢˜"></a>4.nextTické¡ºåºé—®é¢˜</h3><p><strong>nextTickåº”å†™åœ¨æ•°æ®æ›´æ”¹å</strong></p><ul><li>çˆ¶ç»„ä»¶</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">"#J_app"</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            title: <span class="string">"çˆ¶ç»„ä»¶"</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆå§‹åŒ–ä¹‹å</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeCreate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶created"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeMount"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeUpdate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶beforeUpdate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶updated"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// elè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼ŒæŒ‚è½½åˆ°å®ä¾‹ä¸Š</span></span><br><span class="line">            <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶mounted"</span>);</span><br><span class="line"></span><br><span class="line">            that.title = <span class="string">"çˆ¶ç»„ä»¶æ›´æ–°"</span>;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶å·²æ›´æ–°"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"çˆ¶ç»„ä»¶nextTick"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><ul><li>å­ç»„ä»¶</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tpl = <span class="string">"&lt;h4&gt;&#123;&#123;subtitle&#125;&#125;&lt;/h4&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    Vue.component(<span class="string">'item'</span>, &#123;</span><br><span class="line">        data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                subtitle: <span class="string">"å­ç»„ä»¶"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        props: [],</span><br><span class="line">        template: tpl,</span><br><span class="line">        beforeCreate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆå§‹åŒ–ä¹‹å</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeCreate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// å®ä¾‹åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶created"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeMount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeMount"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        beforeUpdate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶beforeUpdate"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶updated"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶mounted"</span>)</span><br><span class="line"></span><br><span class="line">            that.subtitle = <span class="string">"å­ç»„ä»¶æ›´æ–°"</span>;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶å·²æ›´æ–°"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å­ç»„ä»¶nextTick"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å½“å‰é¡µé¢content:"</span> + that.$el.textContent);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h4 id="console-3"><a href="#console-3" class="headerlink" title="console"></a>console</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶beforeCreate</span><br><span class="line">çˆ¶ç»„ä»¶created</span><br><span class="line">çˆ¶ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶beforeCreate</span><br><span class="line">å­ç»„ä»¶created</span><br><span class="line">å­ç»„ä»¶beforeMount</span><br><span class="line">å­ç»„ä»¶mounted</span><br><span class="line">å­ç»„ä»¶å·²æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶</span><br><span class="line">çˆ¶ç»„ä»¶mounted</span><br><span class="line">çˆ¶ç»„ä»¶å·²æ›´æ–°</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶ å­ç»„ä»¶</span><br><span class="line">çˆ¶ç»„ä»¶beforeUpdate</span><br><span class="line">å­ç»„ä»¶beforeUpdate</span><br><span class="line">å­ç»„ä»¶updated</span><br><span class="line">çˆ¶ç»„ä»¶updated</span><br><span class="line">å­ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:å­ç»„ä»¶æ›´æ–°</span><br><span class="line">çˆ¶ç»„ä»¶nextTick</span><br><span class="line">å½“å‰é¡µé¢content:çˆ¶ç»„ä»¶æ›´æ–° å­ç»„ä»¶æ›´æ–°</span><br></pre></td></tr></table></figure><p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fw0x1a7prjj30xh0b2mxj.jpg" alt=""></p><blockquote><p>å¦‚æœå­ç»„ä»¶nextTickå†™åœ¨æ•°æ®æ›´æ”¹å‰ï¼Œåˆ™ä¼šåœ¨çˆ¶ç»„ä»¶moutedä¹‹åbeforeUpdateä¹‹å‰æ‰§è¡ŒnextTickã€‚å®é™…åº”åœ¨updatedä¹‹åæ‰§è¡ŒnextTickï¼Œè¿™æ ·nextTickæ‰èƒ½æ‹¿åˆ°æœ€æ–°çš„æ•°æ®ã€‚</p></blockquote><ul><li>æ¨èåœ¨updatedä¸­æ‰§è¡Œ$nextTick</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">updated: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æ•°æ®æ›´æ–°ä¹‹åè°ƒç”¨</span></span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ç»„ä»¶updated"</span>);</span><br><span class="line">    <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ç»„ä»¶nextTick"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>çˆ¶ç»„ä»¶nextTickçš„è§¦å‘åœ¨<strong>å­ç»„ä»¶updatedå</strong>ã€‚</p></li><li><p>è‹¥å­ç»„ä»¶åœ¨mountedå³æ›´æ–°ï¼Œå­ç»„ä»¶çš„updateåŠ¨ä½œä¼šåœ¨çˆ¶ç»„ä»¶çš„beforeUpdateä¹‹åupdatedä¹‹å‰æ‰§è¡Œã€‚<strong>åä¹‹åˆ™æ›´æ–°åå­ç»„ä»¶è‡ªå·±æ‰§è¡Œupdateï¼Œä¸ä¼šå½±å“çˆ¶ç»„ä»¶çš„nextTick</strong>ã€‚</p></li><li><p>è‹¥çˆ¶ã€å­ç»„ä»¶çš„æ›´æ–°å»¶æ—¶ç›¸åŒï¼Œåˆ™ä¼šå„è‡ªæ‰§è¡Œå„è‡ªçš„updateåŠ¨ä½œï¼Œ<strong>å­ç»„ä»¶ä¼˜å…ˆ</strong>ã€‚</p></li><li><p>nextTickéƒ½éœ€å†™åœ¨å„è‡ª<strong>ç»„ä»¶çš„updatedä¹‹å</strong>ã€‚</p></li></ul><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼</p><p>å…¬ä¼—å·ä¸å‘æ–‡çš„æ—¶å€™æ¨é€ä¸€äº›æˆ‘è§‰å¾—å¥½ç”¨çš„å‰ç«¯ç½‘ç«™æˆ–è€…çœ‹åˆ°çš„ä¸€äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ›´ä¾¿äºå¤§å®¶äº¤æµï¼Œå°±é…±ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;nextTick&lt;ul&gt;
&lt;li&gt;es5æºç &lt;/li&gt;
&lt;li&gt;å…³äºsetTimeout(fn,0)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®¨è®ºç‚¹&lt;/li&gt;
&lt;li&gt;å¸¸ç”¨ç¤ºä¾‹&lt;ul&gt;
&lt;li&gt;1.mountedæ—¶æ›´æ–°&lt;ul&gt;
&lt;li&gt;console&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.æ›´æ”¹å­ç»„ä»¶æ›´æ–°æ—¶é—´&lt;ul&gt;
&lt;li&gt;console&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;3.åŒæ—¶æ›´æ”¹çˆ¶ç»„ä»¶æ›´æ–°æ—¶é—´&lt;ul&gt;
&lt;li&gt;console&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;4.nextTické¡ºåºé—®é¢˜&lt;ul&gt;
&lt;li&gt;console&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ€»ç»“&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="vue" scheme="https://wangchloe.vip/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>åŒ—äº¬5æ—¥æ¸¸æ”»ç•¥ï½</title>
    <link href="https://wangchloe.vip/2018/09/21/life2/"/>
    <id>https://wangchloe.vip/2018/09/21/life2/</id>
    <published>2018-09-20T19:12:48.000Z</published>
    <updated>2019-07-23T09:32:40.946Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æ‰‹ç»˜å¯¼è§ˆå›¾ï¼Œä¾¬æ™“å¾—ä¼</p><a id="more"></a><p><a href="https://www.jianshu.com/p/1204cbd915be" target="_blank" rel="noopener">åŒ—äº¬5æ—¥æ¸¸æ”»ç•¥ï½</a></p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰‹ç»˜å¯¼è§ˆå›¾ï¼Œä¾¬æ™“å¾—ä¼&lt;/p&gt;
    
    </summary>
    
      <category term="ä½ å¥½ï¼Œé™Œç”Ÿäºº" scheme="https://wangchloe.vip/categories/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E9%99%8C%E7%94%9F%E4%BA%BA/"/>
    
    
      <category term="çˆ±æ—…æ¸¸" scheme="https://wangchloe.vip/tags/%E7%88%B1%E6%97%85%E6%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>å°å¨æ•™ä½ åšé¸¡è›‹çŒé¥¼</title>
    <link href="https://wangchloe.vip/2018/03/29/life5/"/>
    <id>https://wangchloe.vip/2018/03/29/life5/</id>
    <published>2018-03-28T19:12:48.000Z</published>
    <updated>2019-07-23T09:24:10.278Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p><strong>å…¬ä¼—å·åˆå¼€æ–°åŠŸèƒ½äº†ï¼Œæ‰€ä»¥æˆ‘åˆå‘äº†ç¯‡åšé¥­æ•™ç¨‹ï¼Œè¿™æ¬¡æ˜¯è€æ±ªé¸¡è›‹çŒé¥¼ğŸ¥šï¼</strong></p><a id="more"></a><hr><p><a href="https://www.jianshu.com/p/ee03cef7fd7a" target="_blank" rel="noopener">æ— åª›æ— æ•…-å°å¨æ•™ä½ åšé¸¡è›‹çŒé¥¼</a></p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;å…¬ä¼—å·åˆå¼€æ–°åŠŸèƒ½äº†ï¼Œæ‰€ä»¥æˆ‘åˆå‘äº†ç¯‡åšé¥­æ•™ç¨‹ï¼Œè¿™æ¬¡æ˜¯è€æ±ªé¸¡è›‹çŒé¥¼ğŸ¥šï¼&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="ä½ å¥½ï¼Œé™Œç”Ÿäºº" scheme="https://wangchloe.vip/categories/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E9%99%8C%E7%94%9F%E4%BA%BA/"/>
    
    
      <category term="çˆ±åšé¥­" scheme="https://wangchloe.vip/tags/%E7%88%B1%E5%81%9A%E9%A5%AD/"/>
    
  </entry>
  
  <entry>
    <title>ä¹å®«æ ¼è½¬ç›˜ç‰¹æ•ˆ</title>
    <link href="https://wangchloe.vip/2018/03/09/blog59/"/>
    <id>https://wangchloe.vip/2018/03/09/blog59/</id>
    <published>2018-03-09T09:26:12.000Z</published>
    <updated>2019-07-24T09:31:52.738Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><p> duang duang duang</p><a id="more"></a><p>æ•ˆæœå¦‚ä¸‹</p><p><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g5b26rryxyg30dg0jux6y.gif" alt=""></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"turntable"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"description"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>SquaredLotteryRoll<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"table-container table-container-1"</span> <span class="attr">id</span>=<span class="string">"J_lottery_container_1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>- ä¹å®«æ ¼<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-0"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-1"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-2"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-7"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-wrap"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_btn_start_1"</span>&gt;</span>ç‚¹å‡»æŠ½å¥–<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-3"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-6"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-5"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-4"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"table-container table-container-2"</span> <span class="attr">id</span>=<span class="string">"J_lottery_container_2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>- åäºŒå®«æ ¼<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-0"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-1"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-2"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-3"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-11"</span>"&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-wrap"</span> <span class="attr">colspan</span>=<span class="string">"2"</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_btn_start_2"</span>&gt;</span>ç‚¹å‡»æŠ½å¥–<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-4"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-10"</span>"&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-5"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-9"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-8"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-7"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"lottery-unit lottery-unit-6"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// æ’åºä¸ºå·¦ä¸Š0 å³ä¸Š2 å³ä¸‹4 å·¦ä¸‹6</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $.squaredLotteryRoll(&#123;</span></span><br><span class="line"><span class="javascript">            rollWrapSelector: <span class="string">"#J_lottery_container_1"</span>,</span></span><br><span class="line"><span class="javascript">            prizeIndex: <span class="number">1</span>, <span class="comment">// ä¸­å¥–åºå·ä»0å¼€å§‹ 1ä¸ºrow1 col2</span></span></span><br><span class="line"><span class="javascript">            isDefaultClickFn: <span class="literal">true</span>,  <span class="comment">// é»˜è®¤ç‚¹å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">            rollBtnSelector: <span class="string">"#J_btn_start_1"</span>,</span></span><br><span class="line"><span class="javascript">            succCallback: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">"æŠ½å¥–æˆåŠŸ"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#J_btn_start_2"</span>).on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#J_lottery_container_2"</span>).addClass(<span class="string">"mode-2"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            $.squaredLotteryRoll(&#123;</span></span><br><span class="line"><span class="javascript">                rollWrapSelector: <span class="string">"#J_lottery_container_2"</span>,</span></span><br><span class="line"><span class="undefined">                prizeIndex: 6,</span></span><br><span class="line"><span class="javascript">                isDefaultClickFn: <span class="literal">false</span>,  <span class="comment">// è‡ªå®šä¹‰ç‚¹å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;)();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///&lt;reference path="../vendors/jquery/jquery.js" /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @file squaredLotteryRoll</span></span><br><span class="line"><span class="comment"> * @import vendors/jquery/jquery-2.1.1.js</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">##å‚æ•°</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹å®«æ ¼è½¬ç›˜</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span><br><span class="line">    $.extend(&#123;</span><br><span class="line">        squaredLotteryRoll: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> settings = $.extend(<span class="literal">true</span>, &#123;&#125;, &#123;</span><br><span class="line">                speed: <span class="number">200</span>, <span class="comment">//åˆå§‹è½¬åŠ¨é€Ÿåº¦</span></span><br><span class="line">                times: <span class="number">0</span>, <span class="comment">//è½¬åŠ¨æ¬¡æ•°</span></span><br><span class="line">                cycle: <span class="number">50</span>, <span class="comment">//è½¬åŠ¨åŸºæœ¬æ¬¡æ•°ï¼šå³è‡³å°‘éœ€è¦è½¬åŠ¨å¤šå°‘æ¬¡å†è¿›å…¥æŠ½å¥–ç¯èŠ‚</span></span><br><span class="line">                prizeIndex: <span class="number">-1</span>, <span class="comment">//ä¸­å¥–ä½ç½®</span></span><br><span class="line">                actClass: <span class="string">'act'</span>, <span class="comment">// é€‰ä¸­æ·»åŠ æ ·å¼</span></span><br><span class="line">                unitSelector: <span class="string">".lottery-unit"</span>, <span class="comment">// æ¯ä¸ªå•å…ƒæ ¼çš„ç±»ååŠç´¢å¼•å‰ç¼€</span></span><br><span class="line">                rollWrapSelector: <span class="string">"#J_lottery_roll"</span>, <span class="comment">// è½¬ç›˜</span></span><br><span class="line">                rollBtnSelector: <span class="string">"#J_btn_start"</span>, <span class="comment">// æŠ½å¥–æŒ‰é’®</span></span><br><span class="line">                isDefaultClickFn: <span class="literal">true</span>,</span><br><span class="line">                succCallback: $.noop,</span><br><span class="line">            &#125;, options);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> $rollWrap = $(settings.rollWrapSelector);</span><br><span class="line">            <span class="keyword">var</span> $rollBtn = $(settings.rollBtnSelector, settings.rollWrapSelector);</span><br><span class="line">            <span class="keyword">var</span> $units = $(settings.unitSelector, settings.rollWrapSelector);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> count = <span class="number">0</span>; <span class="comment">//æ€»å…±æœ‰å¤šå°‘ä¸ªä½ç½®</span></span><br><span class="line">            <span class="keyword">var</span> index = <span class="number">0</span>; <span class="comment">//å½“å‰è½¬åŠ¨åˆ°å“ªä¸ªä½ç½®</span></span><br><span class="line">            <span class="keyword">var</span> timer = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">var</span> click = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">var</span> times = settings.times;</span><br><span class="line">            <span class="keyword">var</span> speed = settings.speed;</span><br><span class="line">            <span class="keyword">var</span> prizeIndex = settings.prizeIndex &gt;= <span class="number">0</span> ? settings.prizeIndex : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">var</span> timer;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">setup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!$rollWrap.length) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                settings.isDefaultClickFn ? initClick() : init();;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">initClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                $rollBtn.on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">                    ev.preventDefault();</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (click) &#123;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    init();</span><br><span class="line">                    click = <span class="literal">true</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> len = $units.length;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (len &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    index = len - <span class="number">1</span>;</span><br><span class="line">                    $rollWrap.find(settings.unitSelector + <span class="string">"-"</span> + index).addClass(settings.actClass);</span><br><span class="line">                    count = $units.length;</span><br><span class="line">                    roll();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">roll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                times++;</span><br><span class="line">                rolling();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (times &gt; settings.cycle + <span class="number">10</span> &amp;&amp; prizeIndex == index) &#123;</span><br><span class="line">                    clearTimeout(timer);</span><br><span class="line">                    times = <span class="number">0</span>;</span><br><span class="line">                    click = <span class="literal">false</span>;</span><br><span class="line">                    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                        settings.succCallback &amp;&amp; settings.succCallback();</span><br><span class="line">                    &#125;, <span class="number">200</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (times &lt; settings.cycle) &#123;</span><br><span class="line">                        speed -= <span class="number">10</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (times &gt; settings.cycle + <span class="number">10</span> &amp;&amp; (prizeIndex == <span class="number">0</span> &amp;&amp; index == (count - <span class="number">1</span>)) || (prizeIndex == index + <span class="number">1</span>)) &#123;</span><br><span class="line">                            speed += <span class="number">110</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            speed += <span class="number">20</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    speed &lt; <span class="number">40</span> &amp;&amp; (speed = <span class="number">40</span>);</span><br><span class="line">                    timer = setTimeout(roll, speed);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">rolling</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                $rollWrap.find(settings.unitSelector + <span class="string">"-"</span> + index).removeClass(settings.actClass);</span><br><span class="line">                index++;</span><br><span class="line">                <span class="keyword">if</span> (index &gt; count - <span class="number">1</span>) &#123;</span><br><span class="line">                    index = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                $rollWrap.find(settings.unitSelector + <span class="string">"-"</span> + index).addClass(settings.actClass);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            setup();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;(jQuery));</span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt; duang duang duang&lt;/p&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="ç‰¹æ•ˆ" scheme="https://wangchloe.vip/tags/%E7%89%B9%E6%95%88/"/>
    
  </entry>
  
  <entry>
    <title>2017-D2å‰ç«¯æŠ€æœ¯è®ºå› æ–°æ€</title>
    <link href="https://wangchloe.vip/2018/01/02/blog41/"/>
    <id>https://wangchloe.vip/2018/01/02/blog41/</id>
    <published>2018-01-01T19:27:35.000Z</published>
    <updated>2019-07-23T09:17:37.857Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><ul><li>å¤©çŒ«è¶…å¸‚Mobile Webçš„æè‡´ä½“éªŒä¼˜åŒ–<ul><li>å›å½’webè§£å†³é—®é¢˜</li><li>webç›®å‰çš„ä¸è¶³</li><li>è§£å†³æ–¹å‘</li></ul></li></ul><a id="more"></a><hr><ul><li><a href="http://d2forum.alibaba-inc.com/#/index?_k=ux8vkk" target="_blank" rel="noopener">2017-D2</a></li></ul><blockquote><p><strong>åŒ å¿ƒ</strong> -&gt; <code>å·¥åŒ ç²¾ç¥</code> <code>ç®€å•çš„äº‹åšå¥½</code> <code>ç®€å•çš„äº‹åšçš„æ›´å¥½</code></p></blockquote><h2 id="å¤©çŒ«è¶…å¸‚Mobile-Webçš„æè‡´ä½“éªŒä¼˜åŒ–"><a href="#å¤©çŒ«è¶…å¸‚Mobile-Webçš„æè‡´ä½“éªŒä¼˜åŒ–" class="headerlink" title="å¤©çŒ«è¶…å¸‚Mobile Webçš„æè‡´ä½“éªŒä¼˜åŒ–"></a>å¤©çŒ«è¶…å¸‚Mobile Webçš„æè‡´ä½“éªŒä¼˜åŒ–</h2><ul><li><a href="https://chaoshi.m.tmall.com/" target="_blank" rel="noopener">å¤©çŒ«è¶…å¸‚</a></li></ul><h3 id="å›å½’webè§£å†³é—®é¢˜ï¼š"><a href="#å›å½’webè§£å†³é—®é¢˜ï¼š" class="headerlink" title="å›å½’webè§£å†³é—®é¢˜ï¼š"></a>å›å½’webè§£å†³é—®é¢˜ï¼š</h3><ul><li>æ»šåŠ¨è¿‡ç¨‹ä»£ç å†»ç»“(Nativeè§£å†³)<ul><li>WKWebview(ios8+) æ›¿ä»£ UIWebviewç»„ä»¶<ul><li>åœ¨æ€§èƒ½ã€ç¨³å®šæ€§ã€åŠŸèƒ½æ–¹é¢æœ‰å¾ˆå¤§æå‡<br>ï¼ˆæœ€ç›´è§‚çš„ä½“ç°å°±æ˜¯åŠ è½½ç½‘é¡µæ˜¯å ç”¨çš„å†…å­˜ï¼Œæ¨¡æ‹Ÿå™¨åŠ è½½ç™¾åº¦ä¸å¼€æºä¸­å›½ç½‘ç«™æ—¶ï¼ŒWKWebViewå ç”¨23Mï¼Œè€ŒUIWebViewå ç”¨85Mï¼‰</li><li>å…è®¸JavaScriptçš„Nitroå¼•æ“åº“åŠ è½½å¹¶ä½¿ç”¨ï¼ˆUIWebViewä¸­é™åˆ¶ï¼‰</li><li>æ”¯æŒäº†æ›´å¤šçš„HTML5ç‰¹æ€§</li><li>é«˜è¾¾60fpsçš„æ»šåŠ¨åˆ·æ–°ç‡ä»¥åŠå†…ç½®æ‰‹åŠ¿</li><li>å°†UIWebViewDelegateä¸UIWebViewé‡æ„æˆäº†14ç±»ä¸3ä¸ªåè®®</li></ul></li><li>æµè§ˆå™¨å†…æ ¸U4<ul><li>æé€Ÿå¼•æ“ï¼Œé‡‡ç”¨å…¨æ–°çš„V8å¼•æ“ï¼Œåœ¨U4 1.0çš„åŸºç¡€ä¸Šï¼Œæ€§èƒ½ç»§ç»­æé«˜10%ï¼Œé‡æ–°æ‰“å¼€ç½‘é¡µçš„é€Ÿåº¦æé«˜10%-20%ï¼›</li><li>å…¨æ–°çš„æ¸²æŸ“æ¶æ„ï¼Œæ–°çš„Passive Event Listenerã€Intersection Observerç­‰èƒ½åŠ›èµ‹äºˆH5é¡µé¢æ›´åŠ æµç•…çš„æ“ä½œä½“éªŒï¼›</li><li>æ ‡å‡†é¢†å…ˆï¼Œæ–°å†…æ ¸æ”¯æŒæœ€æ–°çš„PWAæŠ€æœ¯ä»¥åŠå…¶ä»–æœ€æ–°çš„H5ã€JSã€CSSæ ‡å‡†ï¼Œå¹¶åœ¨å›½å†…é¦–æ¬¡æä¾›æ ‡å‡†Webæ¨é€æœåŠ¡ï¼›</li><li>åˆ›æ–°æ‰©å±•ï¼Œæ¨å‡ºä¸šç•Œæ•ˆç‡æœ€é«˜çš„Web ARæŠ€æœ¯ï¼Œå…¼é¡¾Nativeçš„ä½“éªŒå’ŒH5çš„é«˜æ•ˆç‡ï¼Œè¿˜æœ‰å…¶ä»–æ›´å¤šçš„åˆ›æ–°æ‰©å±•å€¼å¾—æœŸå¾…ã€‚</li></ul></li></ul></li><li>åŠ è½½æ…¢<ul><li>é¢„åŠ è½½</li></ul></li><li>é¡µå¤´æ— æ³•å®šåˆ¶<ul><li>éšè—nativeé¡µå¤´ï¼Œä½¿ç”¨h5é¡µå¤´</li></ul></li></ul><h3 id="webç›®å‰çš„ä¸è¶³"><a href="#webç›®å‰çš„ä¸è¶³" class="headerlink" title="webç›®å‰çš„ä¸è¶³"></a>webç›®å‰çš„ä¸è¶³</h3><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fmumfdhjmmj315k09sjv1.jpg" alt="webç›®å‰çš„ä¸è¶³"></p><h3 id="è§£å†³æ–¹å‘"><a href="#è§£å†³æ–¹å‘" class="headerlink" title="è§£å†³æ–¹å‘"></a>è§£å†³æ–¹å‘</h3><h4 id="ç²¾ç»†åŒ–"><a href="#ç²¾ç»†åŒ–" class="headerlink" title="ç²¾ç»†åŒ–"></a>ç²¾ç»†åŒ–</h4><ul><li>è¿˜åŸåº¦</li><li>å­—è¡Œé«˜</li><li>Androidæ–‡å­—å‚ç›´å±…ä¸­<ul><li>émiuiä¸‹éƒ½æ˜¯åä¸Šçš„<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:-webkit-box;</span><br><span class="line">    <span class="attribute">display</span>:flex;</span><br><span class="line">    <span class="attribute">-webkit-box-pack</span>:center; <span class="comment">/*æ°´å¹³å±…ä¸­*/</span></span><br><span class="line">    <span class="attribute">-webkit-box-align</span>:center; <span class="comment">/*å‚ç›´å±…ä¸­*/</span></span><br><span class="line">    <span class="attribute">align-items</span>:center; <span class="comment">/*å‚ç›´å±…ä¸­*/</span></span><br><span class="line">    <span class="attribute">justify-content</span>:center; <span class="comment">/*æ°´å¹³å±…ä¸­*/</span></span><br><span class="line">    <span class="attribute">width</span>:<span class="number">2rem</span>;</span><br><span class="line">    <span class="attribute">height</span>:.<span class="number">3rem</span>;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">1rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>:.<span class="number">24rem</span>;</span><br><span class="line">    <span class="attribute">overflow</span>:hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="æ“ä½œä½“éªŒ"><a href="#æ“ä½œä½“éªŒ" class="headerlink" title="æ“ä½œä½“éªŒ"></a>æ“ä½œä½“éªŒ</h4><ul><li>æé€Ÿå“åº” 100mså†…å“åº”ç”¨æˆ·æ“ä½œ<ul><li>å¹¶è¡ŒåŠ è½½èµ„æºå’Œæ•°æ® <strong>Promise.all()</strong></li><li>è¶³å¤Ÿå¿«æ—¶ä¸éœ€è¦loading<br><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fmvc87pt71j31660t6qfn.jpg" alt="è¶³å¤Ÿå¿«æ—¶ä¸éœ€è¦loading"></li></ul></li><li>å®æ—¶åé¦ˆ<ul><li>åˆ‡æ¢tabviewæ—¶ä¸‹è¾¹æ¡†çº¿å®æ—¶å“åº”æ‰‹åŠ¿è¿‡ç¨‹</li></ul></li><li><p>æ“ä½œæµç•…</p><ul><li>åŠ¨ç”»<ul><li>åªä½¿ç”¨<strong>transform 3D/opacity</strong></li><li>é€‚æ—¶ä½¿ç”¨<strong>will-change</strong>  <code>will-change:transform; /*åˆ›å»ºæ–°çš„æ¸²æŸ“å±‚*/</code> <ul><li><a href="http://blog.csdn.net/caicaijingyuan/article/details/44244991" target="_blank" rel="noopener">-webkit-transform:translate3d(0,0,0)è§¦å‘GPUåŠ é€Ÿï¼Œè®©ç½‘é¡µåŠ¨ç”»æ›´æµç•…</a></li><li><a href="http://www.zhangxinxu.com/wordpress/2015/11/css3-will-change-improve-paint/" target="_blank" rel="noopener">ä½¿ç”¨CSS3 will-changeæé«˜é¡µé¢æ»šåŠ¨ã€åŠ¨ç”»ç­‰æ¸²æŸ“æ€§èƒ½</a><br><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fms39ippvyj31ia0cmtdi.jpg" alt="translate3d &amp; will-change"></li></ul></li></ul></li><li><p>æ»šåŠ¨</p><ul><li><p>å¿…é¡»ä½¿ç”¨<strong>passive event listeners</strong></p><blockquote><p>ç”±äºæµè§ˆå™¨æ— æ³•é¢„å…ˆçŸ¥é“ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä¼šä¸ä¼šè°ƒç”¨ preventDefault()ï¼Œå®ƒéœ€è¦ç­‰åˆ°äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œå®Œåï¼Œæ‰èƒ½å»æ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼Œè‹¥ç›‘å¬å®Œåå†æ‰§è¡Œé»˜è®¤è¡Œä¸ºä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</p></blockquote><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fmundaoz61j3132072q65.jpg" alt="passive event listeners"></p><ul><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ é€’ passive ä¸º true æ¥æ˜ç¡®å‘Šè¯‰æµè§ˆå™¨ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºä¸ä¼šè°ƒç”¨ preventDefault æ¥é˜»æ­¢é»˜è®¤æ»‘åŠ¨è¡Œä¸ºã€‚</li><li><a href="https://segmentfault.com/a/1190000007913386?_ea=1507605" target="_blank" rel="noopener">ç§»åŠ¨Webæ»šåŠ¨æ€§èƒ½ä¼˜åŒ–: Passive event listeners</a></li><li>Chrome 51 å’Œ Firefox 49 å·²ç»æ”¯æŒ passive å±æ€§<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> supportsPassive = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> opts = <span class="built_in">Object</span>.defineProperty(&#123;&#125;, <span class="string">'passive'</span>, &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      supportsPassive = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">"test"</span>, <span class="literal">null</span>, opts);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line"></span><br><span class="line">elem.addEventListener(</span><br><span class="line">  <span class="string">'touchstart'</span>,</span><br><span class="line">  fn,</span><br><span class="line">  supportsPassive ? &#123; <span class="attr">passive</span>: <span class="literal">true</span> &#125; : <span class="literal">false</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>æ‰‹åŠ¿</p><ul><li>é…åˆä½¿ç”¨touchmove &amp; scroll äº‹ä»¶<blockquote><p>iosç¬¬ä¸€æ¬¡è§¦å‘scrollå­˜åœ¨å»¶æ—¶ï¼Œåº”é…åˆä½¿ç”¨touchmove</p></blockquote></li></ul></li></ul></li></ul><h4 id="å¯é æ€§"><a href="#å¯é æ€§" class="headerlink" title="å¯é æ€§"></a>å¯é æ€§</h4><ul><li><p>é¢„åŠ è½½</p><ul><li><p>service workerå®ç°ç¦»çº¿é¡µé¢è®¿é—®<br><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1fmuo9a47zpj312w0lsdjk.jpg" alt="service worker push"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œ service worker</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    navigator.serviceWorker.register(<span class="string">'./service-worker.js'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">registration</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ³¨å†ŒæˆåŠŸ</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ServiceWorker registration successful with scope: '</span>, registration.scope);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ³¨å†Œå¤±è´¥</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ServiceWorker registration failed: '</span>, err);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cacheVersion = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> currentCache = &#123;</span><br><span class="line">  offline: <span class="string">'offline-cache'</span> + cacheVersion</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> offlineUrl = <span class="string">'offline.html'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¦–æ¬¡ç¼“å­˜</span></span><br><span class="line"><span class="keyword">this</span>.addEventListener(<span class="string">'install'</span>, event =&gt; &#123;</span><br><span class="line">  event.waitUntil(</span><br><span class="line">    caches.open(currentCache.offline).then(<span class="function"><span class="keyword">function</span>(<span class="params">cache</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> cache.addAll([</span><br><span class="line">          <span class="string">'./offline.svg'</span>,</span><br><span class="line">          offlineUrl</span><br><span class="line">      ]);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹¦æˆªè¯·æ±‚</span></span><br><span class="line"><span class="keyword">this</span>.addEventListener(<span class="string">'fetch'</span>, event =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (event.request.mode === <span class="string">'navigate'</span> || (event.request.method === <span class="string">'GET'</span> &amp;&amp; event.request.headers.get(<span class="string">'accept'</span>).includes(<span class="string">'text/html'</span>))) &#123;</span><br><span class="line">        event.respondWith(</span><br><span class="line">          fetch(event.request.url).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// Return the offline page</span></span><br><span class="line">              <span class="keyword">return</span> caches.match(offlineUrl);</span><br><span class="line">        &#125;)</span><br><span class="line">     );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">        event.respondWith(caches.match(event.request)</span><br><span class="line">                        .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> response || fetch(event.request);</span><br><span class="line">                    &#125;)</span><br><span class="line">            );</span><br><span class="line">      &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul></li></ul><pre><code>![service workderå…¼å®¹æ€§](https://ws2.sinaimg.cn/large/006tKfTcly1fmvb3ae3whj31ae0g277h.jpg)</code></pre><h4 id="è®¾è®¡è¯­è¨€APPåŒ–"><a href="#è®¾è®¡è¯­è¨€APPåŒ–" class="headerlink" title="è®¾è®¡è¯­è¨€APPåŒ–"></a>è®¾è®¡è¯­è¨€APPåŒ–</h4><ul><li>æ— é—ªçƒtabbar<br><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1fmunohp8a1j316w0lg1kx.jpg" alt="è®¾è®¡è¯­è¨€APPåŒ–"></li></ul><blockquote><p>PS:åŒè¡Œè€…</p><ul><li>ä¸šåŠ¡çº¿åºå¤§</li><li>æŠ€æœ¯çº¬åº¦ä¸åŒ</li></ul></blockquote><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼</p><p>å…¬ä¼—å·ä¸å‘æ–‡çš„æ—¶å€™æ¨é€ä¸€äº›æˆ‘è§‰å¾—å¥½ç”¨çš„å‰ç«¯ç½‘ç«™æˆ–è€…çœ‹åˆ°çš„ä¸€äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ›´ä¾¿äºå¤§å®¶äº¤æµï¼Œå°±é…±ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;å¤©çŒ«è¶…å¸‚Mobile Webçš„æè‡´ä½“éªŒä¼˜åŒ–&lt;ul&gt;
&lt;li&gt;å›å½’webè§£å†³é—®é¢˜&lt;/li&gt;
&lt;li&gt;webç›®å‰çš„ä¸è¶³&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹å‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="å‰ç«¯è®ºå›" scheme="https://wangchloe.vip/tags/%E5%89%8D%E7%AB%AF%E8%AE%BA%E5%9D%9B/"/>
    
  </entry>
  
  <entry>
    <title>cssè§„èŒƒå¯¹æ¯”</title>
    <link href="https://wangchloe.vip/2017/10/10/blog57/"/>
    <id>https://wangchloe.vip/2017/10/10/blog57/</id>
    <published>2017-10-10T09:05:46.000Z</published>
    <updated>2017-10-10T09:05:46.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><!-- MarkdownTOC --><ul><li>è¿å­—ç¬¦åˆ†éš”</li><li>OOCSS</li><li>NEC<ul><li>åŒºåˆ†</li><li>ç¤ºä¾‹</li></ul></li><li>BEM<ul><li>åŒºåˆ†</li><li>è¿æ¥</li><li>ç¤ºä¾‹</li><li>ç—›ç‚¹</li></ul></li></ul><!-- /MarkdownTOC --><a id="more"></a><h2 id="è¿å­—ç¬¦åˆ†éš”"><a href="#è¿å­—ç¬¦åˆ†éš”" class="headerlink" title="è¿å­—ç¬¦åˆ†éš”"></a>è¿å­—ç¬¦åˆ†éš”</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-header"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"card-header-ul"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"card-header-li"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-header-p"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="OOCSS"><a href="#OOCSS" class="headerlink" title="OOCSS"></a>OOCSS</h2><p><a href="http://oocss.org/" target="_blank" rel="noopener">Object Oriented CSS  é¢å‘å¯¹è±¡çš„CSS</a></p><blockquote><p>ç»“æ„å’Œæ ·å¼åˆ†ç¦»</p></blockquote><p>éœ€æ±‚ï¼šæœ‰ä¸€ä¸ªå®¹å™¨æ˜¯é¡µé¢pageçš„1/4å®½ï¼Œæœ‰ä¸€ä¸ªè“è‰²çš„èƒŒæ™¯ï¼Œ1pxç°è‰²çš„è¾¹æ¡†ï¼Œ10pxçš„å·¦å³è¾¹è·ï¼Œ5pxçš„ä¸Šè¾¹è·ï¼Œ10pxçš„ä¸‹è¾¹è·</p><ul><li>éOOCSSå†™æ³•</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"size1of4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.size1of4</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: blue;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>OOCSSå†™æ³•<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"size1of4 bgBlue solidGray mts mlm mrm mbm"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.size1of4</span> &#123;<span class="attribute">width</span>: <span class="number">25%</span>;&#125;</span><br><span class="line"><span class="selector-class">.bgBlue</span> &#123;<span class="attribute">background</span>:blue&#125;</span><br><span class="line"><span class="selector-class">.solidGray</span> &#123;<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>&#125;</span><br><span class="line"><span class="selector-class">.mts</span> &#123;<span class="attribute">margin-top</span>: <span class="number">5px</span>&#125;</span><br><span class="line"><span class="selector-class">.mrm</span> &#123;<span class="attribute">margin-right</span>: <span class="number">10px</span>&#125;</span><br><span class="line"><span class="selector-class">.mbm</span> &#123;<span class="attribute">margin-bottom</span>: <span class="number">10px</span>&#125;</span><br><span class="line"><span class="selector-class">.mlm</span> &#123;<span class="attribute">margin-left</span>: <span class="number">10px</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="NEC"><a href="#NEC" class="headerlink" title="NEC"></a>NEC</h2><p><a href="http://nec.netease.com/standard/css-sort.html" target="_blank" rel="noopener">nice easy csså®˜ç½‘</a></p><h4 id="åŒºåˆ†"><a href="#åŒºåˆ†" class="headerlink" title="åŒºåˆ†"></a>åŒºåˆ†</h4><ul><li><p>å¸ƒå±€ï¼ˆgridï¼‰<code>.g-</code>ï¼š eg:å¤´éƒ¨ï¼Œå°¾éƒ¨ï¼Œä¸»ä½“ï¼Œä¾§æ ç­‰</p></li><li><p>æ¨¡å—ï¼ˆmoduleï¼‰<code>.m-</code>ï¼š è¾ƒå¤§æ•´ä½“ï¼Œeg:å¯¼èˆªã€ç™»å½•æ³¨å†Œã€æœç´¢ç­‰</p></li><li><p>å…ƒä»¶ï¼ˆunitï¼‰<code>.u-</code>ï¼š ä¸å¯å†åˆ†ä¸ªä½“ï¼Œeg:æŒ‰é’®ã€inputæ¡†ç­‰</p></li><li><p>åŠŸèƒ½ï¼ˆfunctionï¼‰<code>.f-</code>ï¼š ä½¿ç”¨é¢‘ç‡è¾ƒé«˜æ ·å¼ï¼Œeg:æ¸…é™¤æµ®åŠ¨</p></li><li><p>çš®è‚¤ï¼ˆskinï¼‰<code>.s-</code>ï¼š eg:æ–‡å­—è‰²ï¼ŒèƒŒæ™¯è‰²ï¼Œè¾¹æ¡†è‰²ç­‰</p></li><li><p>çŠ¶æ€<code>.z-</code>ï¼š eg:hoverï¼Œé€‰ä¸­ç­‰</p></li><li><p>ç‰¹æ®Š<code>.j-</code>ï¼š è¢«ä¸“ç”¨äºJSè·å–èŠ‚ç‚¹ï¼Œè¯·å‹¿ä½¿ç”¨.j-å®šä¹‰æ ·å¼ã€‚</p></li></ul><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p><a href="http://yuedu.163.com/" target="_blank" rel="noopener">ç½‘æ˜“äº‘é˜…è¯»</a></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å¸ƒå±€ */</span></span><br><span class="line"><span class="selector-class">.g-sd</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ¨¡å— */</span></span><br><span class="line"><span class="selector-class">.m-logo</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.m-logo</span> <span class="selector-class">.u-sel</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.m-logo</span><span class="selector-class">.z-dis</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å…ƒä»¶ */</span></span><br><span class="line"><span class="selector-class">.u-btn</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç»Ÿä¸€æ¸…é™¤æµ®åŠ¨ */</span></span><br><span class="line"><span class="selector-class">.f-clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">'.'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åŠŸèƒ½ */</span></span><br><span class="line"><span class="selector-class">.f-tac</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* çš®è‚¤ */</span></span><br><span class="line"><span class="selector-class">.s-fc</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="BEM"><a href="#BEM" class="headerlink" title="BEM"></a>BEM</h2><p><a href="http://getbem.com/naming/" target="_blank" rel="noopener">BEMå®˜ç½‘</a></p><h4 id="åŒºåˆ†-1"><a href="#åŒºåˆ†-1" class="headerlink" title="åŒºåˆ†"></a>åŒºåˆ†</h4><ul><li><code>B</code> å—ï¼ˆblockï¼‰</li><li><code>E</code> å…ƒç´ ï¼ˆelementï¼‰</li><li><code>M</code> ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰</li></ul><p><img src="http://www.w3cplus.com/sites/default/files/styles/print_image/public/blogs/2013/Definitions-BEM-6.jpg" alt=""></p><h4 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h4><ul><li><p><code>__</code>åŒä¸‹åˆ’çº¿ï¼š é—´éš” å—å’Œå…ƒç´ </p><ul><li><code>.block__elem</code></li></ul></li><li><p><code>-</code>ä¸­åˆ’çº¿ï¼š é—´éš”å—ã€å…ƒç´ ã€ä¿®é¥°ç¬¦ä¸­å¤šä¸ªå•è¯</p><ul><li><code>.block-name__elem-name</code></li><li><code>.block-name--modifier-modifier1</code></li></ul></li><li><p><code>--</code>åŒä¸­åˆ’çº¿ï¼š é—´éš” å—å’Œä¿®é¥°ç¬¦ æˆ– å…ƒç´ å’Œä¿®é¥°ç¬¦</p><ul><li><code>.block__elem--modifier</code></li></ul></li></ul><h4 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><ul><li>BåµŒå¥—E</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card__header"</span>&gt;</span></span><br><span class="line">    123</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>Bå¤šå±‚åµŒå¥—E</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card__header"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"card__header__ul"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"card__header__li"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card__header__p"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">&amp;__header &#123;</span><br><span class="line">&amp;__ul &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">&amp;__li &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">&amp;__p &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Mä¿®é¥°B/E</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card card--red"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card__header card__header--blue"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span></span><br><span class="line">Normal button</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"button button--state-success"</span>&gt;</span></span><br><span class="line">Success button</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"button button--state-danger"</span>&gt;</span></span><br><span class="line">Danger button</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç—›ç‚¹"><a href="#ç—›ç‚¹" class="headerlink" title="ç—›ç‚¹"></a>ç—›ç‚¹</h4><ul><li>å‘½åè¾ƒé•¿</li><li>ä¼šå­˜åœ¨ä¿®é¥°ç¬¦ä¸‹çš„å…ƒç´ ç»“æ„ä¸æ¸…æ™°</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">.&amp;__header &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">&amp;__<span class="selector-tag">red</span> &#123;</span><br><span class="line">.card_header &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;è¿å­—ç¬¦åˆ†éš”&lt;/li&gt;
&lt;li&gt;OOCSS&lt;/li&gt;
&lt;li&gt;NEC&lt;ul&gt;
&lt;li&gt;åŒºåˆ†&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;BEM&lt;ul&gt;
&lt;li&gt;åŒºåˆ†&lt;/li&gt;
&lt;li&gt;è¿æ¥&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹&lt;/li&gt;
&lt;li&gt;ç—›ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="css" scheme="https://wangchloe.vip/tags/css/"/>
    
      <category term="è§„èŒƒ" scheme="https://wangchloe.vip/tags/%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>ä¸¤ç§åŸç”Ÿç»„ä»¶ä¹¦å†™æ–¹å¼</title>
    <link href="https://wangchloe.vip/2017/09/24/blog54/"/>
    <id>https://wangchloe.vip/2017/09/24/blog54/</id>
    <published>2017-09-24T07:23:37.000Z</published>
    <updated>2017-09-24T07:23:37.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><!-- MarkdownTOC --><ul><li>ç¬¬ä¸€ç§ï¼šå¼•ç”¨æ‰§è¡Œ</li><li>ç¬¬äºŒç§ï¼šå°†å‘½åç©ºé—´ä¼ é€’è¿›</li></ul><!-- /MarkdownTOC --><a id="more"></a><blockquote><p>è·¨é¡µé¢ï¼Œå¯¹å…ƒç´ ä¾èµ–ä¸ç¡®å®šï¼Œä½¿ç”¨å‘½åç©ºé—´é˜»æ–­æ³•ä¼ é€’å…ƒç´ </p></blockquote><h3 id="ç¬¬ä¸€ç§ï¼šå¼•ç”¨æ‰§è¡Œ"><a href="#ç¬¬ä¸€ç§ï¼šå¼•ç”¨æ‰§è¡Œ" class="headerlink" title="ç¬¬ä¸€ç§ï¼šå¼•ç”¨æ‰§è¡Œ"></a>ç¬¬ä¸€ç§ï¼šå¼•ç”¨æ‰§è¡Œ</h3><p>//webapp/js/common/topoverlay.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">w</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> FLNS = &#123;</span><br><span class="line">        <span class="string">"register"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> a = <span class="built_in">arguments</span>,</span><br><span class="line">                o = <span class="literal">null</span>,</span><br><span class="line">                i, j, d, rt;</span><br><span class="line">            <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; a.length; ++i) &#123;</span><br><span class="line">                d = a[i].split(<span class="string">"."</span>);</span><br><span class="line">                rt = d[<span class="number">0</span>];</span><br><span class="line">                <span class="built_in">eval</span>(<span class="string">'if (typeof '</span> + rt + <span class="string">' == "undefined")&#123;'</span> + rt + <span class="string">' = &#123;add: function (k, v) &#123; if (!this[k]) &#123; this[k] = v;&#125; return this;&#125; &#125;;&#125; o = '</span> + rt + <span class="string">';'</span>);</span><br><span class="line">                <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; d.length; ++j) &#123;</span><br><span class="line">                    o[d[j]] = o[d[j]] || &#123;&#125;;</span><br><span class="line">                    o = o[d[j]];</span><br><span class="line">                    o.add = <span class="function"><span class="keyword">function</span>(<span class="params">k, v</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span> (!<span class="keyword">this</span>[k]) &#123; <span class="keyword">this</span>[k] = v; &#125;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> o;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    w.FLNS = FLNS;</span><br><span class="line"></span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br><span class="line"></span><br><span class="line">FLNS.register(<span class="string">"NS"</span>).add(<span class="string">"open"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> settings = $.extend(<span class="literal">true</span>, &#123;&#125;, &#123;</span><br><span class="line">        image: &#123;</span><br><span class="line">            ios: <span class="string">"xxx.png"</span>,</span><br><span class="line">            android: <span class="string">"yyy.png"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, options);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> elSelector = <span class="string">"#J_weixin_browser"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">document</span>.querySelector(elSelector)) &#123;</span><br><span class="line">            buildOverlay();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            showOverlay();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showOverlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(elSelector).style.display = <span class="string">"block"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">hideOverlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(elSelector).style.display = <span class="string">"none"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">buildOverlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// code here</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setup();</span><br><span class="line">&#125;);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// å¾®ä¿¡å¼•å¯¼æµ®å±‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clickBrowser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $btnBrowser.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        NS.open(&#123;</span><br><span class="line">            image: &#123;</span><br><span class="line">                ios: <span class="string">"zzz.png"</span>,</span><br><span class="line">                android: <span class="string">"www.png"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒç§ï¼šå°†å‘½åç©ºé—´ä¼ é€’è¿›"><a href="#ç¬¬äºŒç§ï¼šå°†å‘½åç©ºé—´ä¼ é€’è¿›" class="headerlink" title="ç¬¬äºŒç§ï¼šå°†å‘½åç©ºé—´ä¼ é€’è¿›"></a>ç¬¬äºŒç§ï¼šå°†å‘½åç©ºé—´ä¼ é€’è¿›</h3><p>//super/src/h5/js/wechat/topoverlay.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">MODULE</span>) </span>&#123;</span><br><span class="line">    MODULE.add(<span class="string">"TopOverlay"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> settings = $.extend(<span class="literal">true</span>, &#123;&#125;, &#123;</span><br><span class="line">            autoShow: <span class="literal">false</span>,</span><br><span class="line">            showDownload: <span class="literal">true</span>,</span><br><span class="line">            image: &#123;</span><br><span class="line">                ios: <span class="string">"xxx.png"</span>,</span><br><span class="line">                android: <span class="string">"yyy.png"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, options);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> $<span class="built_in">window</span> = $(<span class="built_in">window</span>);</span><br><span class="line">        <span class="keyword">var</span> $<span class="built_in">document</span> = $(<span class="built_in">document</span>);</span><br><span class="line">        <span class="keyword">var</span> isFromWeixin = wagv &amp;&amp; wagv.isFromWeixin;</span><br><span class="line">        <span class="keyword">var</span> isIos = !!navigator.userAgent.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> OLSB = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">var</span> topoverlaySelector = <span class="string">"#J_wechat_topoverlay"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">buildOverlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> imgSrc = isIos ? settings.image.ios : settings.image.android;</span><br><span class="line">             <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">bindAutoShow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (settings.autoShow) &#123;</span><br><span class="line">                showOverlay();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">bindLiveEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $<span class="built_in">document</span>.on(<span class="string">"click"</span>, <span class="string">"&#123;0&#125; .J_close"</span>.format(topoverlaySelector), <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                hideOverlay();</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            $<span class="built_in">document</span>.on(<span class="string">"click"</span>, <span class="string">"a"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> $current = $(<span class="keyword">this</span>);</span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    1. a </span></span><br><span class="line"><span class="comment">                    2. a data-superlink="" href="javascript:void(0);" æœ‰ä¸ªåŠ¨æ€è·³è½¬</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                    é‰´äºç¬¬2ç‚¹ï¼Œæœ‰ä¼˜å…ˆçº§å…³ç³»ï¼Œå°†data-superlinkå—…æ¢æå‰</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                <span class="keyword">var</span> href = $current.attr(<span class="string">"data-superlink"</span>) || $current.attr(<span class="string">"data-href"</span>) || $current.attr(<span class="string">"href"</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!href) &#123; <span class="keyword">return</span>; &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (href.indexOf(<span class="string">"goshop"</span>) &gt; <span class="number">-1</span> || href.indexOf(<span class="string">"taobao.com"</span>) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">                    ev.preventDefault();</span><br><span class="line">                    ev.stopImmediatePropagation();</span><br><span class="line">                    showOverlay();</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">scrollHander</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $<span class="built_in">window</span>.on(<span class="string">"scroll.TOPOVERLAY"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> ($<span class="built_in">window</span>.scrollTop() &gt; <span class="number">10</span>) &#123;</span><br><span class="line">                    hideOverlay();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">showOverlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(topoverlaySelector).length ? $(topoverlaySelector).show() : $(<span class="string">"body"</span>).append(OLSB.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">hideOverlay</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(topoverlaySelector).hide();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">setup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            buildOverlay();</span><br><span class="line">            bindAutoShow();</span><br><span class="line">            scrollHander();</span><br><span class="line">            bindLiveEvent();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        isFromWeixin ? setup() : <span class="string">""</span>;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;(FLNS.register(<span class="string">'NS'</span>)));</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    Super.H5.Wechat.TopOverlay();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ç§ï¼šå¼•ç”¨æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒç§ï¼šå°†å‘½åç©ºé—´ä¼ é€’è¿›&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>æµè§ˆå™¨æ¨¡æ‹Ÿappç¯å¢ƒã€å¾®ä¿¡ç¯å¢ƒ</title>
    <link href="https://wangchloe.vip/2017/09/10/blog56/"/>
    <id>https://wangchloe.vip/2017/09/10/blog56/</id>
    <published>2017-09-10T07:38:57.000Z</published>
    <updated>2017-09-10T07:38:57.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><a id="more"></a><h3 id="Chromeå†…"><a href="#Chromeå†…" class="headerlink" title="Chromeå†…"></a>Chromeå†…</h3><ul><li>æ¨¡æ‹Ÿappç¯å¢ƒ</li></ul><p>F12-&gt;</p><p>Settings-&gt; Devices-&gt; Add custom device-&gt; å¡«å†™å°ºå¯¸ã€user agentå¡«å†™<code>fanli</code>-&gt; Add</p><p>å…³é—­æˆ–è€…åˆ‡æ¢æ¨¡æ‹Ÿå™¨å³å¯</p><hr><ul><li>æ¨¡æ‹Ÿå¾®ä¿¡ç¯å¢ƒ</li></ul><p>F12-&gt;</p><p>Settings-&gt; Devices-&gt; Add custom device-&gt; å¡«å†™å°ºå¯¸ã€user agentå¡«å†™<code>micromessenger</code>-&gt; Add</p><p>å…³é—­æˆ–è€…åˆ‡æ¢æ¨¡æ‹Ÿå™¨å³å¯</p><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="å‰ç«¯å‘¨è¾¹" scheme="https://wangchloe.vip/tags/%E5%89%8D%E7%AB%AF%E5%91%A8%E8%BE%B9/"/>
    
  </entry>
  
  <entry>
    <title>æ·˜å£ä»¤åˆ†äº«</title>
    <link href="https://wangchloe.vip/2017/08/05/blog53/"/>
    <id>https://wangchloe.vip/2017/08/05/blog53/</id>
    <published>2017-08-05T07:11:14.000Z</published>
    <updated>2019-07-24T07:11:14.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚</p><hr><!-- MarkdownTOC --><ul><li>å‰ç½®éœ€æ±‚</li><li>å¤åˆ¶é—®é¢˜<ul><li>æ’ä»¶ï¼šClipboard.js</li><li>v1.0</li><li>v2.0</li><li>v3.0</li><li>v4.0</li></ul></li><li>åé¦ˆ<ul><li>é›†æˆsmartcopy.js</li></ul></li></ul><!-- /MarkdownTOC --><a id="more"></a><h2 id="å‰ç½®éœ€æ±‚"><a href="#å‰ç½®éœ€æ±‚" class="headerlink" title="å‰ç½®éœ€æ±‚"></a>å‰ç½®éœ€æ±‚</h2><ul><li><p>å¾®ä¿¡æœç´¢è¯¦æƒ…é¡µ æ·˜å£ä»¤å¼¹çª— (ios10ä¸ios10- &amp; androidé€»è¾‘ä¸åŒ)<br>â€œ//common/plugins/clipboard/clipboard.min.jsâ€,</p></li><li><p>ios10- &amp; android  åªèƒ½é•¿æŒ‰å¤åˆ¶</p></li><li><p>ios10 å¯ä»¥æŒ‰é’®ä¸€é”®å¤åˆ¶</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- dialog start --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_code_dialog"</span> <span class="attr">class</span>=<span class="string">"pop-wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pop-box"</span> <span class="attr">id</span>=<span class="string">"J_ready"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"J_dig_close"</span> <span class="attr">class</span>=<span class="string">"close ui-dialog-close"</span> <span class="attr">href</span>=<span class="string">"javascript:void(0);"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"top"</span> <span class="attr">src</span>=<span class="string">"//static2.51fanli.net/super/src/h5/images/waitui/detail/dialog-title.png"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"J_com"</span> <span class="attr">class</span>=<span class="string">"com"</span>&gt;</span>è¯·ä¸€é”®å¤åˆ¶ä¸‹æ–¹ç‰¹æ®Šç¬¦å·ï¼Œæ‰“å¼€æ·˜å®APP<span class="tag">&lt;<span class="name">br</span>/&gt;</span>å³å¯è´­ä¹°æœ¬å•†å“<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"code-wrap"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"J_item_ios"</span> <span class="attr">class</span>=<span class="string">"com-code"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> &gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"J_item_code"</span> <span class="attr">class</span>=<span class="string">"com-code"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"J_copy_btn"</span> <span class="attr">class</span>=<span class="string">"copy-btn"</span>&gt;</span>ä¸€é”®å¤åˆ¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"go-ali"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"J_go_ali"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>åï¼Œæ‰“å¼€ï¼»æ‰‹æœºæ·˜å®ï¼½é¢†å–xxxå…ƒä¼˜æƒ åˆ¸ï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- dialog end --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_taodialog"</span> <span class="attr">class</span>=<span class="string">"taodilog"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> isIos = <span class="regexp">/ip(hone|od|ad)/i</span>.test(ua);</span><br><span class="line"><span class="keyword">var</span> tryUa210 = ua.match(<span class="regexp">/iphone os (\d+)_/i</span>);</span><br><span class="line"><span class="comment">// æ·˜å£ä»¤</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">popClick</span>(<span class="params">$wrap</span>) </span>&#123;</span><br><span class="line">    $wrap.on(<span class="string">"click"</span>, <span class="string">".J_item"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        dataWord = $(<span class="keyword">this</span>).data(<span class="string">"word"</span>);</span><br><span class="line">        pid = $(<span class="keyword">this</span>).data(<span class="string">"pid"</span>);</span><br><span class="line">        $(<span class="string">"#J_item_code"</span>).val(dataWord);</span><br><span class="line">        $(<span class="string">"#J_item_ios"</span>).text(dataWord);</span><br><span class="line">        $dialog.show();</span><br><span class="line">        $(<span class="string">"#J_taodialog"</span>).show();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (tryUa210 &amp;&amp; tryUa210[<span class="number">1</span>] == <span class="number">10</span>) &#123;</span><br><span class="line">            $(<span class="string">"#J_code_dialog"</span>).addClass(<span class="string">"ios10"</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#J_dig_close"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"#J_taodialog"</span>).hide();</span><br><span class="line">        $dialog.hide();</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#J_taodialog"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"#J_taodialog"</span>).hide();</span><br><span class="line">        $dialog.hide();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindClipboard</span>(<span class="params"></span>) </span>&#123; <span class="comment">//å¤åˆ¶æ·˜å£ä»¤</span></span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#J_item_code"</span>).on(<span class="string">"input"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).val(dataWord);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    selectionIos();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tryUa210 &amp;&amp; tryUa210[<span class="number">1</span>] == <span class="number">10</span>) &#123;</span><br><span class="line">        $(<span class="string">"#J_com"</span>).css(<span class="string">"visibility"</span>, <span class="string">"hidden"</span>);</span><br><span class="line">        $(<span class="string">"#J_go_ali"</span>).html(<span class="string">"å¤åˆ¶"</span>);</span><br><span class="line">        $(<span class="string">"#J_item_code"</span>).show().addClass(<span class="string">"none"</span>);</span><br><span class="line">        <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(<span class="string">"#J_copy_btn"</span>, &#123;</span><br><span class="line">            target: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">"#J_item_code"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            e.trigger.innerHTML = <span class="string">"å·²å¤åˆ¶"</span>;</span><br><span class="line">            $(<span class="string">"#J_ready"</span>).addClass(<span class="string">"ready"</span>);</span><br><span class="line">            e.clearSelection();</span><br><span class="line">            UBT.track(<span class="string">"super_tuiguang_mj.h5.pty-copy_kl~pid-&#123;0&#125;~std-29412"</span>.format(pid));</span><br><span class="line">        &#125;);</span><br><span class="line">        clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            Toast.open(<span class="string">"å¤åˆ¶å¤±è´¥ï¼Œè¯·é•¿æŒ‰åå¤åˆ¶ç‰¹æ®Šç¬¦å·ï¼"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">"#J_copy_btn"</span>).remove();</span><br><span class="line">        $(<span class="string">"#J_item_code"</span>).addClass(<span class="string">"radius-all"</span>);</span><br><span class="line">        $(<span class="string">"#J_item_ios"</span>).addClass(<span class="string">"radius-all"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectionIos</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!isIos) &#123;</span><br><span class="line">        $(<span class="string">"#J_com"</span>).html(<span class="string">"é•¿æŒ‰æ¡†å†…&gt;å¤åˆ¶"</span>);</span><br><span class="line">        $(<span class="string">"#J_go_ali"</span>).html(<span class="string">"å¤åˆ¶"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $(<span class="string">"#J_item_ios"</span>).show();</span><br><span class="line">    $(<span class="string">"#J_item_code"</span>).hide();</span><br><span class="line">    $(<span class="string">"#J_com"</span>).html(<span class="string">"é•¿æŒ‰æ¡†å†…&gt;æ‹·è´"</span>);</span><br><span class="line">    $(<span class="string">"#J_go_ali"</span>).html(<span class="string">"æ‹·è´"</span>);</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">"selectionchange"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">document</span>.getElementById(<span class="string">'J_item_ios'</span>).innerText != <span class="built_in">window</span>.getSelection()) &#123;</span><br><span class="line">            <span class="keyword">var</span> key = <span class="built_in">document</span>.getElementById(<span class="string">'J_item_ios'</span>);</span><br><span class="line">            <span class="built_in">window</span>.getSelection().selectAllChildren(key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¤åˆ¶é—®é¢˜"><a href="#å¤åˆ¶é—®é¢˜" class="headerlink" title="å¤åˆ¶é—®é¢˜"></a>å¤åˆ¶é—®é¢˜</h2><h3 id="æ’ä»¶ï¼šClipboard-js"><a href="#æ’ä»¶ï¼šClipboard-js" class="headerlink" title="æ’ä»¶ï¼šClipboard.js"></a>æ’ä»¶ï¼šClipboard.js</h3><ul><li><p><code>document.queryCommandSupported(copy/cut)</code></p><ul><li><p>æ”¯æŒ   -&gt; ä¸€é”®å¤åˆ¶</p></li><li><p>ä¸æ”¯æŒ -&gt; é•¿æŒ‰å¤åˆ¶</p><ul><li>ç›®å‰æµ‹è¯•çš„ä¸æ”¯æŒç‰ˆæœ¬ï¼šios10-</li></ul></li></ul></li></ul><h3 id="v1-0"><a href="#v1-0" class="headerlink" title="v1.0"></a>v1.0</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"code-wrap"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"J_copy_text"</span> <span class="attr">class</span>=<span class="string">"copy-text"</span>&gt;</span>ã€Šmxoy03LIzbIã€Š<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ä¸€é”®å¤åˆ¶é—®é¢˜ï¼š</li></ul><p>å®‰å“ä¸èƒ½è·å–<code>&lt;p&gt;&lt;/p&gt;</code>æ ‡ç­¾çš„å¤åˆ¶æ–‡æœ¬ï¼Œåªèƒ½è‡ªè¡Œé•¿æŒ‰å¤åˆ¶ã€‚</p><ul><li>è§£å†³æ–¹æ¡ˆï¼š</li></ul><p><code>&lt;p&gt;</code> -&gt; <code>&lt;textarea&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"code-wrap"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é•¿æŒ‰å¤åˆ¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"J_item_ios"</span> <span class="attr">class</span>=<span class="string">"copy-code code-ios"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span>ã€ŠGjSe0euD5uGã€Š<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸€é”®å¤åˆ¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"J_copy_code"</span> <span class="attr">class</span>=<span class="string">"copy-code"</span> <span class="attr">spellcheck</span>=<span class="string">"false"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span>ã€ŠGjSe0euD5uGã€Š<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v2-0"><a href="#v2-0" class="headerlink" title="v2.0"></a>v2.0</h3><ul><li>ä¸€é”®å¤åˆ¶é—®é¢˜ï¼š</li></ul><p><code>&lt;textarea&gt;&lt;/textarea&gt;</code>ç”¨æˆ·å¯è‡ªè¡Œä¿®æ”¹å¤åˆ¶æ–‡æœ¬ã€‚</p><ul><li>è§£å†³æ–¹æ¡ˆï¼š</li></ul><p>éœ€ç¦æ­¢ç”¨æˆ·ä¿®æ”¹è¾“å…¥æ¡†ï¼Œjså¼ºåˆ¶æ§åˆ¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">$copyCode.on(&quot;input&quot;, function() &#123;</span><br><span class="line">        $(this).val(text);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="v3-0"><a href="#v3-0" class="headerlink" title="v3.0"></a>v3.0</h3><ul><li>é•¿æŒ‰å¤åˆ¶é—®é¢˜ï¼š</li></ul><p>ç”¨æˆ·è‡ªè¡Œå¤åˆ¶ï¼Œè¾ƒé•¿æ–‡æœ¬å¯èƒ½æ¼äº†ä¸€æˆªæ²¡æœ‰å¤åˆ¶ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚</p><ul><li>è§£å†³æ–¹æ¡ˆï¼š</li></ul><p>ç›‘å¬selectionchangeäº‹ä»¶ï¼Œè‹¥é€‰ä¸­çš„ä¸éœ€å¤åˆ¶æ–‡æœ¬ä¸ç¬¦ï¼Œåˆ™å¼ºåˆ¶window.getSelection().selectAllChildren()å¤åˆ¶å…¨éƒ¨æ–‡æœ¬ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    function selectionIos() &#123;</span><br><span class="line">        if (!Device.Utility.Browser.versions.ios) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        document.addEventListener(&quot;selectionchange&quot;, function(e) &#123;</span><br><span class="line">            if (document.getElementById(&apos;J_item_ios&apos;).innerText != window.getSelection()) &#123;</span><br><span class="line">                var key = document.getElementById(&apos;J_item_ios&apos;);</span><br><span class="line">                window.getSelection().selectAllChildren(key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, false);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="v4-0"><a href="#v4-0" class="headerlink" title="v4.0"></a>v4.0</h3><p>é•¿æŒ‰å¤åˆ¶é—®é¢˜ï¼š</p><ul><li><p>iphone5sæµ‹è¯•æ—¶ï¼Œç”±äºremå¯¼è‡´çš„å°å±æ‰‹æœºå¤åˆ¶æ–‡æœ¬åå°ï¼Œå¯æ‘åŒºåŸŸæœ‰é™ï¼Œé•¿æŒ‰å¤åˆ¶ç»å¸¸ç‚¹ä¸åˆ°å¯å¤åˆ¶åŒºåŸŸã€‚</p></li><li><p>ç»uiåŒæ„è°ƒæ•´å­—å·ï¼Œä½¿ç”¨æˆ·ä½“éªŒæ›´ä½³ã€‚</p></li></ul><h1 id="åé¦ˆ"><a href="#åé¦ˆ" class="headerlink" title="åé¦ˆ"></a>åé¦ˆ</h1><ul><li>settings åŠ¨æ€html âœ“</li><li>selectorä¼˜åŒ– âœ“</li><li>å¤šä¸ªselectionchangeé”€æ¯ âœ“</li><li>ä¸€é”®å¤åˆ¶å®šåˆ¶æŒ‰é’®ç‚¹å‡»</li></ul><h3 id="é›†æˆsmartcopy-js"><a href="#é›†æˆsmartcopy-js" class="headerlink" title="é›†æˆsmartcopy.js"></a>é›†æˆsmartcopy.js</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"smartcopy-wrapper J_smartcopy_wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>å¤åˆ¶1(è‡ªå®šä¹‰æ¨¡ç‰ˆ)<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"J_copy_type"</span> <span class="attr">class</span>=<span class="string">"copy-type"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"J_press_copy press-copy"</span>&gt;</span>ï¿¥DADoafiFojoYï¿¥<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"J_click_copy"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"J_copy_code"</span> <span class="attr">spellcheck</span>=<span class="string">"false"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span>&gt;</span>ï¿¥DADoafiFojoYï¿¥<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"J_copy_btn fui-btn fui-btn-s fui-btn-green"</span>&gt;</span>å¤åˆ¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"smartcopy-wrapper J_smartcopy_wrapper2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>å¤åˆ¶2(é»˜è®¤æ¨¡ç‰ˆ)<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $.smartcopy(&#123;</span></span><br><span class="line"><span class="javascript">        onCopySuccess: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">// å¤åˆ¶æˆåŠŸ</span></span></span><br><span class="line"><span class="javascript">            alert(<span class="string">"å¤åˆ¶æˆåŠŸï¼"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;, </span></span><br><span class="line"><span class="javascript">        onCopyFail: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">// å¤åˆ¶å¤±è´¥</span></span></span><br><span class="line"><span class="javascript">            alert(<span class="string">"å¤åˆ¶å¤±è´¥ï¼"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;, </span></span><br><span class="line"><span class="javascript">        supportCallback: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//æ”¯æŒå¤åˆ¶åŠŸèƒ½å›è°ƒ</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#J_copy_type"</span>).text(<span class="string">"å¤åˆ¶æ–¹å¼ï¼šæ”¯æŒä¸€é”®å¤åˆ¶ï¼Œè¯·ç‚¹å‡»å¤åˆ¶æŒ‰é’®ï¼"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;, </span></span><br><span class="line"><span class="javascript">        notSupportCallback: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//å½“ä¸æ”¯æŒå¤åˆ¶åŠŸèƒ½æ—¶å›è°ƒ</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#J_copy_type"</span>).text(<span class="string">"å¤åˆ¶æ–¹å¼ï¼šä¸æ”¯æŒä¸€é”®å¤åˆ¶ï¼Œè¯·é•¿æŒ‰æ–‡æœ¬æ¡†å¤åˆ¶ï¼"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        defaultTpl: <span class="literal">false</span></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $.smartcopy(&#123;</span></span><br><span class="line"><span class="javascript">        copyText: <span class="string">"ï¿¥Sjxs0UccWFDï¿¥"</span>,  </span></span><br><span class="line"><span class="javascript">        copyWrapSelector: <span class="string">".J_smartcopy_wrapper2"</span>,</span></span><br><span class="line"><span class="javascript">        onCopySuccess: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">// å¤åˆ¶æˆåŠŸ</span></span></span><br><span class="line"><span class="javascript">            alert(<span class="string">"å¤åˆ¶æˆåŠŸï¼"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;, </span></span><br><span class="line"><span class="javascript">        onCopyFail: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">// å¤åˆ¶å¤±è´¥</span></span></span><br><span class="line"><span class="javascript">            alert(<span class="string">"å¤åˆ¶å¤±è´¥ï¼"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;, </span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///&lt;reference path="../vendors/jquery/jquery.js" /&gt;</span></span><br><span class="line"><span class="comment">///&lt;reference path="//webapp/js/base.js"" /&gt;</span></span><br><span class="line"><span class="comment">///&lt;reference path="../core/fmu.js" /&gt;</span></span><br><span class="line"><span class="comment">///&lt;reference path="../vendors/clipboard/clipboard.min.js" /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @file smartcopy</span></span><br><span class="line"><span class="comment"> * @import core/fmu.js, vendors/jquery/jquery-2.1.1.js,vendors/clipboard/clipboard.min.js</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">##å‚æ•°</span></span><br><span class="line"><span class="comment">   *copyWrapSelector: ".J_smartcopy_wrapper",  // å¤šä¸ªä¸€é”®å¤åˆ¶æ¡†æ—¶éœ€å®šä¹‰ä¸åŒçš„wrap</span></span><br><span class="line"><span class="comment">    copyCodeSelector: ".J_copy_code", // å¾…å¤åˆ¶æ–‡æœ¬     </span></span><br><span class="line"><span class="comment">    clickCopySelector: ".J_click_copy",  // ä¸€é”®å¤åˆ¶</span></span><br><span class="line"><span class="comment">    copyBtnSelector: ".J_copy_btn",  // ä¸€é”®å¤åˆ¶æŒ‰é’®</span></span><br><span class="line"><span class="comment">    pressCopySelector: ".J_press_copy",  // é•¿æŒ‰å¤åˆ¶</span></span><br><span class="line"><span class="comment">    onCopySuccess: $.noop, // å¤åˆ¶æˆåŠŸå›è°ƒ</span></span><br><span class="line"><span class="comment">    onCopyFail: $.noop, //å¤åˆ¶å¤±è´¥å›è°ƒ</span></span><br><span class="line"><span class="comment">    supportCallback: $.noop, //æ”¯æŒå¤åˆ¶åŠŸèƒ½å›è°ƒ</span></span><br><span class="line"><span class="comment">    notSupportCallback: $.noop, // ä¸æ”¯æŒå¤åˆ¶åŠŸèƒ½æ—¶å›è°ƒ</span></span><br><span class="line"><span class="comment">    defaultTpl: true, // ä½¿ç”¨é»˜è®¤æ¨¡ç‰ˆ</span></span><br><span class="line"><span class="comment">   *copyText: "",  // ä½¿ç”¨é»˜è®¤æ¨¡å—æ—¶éœ€ä¼ å…¥å¾…å¤åˆ¶æ–‡æœ¬å†…å®¹</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> (<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">    $.extend(&#123;</span><br><span class="line">        smartcopy: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> settings = $.extend(<span class="literal">true</span>, &#123;&#125;, &#123;</span><br><span class="line">                copyWrapSelector: <span class="string">".J_smartcopy_wrapper"</span>,</span><br><span class="line">                copyCodeSelector: <span class="string">".J_copy_code"</span>,</span><br><span class="line">                clickCopySelector: <span class="string">".J_click_copy"</span>,</span><br><span class="line">                copyBtnSelector: <span class="string">".J_copy_btn"</span>,</span><br><span class="line">                pressCopySelector: <span class="string">".J_press_copy"</span>,</span><br><span class="line">                onCopySuccess: $.noop,</span><br><span class="line">                onCopyFail: $.noop,</span><br><span class="line">                supportCallback: $.noop,</span><br><span class="line">                notSupportCallback: $.noop,</span><br><span class="line">                defaultTpl: <span class="literal">true</span>,</span><br><span class="line">                copyText: <span class="string">""</span>,</span><br><span class="line">            &#125;, options);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> $scTpl = $(<span class="string">'&lt;p class="J_press_copy press-copy"&gt;&#123;0&#125;&lt;/p&gt;\</span></span><br><span class="line"><span class="string">                &lt;div class="J_click_copy"&gt;\</span></span><br><span class="line"><span class="string">                &lt;textarea class="J_copy_code" spellcheck="false" type="text" readonly="readonly"&gt;&#123;0&#125;&lt;/textarea&gt;\</span></span><br><span class="line"><span class="string">                &lt;button class="J_copy_btn fui-btn fui-btn-s fui-btn-green"&gt;å¤åˆ¶&lt;/button&gt;\</span></span><br><span class="line"><span class="string">                &lt;/div&gt;'</span>.format(settings.copyText));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> $copyWrap = $(settings.copyWrapSelector);</span><br><span class="line">            <span class="keyword">var</span> pressCopySelector =  settings.copyWrapSelector + <span class="string">' '</span> + settings.pressCopySelector;</span><br><span class="line">            <span class="keyword">var</span> copyBtnSelector = settings.copyWrapSelector + <span class="string">' '</span> + settings.copyBtnSelector;</span><br><span class="line">            <span class="keyword">var</span> copyCodeSelector = settings.copyWrapSelector + <span class="string">' '</span> + settings.copyCodeSelector;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> $clickCopy, $pressCopy;</span><br><span class="line">            <span class="keyword">var</span> isSelected = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">setup</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                initClipboard();</span><br><span class="line">                bindClipboard();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">initClipboard</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                settings.defaultTpl &amp;&amp; $scTpl.appendTo($copyWrap);</span><br><span class="line"></span><br><span class="line">                $clickCopy = $(settings.clickCopySelector, settings.copyWrapSelector);</span><br><span class="line">                $pressCopy = $(settings.pressCopySelector, settings.copyWrapSelector);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">bindClipboard</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (Clipboard.isSupported()) &#123;  <span class="comment">// ä¸€é”®å¤åˆ¶</span></span><br><span class="line">                    $clickCopy.show();</span><br><span class="line">                    $pressCopy.hide();</span><br><span class="line"></span><br><span class="line">                    settings.supportCallback();</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(copyBtnSelector, &#123;</span><br><span class="line">                        target: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                            <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(copyCodeSelector);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">console</span>.log(clipboard);</span><br><span class="line"></span><br><span class="line">                    clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                        settings.onCopySuccess();</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                        settings.onCopyFail();</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;  <span class="comment">//é•¿æŒ‰å¤åˆ¶(ä¸æ”¯æŒå¤šä¸ª)</span></span><br><span class="line">                    settings.notSupportCallback();</span><br><span class="line">                    selectionIos();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">selectionIos</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!Device.Utility.Browser.versions.ios) &#123; </span><br><span class="line">                    settings.onCopyFail();</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                $clickCopy.hide();</span><br><span class="line">                $pressCopy.show();</span><br><span class="line"></span><br><span class="line">                <span class="built_in">document</span>.removeEventListener(<span class="string">"selectionchange"</span>, selectEvent, <span class="literal">false</span>);</span><br><span class="line">                <span class="built_in">document</span>.addEventListener(<span class="string">"selectionchange"</span>, selectEvent, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">selectEvent</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(isSelected) &#123;<span class="keyword">return</span>;&#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector(pressCopySelector).innerText != <span class="built_in">window</span>.getSelection()) &#123;</span><br><span class="line">                    <span class="keyword">var</span> key = <span class="built_in">document</span>.querySelector(pressCopySelector);</span><br><span class="line">                    <span class="built_in">window</span>.getSelection().selectAllChildren(key);</span><br><span class="line">                    isSelected = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            setup();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;(jQuery));</span><br></pre></td></tr></table></figure><hr><p>æ›´å¤šå†…å®¹å¯ä»¥è®¢é˜…æœ¬äººå¾®ä¿¡å…¬ä¼—å·ï¼Œä¸€èµ·å¼€å¯å‰ç«¯å°ç™½è¿›é˜¶çš„ä¸–ç•Œï¼<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šæ— åª›æ— æ•…"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»¥ä¸‹å†…å®¹è‹¥æœ‰é—®é¢˜çƒ¦è¯·å³æ—¶å‘ŠçŸ¥æˆ‘äºˆä»¥ä¿®æ”¹ï¼Œä»¥å…è¯¯å¯¼æ›´å¤šäººã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;å‰ç½®éœ€æ±‚&lt;/li&gt;
&lt;li&gt;å¤åˆ¶é—®é¢˜&lt;ul&gt;
&lt;li&gt;æ’ä»¶ï¼šClipboard.js&lt;/li&gt;
&lt;li&gt;v1.0&lt;/li&gt;
&lt;li&gt;v2.0&lt;/li&gt;
&lt;li&gt;v3.0&lt;/li&gt;
&lt;li&gt;v4.0&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åé¦ˆ&lt;ul&gt;
&lt;li&gt;é›†æˆsmartcopy.js&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="å‰ç«¯æœ­è®°" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="é¡¹ç›®æ€»ç»“" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
</feed>
