<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>无媛无故 - wangchloe的个人博客</title>
  
  <subtitle>(๑•ᴗ•๑)做一个有记性有温度不掉发的程序媛！</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://wangchloe.vip/"/>
  <updated>2019-07-26T09:39:07.968Z</updated>
  <id>https://wangchloe.vip/</id>
  
  <author>
    <name>Chloe Wang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>slot研究报告</title>
    <link href="https://wangchloe.vip/2019/07/26/blog77/"/>
    <id>https://wangchloe.vip/2019/07/26/blog77/</id>
    <published>2019-07-26T09:07:48.000Z</published>
    <updated>2019-07-26T09:39:07.968Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>es5源码</li><li>es6源码</li><li>用法</li><li>单个slot<ul><li>显示结果<ul><li>进一步证实</li></ul></li></ul></li><li>具名slot<ul><li>显示结果</li></ul></li><li>作用域slot<ul><li>显示结果</li></ul></li><li>Tips</li></ul><!-- /MarkdownTOC --><a id="more"></a><p><code>&lt;slot&gt;</code> 元素作为组件模板之中的内容分发插槽。<code>&lt;slot&gt;</code> 元素自身将被替换。</p><h3 id="es5源码"><a href="#es5源码" class="headerlink" title="es5源码"></a>es5源码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderSlot</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  name,</span></span></span><br><span class="line"><span class="function"><span class="params">  fallback,</span></span></span><br><span class="line"><span class="function"><span class="params">  props,</span></span></span><br><span class="line"><span class="function"><span class="params">  bindObject</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scopedSlotFn = <span class="keyword">this</span>.$scopedSlots[name];</span><br><span class="line">  <span class="keyword">if</span> (scopedSlotFn) &#123; <span class="comment">// scoped slot</span></span><br><span class="line">    props = props || &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span> (bindObject) &#123;</span><br><span class="line">      extend(props, bindObject);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> scopedSlotFn(props) || fallback</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> slotNodes = <span class="keyword">this</span>.$slots[name];</span><br><span class="line">    <span class="comment">// warn duplicate slot usage</span></span><br><span class="line">    <span class="keyword">if</span> (slotNodes &amp;&amp; <span class="string">"development"</span> !== <span class="string">'production'</span>) &#123;</span><br><span class="line">      slotNodes._rendered &amp;&amp; warn(</span><br><span class="line">        <span class="string">"Duplicate presence of slot \""</span> + name + <span class="string">"\" found in the same render tree "</span> +</span><br><span class="line">        <span class="string">"- this will likely cause render errors."</span>,</span><br><span class="line">        <span class="keyword">this</span></span><br><span class="line">      );</span><br><span class="line">      slotNodes._rendered = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> slotNodes || fallback</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolveSlots</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  children,</span></span></span><br><span class="line"><span class="function"><span class="params">  context</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> slots = &#123;&#125;;</span><br><span class="line">  <span class="keyword">if</span> (!children) &#123;</span><br><span class="line">    <span class="keyword">return</span> slots</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> defaultSlot = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = children.length; i &lt; l; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> child = children[i];</span><br><span class="line">    <span class="comment">// named slots should only be respected if the vnode was rendered in the</span></span><br><span class="line">    <span class="comment">// same context.</span></span><br><span class="line">    <span class="keyword">if</span> ((child.context === context || child.functionalContext === context) &amp;&amp;</span><br><span class="line">      child.data &amp;&amp; child.data.slot != <span class="literal">null</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">var</span> name = child.data.slot;</span><br><span class="line">      <span class="keyword">var</span> slot = (slots[name] || (slots[name] = []));</span><br><span class="line">      <span class="keyword">if</span> (child.tag === <span class="string">'template'</span>) &#123;</span><br><span class="line">        slot.push.apply(slot, child.children);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        slot.push(child);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      defaultSlot.push(child);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ignore whitespace</span></span><br><span class="line">  <span class="keyword">if</span> (!defaultSlot.every(isWhitespace)) &#123;</span><br><span class="line">    slots.default = defaultSlot;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> slots</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vm.$slots = resolveSlots(renderChildren, parentVnode.context);</span><br></pre></td></tr></table></figure><h2 id="es6源码"><a href="#es6源码" class="headerlink" title="es6源码"></a>es6源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">export function renderSlot (</span><br><span class="line">  name: string,</span><br><span class="line">  fallback: ?Array&lt;VNode&gt;,</span><br><span class="line">  props: ?Object,</span><br><span class="line">  bindObject: ?Object</span><br><span class="line">): ?Array&lt;VNode&gt; &#123;</span><br><span class="line">  const scopedSlotFn = this.$scopedSlots[name]</span><br><span class="line">  let nodes</span><br><span class="line">  if (scopedSlotFn) &#123; // scoped slot</span><br><span class="line">    props = props || &#123;&#125;</span><br><span class="line">    if (bindObject) &#123;</span><br><span class="line">      if (process.env.NODE_ENV !== &apos;production&apos; &amp;&amp; !isObject(bindObject)) &#123;</span><br><span class="line">        warn(</span><br><span class="line">          &apos;slot v-bind without argument expects an Object&apos;,</span><br><span class="line">          this</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">      props = extend(extend(&#123;&#125;, bindObject), props)</span><br><span class="line">    &#125;</span><br><span class="line">    nodes = scopedSlotFn(props) || fallback</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    const slotNodes = this.$slots[name]</span><br><span class="line">    // warn duplicate slot usage</span><br><span class="line">    if (slotNodes) &#123;</span><br><span class="line">      if (process.env.NODE_ENV !== &apos;production&apos; &amp;&amp; slotNodes._rendered) &#123;</span><br><span class="line">        warn(</span><br><span class="line">          `Duplicate presence of slot &quot;$&#123;name&#125;&quot; found in the same render tree ` +</span><br><span class="line">          `- this will likely cause render errors.`,</span><br><span class="line">          this</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">      slotNodes._rendered = true</span><br><span class="line">    &#125;</span><br><span class="line">    nodes = slotNodes || fallback</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const target = props &amp;&amp; props.slot</span><br><span class="line">  if (target) &#123;</span><br><span class="line">    return this.$createElement(&apos;template&apos;, &#123; slot: target &#125;, nodes)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return nodes</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function resolveSlots (</span><br><span class="line">  children: ?Array&lt;VNode&gt;,</span><br><span class="line">  context: ?Component</span><br><span class="line">): &#123; [key: string]: Array&lt;VNode&gt; &#125; &#123;</span><br><span class="line">  const slots = &#123;&#125;</span><br><span class="line">  if (!children) &#123;</span><br><span class="line">    return slots</span><br><span class="line">  &#125;</span><br><span class="line">  for (let i = 0, l = children.length; i &lt; l; i++) &#123;</span><br><span class="line">    const child = children[i]</span><br><span class="line">    const data = child.data</span><br><span class="line">    // remove slot attribute if the node is resolved as a Vue slot node</span><br><span class="line">    if (data &amp;&amp; data.attrs &amp;&amp; data.attrs.slot) &#123;</span><br><span class="line">      delete data.attrs.slot</span><br><span class="line">    &#125;</span><br><span class="line">    // named slots should only be respected if the vnode was rendered in the</span><br><span class="line">    // same context.</span><br><span class="line">    if ((child.context === context || child.fnContext === context) &amp;&amp;</span><br><span class="line">      data &amp;&amp; data.slot != null</span><br><span class="line">    ) &#123;</span><br><span class="line">      const name = data.slot</span><br><span class="line">      const slot = (slots[name] || (slots[name] = []))</span><br><span class="line">      if (child.tag === &apos;template&apos;) &#123;</span><br><span class="line">        slot.push.apply(slot, child.children || [])</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        slot.push(child)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      (slots.default || (slots.default = [])).push(child)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // ignore slots that contains only whitespace</span><br><span class="line">  for (const name in slots) &#123;</span><br><span class="line">    if (slots[name].every(isWhitespace)) &#123;</span><br><span class="line">      delete slots[name]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return slots</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isWhitespace (node: VNode): boolean &#123;</span><br><span class="line">  return (node.isComment &amp;&amp; !node.asyncFactory) || node.text === &apos; &apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function resolveScopedSlots (</span><br><span class="line">  fns: ScopedSlotsData, // see flow/vnode</span><br><span class="line">  res?: Object</span><br><span class="line">): &#123; [key: string]: Function &#125; &#123;</span><br><span class="line">  res = res || &#123;&#125;</span><br><span class="line">  for (let i = 0; i &lt; fns.length; i++) &#123;</span><br><span class="line">    if (Array.isArray(fns[i])) &#123;</span><br><span class="line">      resolveScopedSlots(fns[i], res)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      res[fns[i].key] = fns[i].fn</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><ul><li><p>当需要让组件组合使用，混合父组件的内容与子组件的模板时，就会用到slot ， 这个过程叫作内容分发（ transclusion ）。</p></li><li><p>slot 分发的内容，作用域是在父组件上的。</p></li><li><p>props 传递数据、events 触发事件和slot 内容分发就构成了Vue 组件的3 个API 来源，再复杂的组件也是由这3 部分构成的。</p></li></ul><h3 id="单个slot"><a href="#单个slot" class="headerlink" title="单个slot"></a>单个slot</h3><ul><li><p>在子组件内使用特殊的＜slot&gt;元素就可以为这个子组件开启一个slot（插槽）。</p></li><li><p>在父组件模板里，插入在子组件标签内的所有内容将<strong>替代</strong>子组件的<code>&lt;slot&gt;</code> 标签及它的内容。</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">first-child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件插入的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">first-child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>不使用slot</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'first-child'</span>, &#123;</span><br><span class="line">    template: <span class="string">'&lt;div&gt;'</span> + </span><br><span class="line">            <span class="string">'&lt;p&gt;子组件插入的内容&lt;/p&gt;'</span> + </span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app1 = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#J_app1"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>使用slot</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'first-child'</span>, &#123;</span><br><span class="line">    template: <span class="string">'&lt;div&gt;'</span> + </span><br><span class="line">            <span class="string">'&lt;p&gt;子组件非slot内容&lt;/p&gt;'</span> + </span><br><span class="line">            <span class="string">'&lt;slot&gt;&lt;p&gt;子组件插入的内容&lt;/p&gt;&lt;/slot&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app1 = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#J_app1"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="显示结果"><a href="#显示结果" class="headerlink" title="显示结果"></a>显示结果</h4><ul><li>不使用slot</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件非slot内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件插入的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>使用slot</li></ul><blockquote><p>父组件有插入内容，所以<strong>子组件中的slot并没有展示</strong>。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件非slot内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件插入的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="进一步证实"><a href="#进一步证实" class="headerlink" title="进一步证实"></a>进一步证实</h5><blockquote><p>若父组件的插入内容为空，则默认展示子组件的额插槽内容</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">first-child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"title"</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">first-child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'first-child'</span>, &#123;</span><br><span class="line">    template: <span class="string">'&lt;div&gt;'</span> + </span><br><span class="line">            <span class="string">'&lt;slot&gt;&lt;p&gt;子组件插入的内容&lt;/p&gt;&lt;/slot&gt;'</span> + </span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app1 = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#J_app1"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        title: <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>=&gt; 显示结果</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件非slot内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件插入的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="具名slot"><a href="#具名slot" class="headerlink" title="具名slot"></a>具名slot</h3><ul><li>给＜slot&gt; 元素指定一个name 后可以分发多个内容，具名Slot 可以与单个slot 共存。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">second-child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">slot</span>=<span class="string">"header"</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">slot</span>=<span class="string">"footer"</span>&gt;</span>Footer<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">second-child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'second-child'</span>, &#123;</span><br><span class="line">    template: <span class="string">'&lt;div class="container"&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div class="header"&gt;'</span> +</span><br><span class="line">                <span class="string">'&lt;slot name="header"&gt;&lt;/slot&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div class="content"&gt;'</span> +</span><br><span class="line">                <span class="string">'&lt;slot&gt;&lt;p&gt;子组件content&lt;/p&gt;&lt;/slot&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div class="footer"&gt;'</span> +</span><br><span class="line">                <span class="string">'&lt;slot name="footer"&gt;&lt;/slot&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app2 = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#J_app2"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="显示结果-1"><a href="#显示结果-1" class="headerlink" title="显示结果"></a>显示结果</h4><ul><li><p>如果子组件的slot指定了name，将展示对应的匹配内容。</p></li><li><p>如果子组件的slot没有name属性，将和单个slot一样展示逻辑，父组件没有slot属性的内容都将展示在子组件的slot中。</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>Footer<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="作用域slot"><a href="#作用域slot" class="headerlink" title="作用域slot"></a>作用域slot</h3><ul><li><p>作用域插槽是一种特殊的slot ，使用一个可以复用的模板替换己渲染元素。</p></li><li><p>父组件使用<code>&lt;template scope=&quot;props&quot;&gt;&lt;/template&gt;</code>元素，通过scope作用域传递变量props。</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">third-child</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">scope</span>=<span class="string">"props"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;props.msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;props.ding&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">third-child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'third-child'</span>, &#123;</span><br><span class="line">    template: <span class="string">'&lt;div class="container"&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;slot msg="子组件msg" ding="子组件ding"&gt;&lt;p&gt;子组件content&lt;/p&gt;&lt;/slot&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app3 = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#J_app3"</span>,</span><br><span class="line">    data: &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="显示结果-2"><a href="#显示结果-2" class="headerlink" title="显示结果"></a>显示结果</h4><ul><li>slot元素上的属性可以通过<code>template</code>元素的<code>scope</code>属性传递给指定含有临时变量的插槽。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_app3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父组件content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件msg<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>子组件ding<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul><li>slot不能通过<code>v-show</code>隐藏，只能通过<code>v-if</code>，因为slot是一个类似template的抽象元素，而并非一个实际元素，不能通过display控制是否显示。</li></ul><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;es5源码&lt;/li&gt;
&lt;li&gt;es6源码&lt;/li&gt;
&lt;li&gt;用法&lt;/li&gt;
&lt;li&gt;单个slot&lt;ul&gt;
&lt;li&gt;显示结果&lt;ul&gt;
&lt;li&gt;进一步证实&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;具名slot&lt;ul&gt;
&lt;li&gt;显示结果&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;作用域slot&lt;ul&gt;
&lt;li&gt;显示结果&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Tips&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="vue" scheme="https://wangchloe.vip/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>NativeApi思考</title>
    <link href="https://wangchloe.vip/2019/07/23/blog43/"/>
    <id>https://wangchloe.vip/2019/07/23/blog43/</id>
    <published>2019-07-22T19:27:35.000Z</published>
    <updated>2019-07-25T08:27:41.822Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>以调用Native上传图片组件为例</li><li>Hybrid通信原理<ul><li>JS Bridge</li></ul></li></ul><!-- /MarkdownTOC --><a id="more"></a><h3 id="以调用Native上传图片组件为例"><a href="#以调用Native上传图片组件为例" class="headerlink" title="以调用Native上传图片组件为例"></a>以调用Native上传图片组件为例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    NS.register(<span class="string">"NativeApi"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 目前Android webview不支持type=file事件，通过协议解决：</span></span><br><span class="line">    <span class="comment">// 定义全局函数用于回调 </span></span><br><span class="line">    <span class="built_in">window</span>[<span class="string">"nativeTakePhotoCallback"</span>] = <span class="function"><span class="keyword">function</span>(<span class="params">result, url, ud</span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//options参数若有相同项，则替换$.extend内的第三个&#123;&#125;类目</span></span><br><span class="line">    NS.NativeApi.add(<span class="string">"takePhoto"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> settings = $.extend(<span class="literal">true</span>, &#123;&#125;, &#123;</span><br><span class="line">            imgMaxWidth: <span class="number">640</span>,</span><br><span class="line">            uploadUrl: <span class="string">"&#123;0&#125;xiaozu/ajaxUploadImg"</span>.format(currentApiRoot),</span><br><span class="line">            userData: <span class="string">""</span>,</span><br><span class="line">            t: <span class="number">0</span>,</span><br><span class="line">            callback: <span class="string">"nativeTakePhotoCallback"</span></span><br><span class="line">        &#125;, options);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> protocol = <span class="string">"ns://&#123;0&#125;/dev/takephoto?cb=&#123;1&#125;&amp;w=&#123;2&#125;&amp;ud=&#123;3&#125;&amp;upload=&#123;4&#125;&amp;t=&#123;5&#125;"</span></span><br><span class="line">            .format(domain,</span><br><span class="line">                rebuildCallback(settings.callback),</span><br><span class="line">                settings.imgMaxWidth,</span><br><span class="line">                settings.userData,</span><br><span class="line">                <span class="comment">// 把字符串作为 URI 组件进行编码，其中的某些字符将被十六进制的转义序列进行替换。</span></span><br><span class="line">                <span class="comment">// eg: : -&gt; %3A   / -&gt; %2F</span></span><br><span class="line">                <span class="built_in">encodeURIComponent</span>(settings.uploadUrl),</span><br><span class="line">                settings.t);</span><br><span class="line">        connectApp(protocol);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// js Bridge建立Native与H5间通信</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">connectApp</span>(<span class="params">protocol</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">"iframe"</span>);</span><br><span class="line">        <span class="keyword">var</span> iframeStyle = <span class="built_in">document</span>.createAttribute(<span class="string">"style"</span>);</span><br><span class="line">        <span class="keyword">var</span> iframeSrc = <span class="built_in">document</span>.createAttribute(<span class="string">"src"</span>);</span><br><span class="line"></span><br><span class="line">        iframeStyle.nodeValue = <span class="string">"display:none;width:0;height:0;"</span>;</span><br><span class="line">        iframeSrc.nodeValue = protocol;</span><br><span class="line">        iframe.setAttributeNode(iframeStyle);</span><br><span class="line">        iframe.setAttributeNode(iframeSrc);</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line"></span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(iframe);</span><br><span class="line">        &#125;, <span class="number">250</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">rebuildCallback</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> t = cb;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($.isFunction(cb)) &#123;</span><br><span class="line">            t = <span class="string">"hybrid_"</span> + (+<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">            <span class="built_in">window</span>[t] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="comment">// 将具有length属性的对象转成数组</span></span><br><span class="line">                cb.apply(<span class="literal">null</span>, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>));</span><br><span class="line">                <span class="keyword">delete</span> <span class="built_in">window</span>[t];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><hr><ul><li>format传入参数实现</li></ul><p>“//webapp/js/base.js”,<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="built_in">String</span>.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> temS = <span class="keyword">this</span>, i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; ++i) &#123;</span><br><span class="line">            temS = temS.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\&#123;"</span> + i + <span class="string">"\\&#125;"</span>, <span class="string">"g"</span>), <span class="built_in">arguments</span>[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temS;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li><code>+new Date()</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    s = <span class="keyword">new</span> <span class="built_in">Date</span>().toString();</span><br><span class="line">    <span class="comment">// "Wed May 17 2017 11:00:16 GMT+0800 (中国标准时间)"</span></span><br><span class="line"></span><br><span class="line">    t = (+<span class="keyword">new</span> <span class="built_in">Date</span>()).toString();</span><br><span class="line">    <span class="comment">// "1494990039861"</span></span><br><span class="line">    <span class="comment">// +new Date(); 等同于 new Date().getTime(); 简略写法，得到毫秒</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>Array.prototype.slice.call(arguments, 0)</code>剖析</li></ul><p>将具有length属性的对象转成数组</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//ES5 中的数组方法slice的底层内部实现</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice=<span class="function"><span class="keyword">function</span>(<span class="params">start,end</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//新数组</span></span><br><span class="line">    <span class="keyword">var</span> start = start || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> end = end || <span class="keyword">this</span>.length; <span class="comment">//this指向调用的对象，用了call之后，改变this的指向，指向传进来的对象</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=start; i&lt;end; i++)&#123;</span><br><span class="line">        result.push(<span class="keyword">this</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;<span class="comment">//返回的为一个新的数组</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 传入arguments类数组，调用Array.prototype.slice原型方法</span></span><br><span class="line">    <span class="comment">// 并用call()方法，将作用域限定在arguments中</span></span><br><span class="line">    <span class="comment">// 这里Array.prototype就可以理解为arguments</span></span><br><span class="line">    <span class="comment">// 参数0为slice()方法的第一个参数，即开始位置索引，返回整个数组。</span></span><br><span class="line">    <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><ul><li>JS Bridge建立Native与H5间通信</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">connectApp</span>(<span class="params">protocol</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">"iframe"</span>);</span><br><span class="line">    <span class="keyword">var</span> iframeStyle = <span class="built_in">document</span>.createAttribute(<span class="string">"style"</span>);</span><br><span class="line">    <span class="keyword">var</span> iframeSrc = <span class="built_in">document</span>.createAttribute(<span class="string">"src"</span>);</span><br><span class="line"></span><br><span class="line">    iframeStyle.nodeValue = <span class="string">"display:none;width:0;height:0;"</span>;</span><br><span class="line">    iframeSrc.nodeValue = protocol;</span><br><span class="line">    iframe.setAttributeNode(iframeStyle);</span><br><span class="line">    iframe.setAttributeNode(iframeSrc);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.body.removeChild(iframe);</span><br><span class="line">    &#125;, <span class="number">250</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Hybrid通信原理"><a href="#Hybrid通信原理" class="headerlink" title="Hybrid通信原理"></a>Hybrid通信原理</h3><p>背景：原生APP开发中有一个webview的组件(Android中是webview,iOS7以下有UIWebview,7以上有WKWebview),这个组件可以加载Html文件。</p><ul><li><p>IOS</p><ul><li>Object-C可直接调用js，只需调用stringByEvaluatingJavaScriptFromString即可，可直接获取js返回值。</li><li>js不可直接调用Object-C，利用 shouldStartLoadWithRequest，需拦截每个url，对指定的schema进行拦截做相应的本地方法。</li></ul></li><li><p>Android</p><ul><li>Java可直接调用js，但不可直接获取js返回值。</li><li>Java注册addJavascriptInterface 后，js可直接调用Native的接口，并获取Native的返回值。<a href="http://www.alloyteam.com/2013/02/rang-java-gen-javascript-geng-jia-qin-mi/" target="_blank" rel="noopener">让Java跟Javascript更加亲密</a></li><li>通过 shouldOverrideUrlLoading，也还是拦截Web的所有URL请求来达到通信的目的。</li></ul></li></ul><p><strong>基础通信存在以下问题</strong></p><ul><li><p>Android4.2以下,addJavascriptInterface方式有安全漏洞</p></li><li><p>iOS7以下,js无法调用Native</p></li></ul><h4 id="JS-Bridge"><a href="#JS-Bridge" class="headerlink" title="JS Bridge"></a>JS Bridge</h4><ul><li>url scheme交互方式是一套现有的成熟方案，可以完美兼容各种版本，不存在上述问题。</li></ul><p>通过JSBridge(JS和Native通信机制),H5页面可以调用Native的api,Native也可调用H5页面的方法或者通知H5页面回调。</p><p><img src="https://dailc.github.io/staticResource/blog/hybrid/jsbridge/img_hybrid_base_jsbridgePrinciple_1.png?_=5931322" alt="JSBridge的核心原理"></p><p>原理：<br>（1）初始化创建的一个style.display=none 的iframe,并将iframe.src设置为自有协议，每次js需要与Native通信时，js端主动调用iframe.src即可，Native收到请求通知后，反向调用fetchQueue(可见源码)获取消息内容；若Native需要与js通信，直接调用js，并获取返回值</p><p>（2）</p><ul><li><p>IOS<br>js-&gt;Native：js将要发送的消息存放在js端-&gt;调用iframe.src，触发通知Native-&gt;Native拦截请求，调用js bridge里面的fetchQueue并获取返回的消息内容，处理消息-&gt;将需要返回的数据通过直接调用js的方式，让js处理</p></li><li><p>Android<br>js-&gt;Native: 通过 shouldOverrideUrlLoading 携带Js的返回值<br>（3）Native-&gt;js: Native可直接调用Js并获取返回的内容</p></li></ul><p><a href="http://www.cnblogs.com/dailc/p/5930231.html" target="_blank" rel="noopener">连续五篇讲述Hybrid以及JSBridge解决方案</a></p><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;以调用Native上传图片组件为例&lt;/li&gt;
&lt;li&gt;Hybrid通信原理&lt;ul&gt;
&lt;li&gt;JS Bridge&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="webview" scheme="https://wangchloe.vip/tags/webview/"/>
    
  </entry>
  
  <entry>
    <title>每天10个前端知识点：杂技</title>
    <link href="https://wangchloe.vip/2019/07/20/blog37/"/>
    <id>https://wangchloe.vip/2019/07/20/blog37/</id>
    <published>2019-07-19T19:27:35.000Z</published>
    <updated>2019-07-25T10:13:55.021Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>toString() &amp;&amp; valueOf()</li><li>JSON stringify &amp; parse</li><li>zepto &amp; jquery区别</li><li><code>xxx.prepend(yyy)</code>会先删除yyy再移入xxx最前</li><li>format传入参数实现</li><li><code>+new Date()</code></li><li><code>Array.prototype.slice.call(arguments, 0)</code>剖析</li><li><code>Object.prototype.toString.call(xxx);</code></li><li>数组或对象的长度</li><li>数组循环</li><li>微信关闭当前页面</li><li>强制刷新</li><li>正则获取指定key的value</li><li>chrome清除缓存、host</li><li>localStorage判断再次访问是否是当天</li></ul><!-- /MarkdownTOC --><a id="more"></a><hr><p>有些平时碰到的很零碎的东西我就随便插入到这个章节里了。</p><h2 id="toString-amp-amp-valueOf"><a href="#toString-amp-amp-valueOf" class="headerlink" title="toString() &amp;&amp; valueOf()"></a>toString() &amp;&amp; valueOf()</h2><ul><li><p><code>toString()</code> 把一个逻辑值转换为字符串，并返回结果。</p></li><li><p><code>valueOf()</code>  返回Boolean对象的原始值</p></li></ul><blockquote><p><strong>源自知乎</strong><br>这两个方法一般是交由JS去隐式调用，以满足不同的运算情况。</p></blockquote><blockquote><p>在数值运算里，会优先调用valueOf()，如a+b；<br>在字符串运算里，会优先调用toString()，如alert(c)。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该示例来源于脚本之家</span></span><br><span class="line"><span class="keyword">var</span> bbb = &#123;</span><br><span class="line">    i: <span class="number">10</span>,</span><br><span class="line">    toString: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'toString'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.i;</span><br><span class="line">    &#125;,</span><br><span class="line">    valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'valueOf'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert(bbb); <span class="comment">// 10 toString</span></span><br><span class="line">alert(+bbb); <span class="comment">// 10 valueOf</span></span><br><span class="line">alert(<span class="string">''</span> + bbb); <span class="comment">// 10 valueOf</span></span><br><span class="line">alert(<span class="built_in">String</span>(bbb)); <span class="comment">// 10 toString</span></span><br><span class="line">alert(<span class="built_in">Number</span>(bbb)); <span class="comment">// 10 valueOf</span></span><br><span class="line">alert(bbb == <span class="string">'10'</span>); <span class="comment">// true valueOf</span></span><br><span class="line">alert(bbb === <span class="string">'10'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(&#123;</span><br><span class="line">    valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; * &#123;</span><br><span class="line">    valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">30</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);     <span class="comment">// 600</span></span><br></pre></td></tr></table></figure><h2 id="JSON-stringify-amp-parse"><a href="#JSON-stringify-amp-parse" class="headerlink" title="JSON stringify &amp; parse"></a>JSON stringify &amp; parse</h2><p><a href="https://github.com/douglascrockford/JSON-js/blob/master/json2.js" target="_blank" rel="noopener">json2.js - 引入解决IE7及以下版本JSON未定义问题。</a></p><ol><li>JSON.stringify(object);  <strong>对象 -&gt; 字符串</strong>  将对象字符串序列化成标准JSON字符串</li></ol><p>eg: <code>{a:1,b:2}</code>  -&gt;  <code>&quot;{&quot;a&quot;:1,&quot;b&quot;:2}&quot;</code></p><ol start="2"><li>JSON.parse(str);  <strong>字符串 -&gt; json对象</strong>  将字符串序列化成对象</li></ol><p><code>{&quot;name&quot;:&quot;wangchloe&quot;,&quot;age&quot;:&quot;22&quot;}</code>  -&gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    age: &quot;22&quot;,</span><br><span class="line">    name: &quot;wangchloe&quot;,</span><br><span class="line">    _proto: Object</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.baidu.com/"</span> <span class="attr">attr1</span>=<span class="string">'13'</span>&gt;</span>baidu.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oA = <span class="built_in">document</span>.querySelector(<span class="string">'a'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(oA.getAttribute(<span class="string">'attr1'</span>));  <span class="comment">// 13</span></span><br><span class="line"></span><br><span class="line">oA.setAttribute(<span class="string">'attr1'</span>, <span class="string">'14'</span>);</span><br><span class="line"><span class="keyword">var</span> num = oA.getAttribute(<span class="string">'attr1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(oA.getAttribute(<span class="string">'attr1'</span>));  <span class="comment">// 14</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> number);  <span class="comment">// string 直接设置自定义属性只能得到string类型</span></span><br><span class="line"></span><br><span class="line">oA.setAttribute(<span class="string">'attr1'</span>, <span class="built_in">JSON</span>.stringify(&#123;<span class="attr">name</span>: <span class="number">14</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num2 = oA.getAttribute(<span class="string">'attr1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num2);  <span class="comment">// &#123;"name": "14"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(num2));</span><br><span class="line"><span class="comment">// Object &#123;name: "14"&#125;</span></span><br><span class="line"><span class="comment">//     name: "14"</span></span><br><span class="line"><span class="comment">//     -&gt; _proto_: Object</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(num2).name);  <span class="comment">// 14</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">JSON</span>.parse(num2).name);  <span class="comment">// number JSON转化得到了真正类型</span></span><br></pre></td></tr></table></figure><ol start="3"><li>JSON转换 <code>JSON.parse(JSON.stringify(obj))</code></li></ol><h2 id="zepto-amp-jquery区别"><a href="#zepto-amp-jquery区别" class="headerlink" title="zepto &amp; jquery区别"></a>zepto &amp; jquery区别</h2><ul><li>zepto没有判断<code>is(&quot;:hidden&quot;)</code>方法</li><li>zepto没有<code>fadeIn</code>、<code>fadeOut</code>方法 </li><li>jquery中<code>visibility:hidden</code>、 <code>opacity:0</code>为可见</li></ul><h2 id="xxx-prepend-yyy-会先删除yyy再移入xxx最前"><a href="#xxx-prepend-yyy-会先删除yyy再移入xxx最前" class="headerlink" title="xxx.prepend(yyy)会先删除yyy再移入xxx最前"></a><code>xxx.prepend(yyy)</code>会先删除yyy再移入xxx最前</h2><h2 id="format传入参数实现"><a href="#format传入参数实现" class="headerlink" title="format传入参数实现"></a>format传入参数实现</h2><p>“//webapp/js/base.js”,<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> temS = <span class="keyword">this</span>, i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; ++i) &#123;</span><br><span class="line">        temS = temS.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\&#123;"</span> + i + <span class="string">"\\&#125;"</span>, <span class="string">"g"</span>), <span class="built_in">arguments</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="new-Date"><a href="#new-Date" class="headerlink" title="+new Date()"></a><code>+new Date()</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="keyword">new</span> <span class="built_in">Date</span>().toString();</span><br><span class="line"><span class="comment">// "Wed May 17 2017 11:00:16 GMT+0800 (中国标准时间)"</span></span><br><span class="line"></span><br><span class="line">t = (+<span class="keyword">new</span> <span class="built_in">Date</span>()).toString();</span><br><span class="line"><span class="comment">// "1494990039861"</span></span><br><span class="line"><span class="comment">// +new Date(); 等同于 new Date().getTime(); 简略写法，得到毫秒</span></span><br></pre></td></tr></table></figure><h2 id="Array-prototype-slice-call-arguments-0-剖析"><a href="#Array-prototype-slice-call-arguments-0-剖析" class="headerlink" title="Array.prototype.slice.call(arguments, 0)剖析"></a><code>Array.prototype.slice.call(arguments, 0)</code>剖析</h2><p>将具有length属性的对象转成数组</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// slice的内部实现</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice=<span class="function"><span class="keyword">function</span>(<span class="params">start,end</span>)</span>&#123;  <span class="comment">//ES5 中的数组方法slice的底层内部实现</span></span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//新数组</span></span><br><span class="line">    <span class="keyword">var</span> start = start || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> end = end || <span class="keyword">this</span>.length; <span class="comment">//this指向调用的对象，用了call之后，改变this的指向，指向传进来的对象</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=start; i&lt;end; i++)&#123;</span><br><span class="line">        result.push(<span class="keyword">this</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;  <span class="comment">//返回的为一个新的数组</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传入arguments类数组，调用Array.prototype.slice原型方法</span></span><br><span class="line"><span class="comment">// 并用call()方法，将作用域限定在arguments中</span></span><br><span class="line"><span class="comment">// 这里Array.prototype就可以理解为arguments</span></span><br><span class="line"><span class="comment">// 参数0为slice()方法的第一个参数，即开始位置索引，返回整个数组。</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><h2 id="Object-prototype-toString-call-xxx"><a href="#Object-prototype-toString-call-xxx" class="headerlink" title="Object.prototype.toString.call(xxx);"></a><code>Object.prototype.toString.call(xxx);</code></h2><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1flaq2qoy21j309l06vjsa.jpg" alt="Object.prototype.toString.call"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> InputValidation = &#123;</span><br><span class="line">    <span class="string">"isNumber"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">intArg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(intArg) === <span class="string">"[object Number]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">InputValidation.isNumber(<span class="number">111</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="数组或对象的长度"><a href="#数组或对象的长度" class="headerlink" title="数组或对象的长度"></a>数组或对象的长度</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> codeAccount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.isPrototypeOf(<span class="keyword">this</span>.arrCodes)) &#123;</span><br><span class="line">        <span class="keyword">var</span> keyArray = <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.arrCodes);</span><br><span class="line">        <span class="keyword">return</span> keyArray.length;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">Array</span>.prototype.isPrototypeOf(<span class="keyword">this</span>.arrCodes)) &#123;</span><br><span class="line">        returnthis.arrCodes.length;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="数组循环"><a href="#数组循环" class="headerlink" title="数组循环"></a>数组循环</h2><ul><li>jq元素数组each循环</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$selector.each(<span class="function"><span class="keyword">function</span>(<span class="params">index, ele</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>纯数组each循环</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"></span><br><span class="line">$.each(arr, <span class="function"><span class="keyword">function</span>(<span class="params">index, ele</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(ele);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="微信关闭当前页面"><a href="#微信关闭当前页面" class="headerlink" title="微信关闭当前页面"></a>微信关闭当前页面</h2><p><code>WeixinJSBridge.call(&#39;closeWindow&#39;);</code></p><h2 id="强制刷新"><a href="#强制刷新" class="headerlink" title="强制刷新"></a>强制刷新</h2><p><code>window.location.href = window.location.href + &#39;&amp;t=&#39; + new Date().getTime();</code></p><h2 id="正则获取指定key的value"><a href="#正则获取指定key的value" class="headerlink" title="正则获取指定key的value"></a>正则获取指定key的value</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> className = $selectedLottery[<span class="number">0</span>].className;</span><br><span class="line"><span class="keyword">var</span> index = className ? <span class="regexp">/lottery-unit-(\d+)/</span>.exec(className)[<span class="number">1</span>] : <span class="string">''</span>;</span><br></pre></td></tr></table></figure><h2 id="chrome清除缓存、host"><a href="#chrome清除缓存、host" class="headerlink" title="chrome清除缓存、host"></a>chrome清除缓存、host</h2><p><code>chrome://net-internals/#sockets</code></p><h2 id="localStorage判断再次访问是否是当天"><a href="#localStorage判断再次访问是否是当天" class="headerlink" title="localStorage判断再次访问是否是当天"></a>localStorage判断再次访问是否是当天</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">toastNews: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nowDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="comment">// Thu Aug 23 2018 17:29:16 GMT+0800 (中国标准时间)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="comment">// 将上次访问时间放在localstorage中</span></span><br><span class="line">    <span class="comment">//取上次进入时间，判断如果是同一天的话，不提示，如果是空或者不是同一天则提示</span></span><br><span class="line">    <span class="keyword">var</span> lastEntryTime = localStorage.getItem(<span class="string">'ls-time'</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!lastEntryTime || <span class="keyword">this</span>.getDayTimestamp(lastEntryTime) != <span class="keyword">this</span>.getDayTimestamp(nowDate)) &#123; <span class="comment">//空不存在或者不是同一天</span></span><br><span class="line">        localStorage.setItem(<span class="string">'ls-time'</span>, nowDate);</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">getDayTimestamp: <span class="function"><span class="keyword">function</span>(<span class="params">date</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> parseDate = <span class="keyword">new</span> <span class="built_in">Date</span>(date);</span><br><span class="line">    <span class="keyword">var</span> year = parseDate.getFullYear();</span><br><span class="line">    <span class="comment">// new Date('Thu Aug 23 2018 17:29:16 GMT+0800 (中国标准时间)').getFullYear()</span></span><br><span class="line">    <span class="comment">// 2018</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> month = parseDate.getMonth();</span><br><span class="line">    <span class="keyword">var</span> day = parseDate.getDate();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(year,month,day).getTime();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！</p><p>公众号是坚持日更的，不发文的时候推送一些我觉得好用的前端网站或者看到的一些问题的解决方案，也更便于大家交流，就酱。</p><p><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;toString() &amp;amp;&amp;amp; valueOf()&lt;/li&gt;
&lt;li&gt;JSON stringify &amp;amp; parse&lt;/li&gt;
&lt;li&gt;zepto &amp;amp; jquery区别&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xxx.prepend(yyy)&lt;/code&gt;会先删除yyy再移入xxx最前&lt;/li&gt;
&lt;li&gt;format传入参数实现&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+new Date()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Array.prototype.slice.call(arguments, 0)&lt;/code&gt;剖析&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Object.prototype.toString.call(xxx);&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;数组或对象的长度&lt;/li&gt;
&lt;li&gt;数组循环&lt;/li&gt;
&lt;li&gt;微信关闭当前页面&lt;/li&gt;
&lt;li&gt;强制刷新&lt;/li&gt;
&lt;li&gt;正则获取指定key的value&lt;/li&gt;
&lt;li&gt;chrome清除缓存、host&lt;/li&gt;
&lt;li&gt;localStorage判断再次访问是否是当天&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="杂技" scheme="https://wangchloe.vip/tags/%E6%9D%82%E6%8A%80/"/>
    
  </entry>
  
  <entry>
    <title>video.js小记</title>
    <link href="https://wangchloe.vip/2019/06/25/blog55/"/>
    <id>https://wangchloe.vip/2019/06/25/blog55/</id>
    <published>2019-06-25T07:34:01.000Z</published>
    <updated>2019-06-25T07:34:01.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>chrome video不能自动播放</li><li>videojs暂停后不能播放</li><li>iOS 10+ 新政策。</li><li>Refused to create worker from blob</li></ul><!-- /MarkdownTOC --><a id="more"></a><p><a href="https://www.awaimai.com/2053.html" target="_blank" rel="noopener">video.js使用技巧</a></p><p><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g5hnzcn1tmj30f00trq58.jpg" alt=""></p><h3 id="chrome-video不能自动播放"><a href="#chrome-video不能自动播放" class="headerlink" title="chrome video不能自动播放"></a>chrome video不能自动播放</h3><ul><li>方法一</li></ul><p>在chrome 浏览器中输入：chrome://flags，搜索“Autoplay policy”，默认为“Default”，</p><p>修改为 “No user gesture is required” </p><ul><li>方法二</li></ul><p>在使用video标签的过程中，设置静音播放</p><h3 id="videojs暂停后不能播放"><a href="#videojs暂停后不能播放" class="headerlink" title="videojs暂停后不能播放"></a>videojs暂停后不能播放</h3><p>需使用source配置video资源</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"J_video_wrap"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"video-js video-box"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">"video"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">controls</span></span></span><br><span class="line"><span class="tag">    <span class="attr">preload</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-webkit-airplay</span>=<span class="string">"allow"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">webkit-playsinline</span></span></span><br><span class="line"><span class="tag">    <span class="attr">playsinline</span></span></span><br><span class="line"><span class="tag">   <span class="attr">poster</span>=<span class="string">"&#123;$video.img&#125;"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">src</span>=<span class="string">"&#123;$video.link&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"J_video_wrap"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"video-js video-box"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">"video"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">controls</span></span></span><br><span class="line"><span class="tag">    <span class="attr">preload</span>=<span class="string">"auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">    <span class="attr">x-webkit-airplay</span>=<span class="string">"allow"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">webkit-playsinline</span></span></span><br><span class="line"><span class="tag">    <span class="attr">playsinline</span></span></span><br><span class="line"><span class="tag">   <span class="attr">poster</span>=<span class="string">"&#123;$video.img&#125;"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"&#123;$video.link&#125;"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="iOS-10-新政策。"><a href="#iOS-10-新政策。" class="headerlink" title="iOS 10+ 新政策。"></a>iOS 10+ 新政策。</h3><p>在省电模式下无法自动播放视频。android任何模式都不能自动播放，只能让用户手动触发</p><h3 id="Refused-to-create-worker-from-blob"><a href="#Refused-to-create-worker-from-blob" class="headerlink" title="Refused to create worker from blob"></a>Refused to create worker from blob</h3><p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5b2chlepnj30tj01xdgf.jpg" alt=""></p><p>解决：</p><p><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5b2ckq6f6j30tj06l3zq.jpg" alt=""></p><p>在header的CSP(Content Security Policy ,内容安全策略)处添加blob:</p><p><a href="https://www.cnblogs.com/heyuqing/p/6215761.html" target="_blank" rel="noopener">前端安全配置之Content-Security-Policy(csp)</a></p><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;chrome video不能自动播放&lt;/li&gt;
&lt;li&gt;videojs暂停后不能播放&lt;/li&gt;
&lt;li&gt;iOS 10+ 新政策。&lt;/li&gt;
&lt;li&gt;Refused to create worker from blob&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="项目总结" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
      <category term="video.js" scheme="https://wangchloe.vip/tags/video-js/"/>
    
  </entry>
  
  <entry>
    <title>es6笔记</title>
    <link href="https://wangchloe.vip/2019/06/01/blog78/"/>
    <id>https://wangchloe.vip/2019/06/01/blog78/</id>
    <published>2019-06-01T09:51:06.000Z</published>
    <updated>2019-07-26T09:52:06.751Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>数据类型<ul><li>Symbol</li></ul></li><li>数据结构<ul><li>Map<ul><li>WeakMap</li></ul></li><li>Set<ul><li>WeakSet</li></ul></li></ul></li><li>声明变量<ul><li>let<ul><li>let声明的变量只在当前代码块内有效</li><li>for循环变量为副作用域，循环内部为子作用域，let范围不冲突不交叉<ul><li>字符串遍历器</li></ul></li><li>不存在变量提升</li><li>暂时性死区</li><li>不允许重复声明</li></ul></li><li>const<ul><li>应用场景</li></ul></li><li>ES5 &amp; ES6 声明变量<ul><li>顶层对象 &amp; 全局变量</li></ul></li><li>global对象<ul><li>顶层对象</li><li>this变量</li><li>引入global作为顶层对象</li></ul></li></ul></li><li>destructuring 解构赋值<ul><li>数组的解构赋值</li><li>默认值</li><li>对象的解构赋值</li><li>应用</li></ul></li><li>class类</li><li>arrow function 箭头函数</li><li>`` template string 模版字符串</li><li>Spread 扩展运算符 …</li><li>default reset<ul><li>default<ul><li>reset</li></ul></li></ul></li><li>import export<ul><li>es5</li><li>es6</li></ul></li><li>proxy &amp; reflect<ul><li>Proxy</li><li>Reflect</li></ul></li><li>Promise</li><li>for…of循环</li></ul><!-- /MarkdownTOC --><a id="more"></a><p><a href="https://mp.weixin.qq.com/s/-INIDCq19yl8nKWHXYKZHg" target="_blank" rel="noopener">学会了ES6，就不会写出那样的代码</a></p><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><ul><li>独一无二的值</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> a2 = Sybmol();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a1 === a2); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a3 = Sybmol.for(<span class="string">'a3'</span>);</span><br><span class="line"><span class="keyword">let</span> a4 = Sybmol.for(<span class="string">'a3'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a3 === a4); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Symbol</span>); <span class="comment">// function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.toString()); <span class="comment">// "function Symbol() &#123; [native code] &#125;"</span></span><br></pre></td></tr></table></figure><h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><blockquote><p> 键值对集合，键的范围不限于字符串</p></blockquote><ul><li><p><code>map.size</code></p></li><li><p><code>map.has(&#39;xxx&#39;)</code></p></li><li><p><code>map.get(&#39;xxx&#39;)</code></p></li><li><p><code>map.set(arr, &#39;xxx&#39;)</code></p></li><li><p><code>map.delete(&#39;xxx&#39;)</code></p></li><li><p><code>map.clear()</code></p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'name'</span>, <span class="string">'Chloe'</span>]，</span><br><span class="line">  [<span class="string">'title'</span>, <span class="string">'Author'</span>]</span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">map.size <span class="comment">// 2</span></span><br><span class="line">map.has(<span class="string">'name'</span>) <span class="comment">// true</span></span><br><span class="line">map.get(<span class="string">'name'</span>) <span class="comment">// Chloe</span></span><br><span class="line">map.has(<span class="string">'title'</span>) <span class="comment">// true</span></span><br><span class="line">map.get(<span class="string">'title'</span>) <span class="comment">// Author</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">'123'</span>];</span><br><span class="line">map2.set(arr, <span class="string">'456'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map2, map2.get(arr)); <span class="comment">// &#123;["123"] =&gt; "456"&#125;  "456"</span></span><br></pre></td></tr></table></figure><h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3><ul><li><p>WeakMap只接受对象作为键名</p></li><li><p>没有clear方法</p></li></ul><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><ul><li>类似数组，但是成员的值都是唯一的，没有重复的值。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ,<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list3 = <span class="keyword">new</span> <span class="built_in">Set</span>(arr1);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(list3); <span class="comment">// &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(list3.size); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Set</span>); <span class="comment">// function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Set</span>.toString()); <span class="comment">// "function Set() &#123; [native code] &#125;"</span></span><br></pre></td></tr></table></figure><ul><li><p><code>list.size</code></p></li><li><p><code>list.add(xxx)</code> 添加值，返回Set解构本身</p></li><li><p><code>list.delete(xxx)</code> 删除值，返回是否删除成功的boolean</p></li><li><p><code>list.has(xxx)</code> 该值是否为Set的成员，返回一个boolean</p></li><li><p><code>list.clear()</code> 清除所有成员，没有返回值</p></li></ul><ul><li>遍历</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">'add'</span>, <span class="string">'delete'</span>, <span class="string">'clear'</span>];</span><br><span class="line"><span class="keyword">let</span> list = <span class="keyword">new</span> <span class="built_in">Set</span>(arr);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> lists.leys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h3><ul><li><p>WeakSet成员只能是对象</p></li><li><p>没有clear方法</p></li></ul><h1 id="声明变量"><a href="#声明变量" class="headerlink" title="声明变量"></a>声明变量</h1><h2 id="let"><a href="#let" class="headerlink" title="let"></a>let</h2><p>let &amp; var</p><h3 id="let声明的变量只在当前代码块内有效"><a href="#let声明的变量只在当前代码块内有效" class="headerlink" title="let声明的变量只在当前代码块内有效"></a>let声明的变量只在当前代码块内有效</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a  <span class="comment">// a is not defined</span></span><br><span class="line">b  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><ul><li>eg: 可用于for循环计数</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>](); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>](); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><h3 id="for循环变量为副作用域，循环内部为子作用域，let范围不冲突不交叉"><a href="#for循环变量为副作用域，循环内部为子作用域，let范围不冲突不交叉" class="headerlink" title="for循环变量为副作用域，循环内部为子作用域，let范围不冲突不交叉"></a>for循环变量为副作用域，循环内部为子作用域，let范围不冲突不交叉</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="string">'abc'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//abc</span></span><br><span class="line"><span class="comment">//abc</span></span><br><span class="line"><span class="comment">//abc</span></span><br></pre></td></tr></table></figure><h4 id="字符串遍历器"><a href="#字符串遍历器" class="headerlink" title="字符串遍历器"></a>字符串遍历器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'abc'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> code <span class="keyword">of</span> str) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'es6'</span>, code); <span class="comment">// abc</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="不存在变量提升"><a href="#不存在变量提升" class="headerlink" title="不存在变量提升"></a>不存在变量提升</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bar); <span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">let</span> bar = <span class="number">2</span>;</span><br></pre></td></tr></table></figure><h3 id="暂时性死区"><a href="#暂时性死区" class="headerlink" title="暂时性死区"></a>暂时性死区</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    tmp = <span class="string">'abc'</span>; <span class="comment">// 报错</span></span><br><span class="line">    <span class="keyword">let</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>let绑定了if语句的块级作用域</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = x; <span class="comment">// 不报错</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = x; <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure><h3 id="不允许重复声明"><a href="#不允许重复声明" class="headerlink" title="不允许重复声明"></a>不允许重复声明</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arg; <span class="comment">// 报错</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> arg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>函数声明</p></blockquote><ul><li><p>允许在块级作用域内声明函数。</p></li><li><p>函数声明类似于var，即会提升到全局作用域或函数作用域的头部。</p></li><li><p>同时，函数声明还会提升到所在的块级作用域的头部。</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// *浏览器的 ES6 环境</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'I am outside!'</span>); &#125;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// var f = undefined;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="comment">// 重复声明一次函数f</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'I am inside!'</span>); &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  f();  <span class="comment">// f is not a function</span></span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure><p><strong>优化 =&gt; 推荐函数表达式</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数声明语句</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="string">'secret'</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数表达式</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="string">'secret'</span>;</span><br><span class="line">  <span class="keyword">let</span> f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="const"><a href="#const" class="headerlink" title="const"></a>const</h2><ul><li><p>声明常量</p></li><li><p>只在声明所在的块级作用域内有效</p></li></ul><blockquote><p>const并不是变量的值不得改动，而且是变量指向的<strong>内存地址</strong>不得改动。</p></blockquote><p>简单类型的数据(数值、字符串、布尔值) =&gt; 常量</p><p>复合类型的数据(对象、数组等) =&gt; 指针地址</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// foo可以添加自身属性</span></span><br><span class="line">foo.prop = <span class="number">123</span>;</span><br><span class="line">foo.prop;  <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line">foo = &#123;&#125;;  <span class="comment">// 报错，foo不能指向另一个对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = [];</span><br><span class="line">a.push(<span class="string">'Hello'</span>); <span class="comment">// 可添加数据</span></span><br><span class="line">a.length = <span class="number">0</span>;  <span class="comment">// 可定义属性</span></span><br><span class="line"></span><br><span class="line">a = [<span class="string">'Chloe'</span>];  <span class="comment">// 报错，不能指向另一个数组</span></span><br></pre></td></tr></table></figure><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>引用第三方库的时声明的变量，用const来声明可以避免未来不小心重命名而导致出现bug。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> monent = <span class="built_in">require</span>(<span class="string">'moment'</span>);</span><br></pre></td></tr></table></figure><h2 id="ES5-amp-ES6-声明变量"><a href="#ES5-amp-ES6-声明变量" class="headerlink" title="ES5 &amp; ES6 声明变量"></a>ES5 &amp; ES6 声明变量</h2><ul><li><p>ES5: <code>var</code> <code>function</code></p></li><li><p>ES6: <code>var</code> <code>function</code> <code>let</code> <code>const</code> <code>import</code> <code>class</code></p></li></ul><h3 id="顶层对象-amp-全局变量"><a href="#顶层对象-amp-全局变量" class="headerlink" title="顶层对象 &amp; 全局变量"></a>顶层对象 &amp; 全局变量</h3><ul><li><p>var命令和function命令声明的全局变量，依旧是顶层对象的属性</p></li><li><p>let命令、const命令、class命令声明的全局变量，不属于顶层对象的属性</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">window</span>.a; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">window</span>.b; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h2 id="global对象"><a href="#global对象" class="headerlink" title="global对象"></a>global对象</h2><h3 id="顶层对象"><a href="#顶层对象" class="headerlink" title="顶层对象"></a>顶层对象</h3><ul><li><p>浏览器里面，顶层对象是window，但 Node 和 Web Worker 没有window。</p></li><li><p>浏览器和 Web Worker 里面，self也指向顶层对象，但是 Node 没有self。</p></li><li><p>Node 里面，顶层对象是global，但其他环境都不支持。</p></li></ul><h3 id="this变量"><a href="#this变量" class="headerlink" title="this变量"></a>this变量</h3><ul><li><p>全局环境中，this会返回顶层对象。但是，Node 模块和 ES6 模块中，this返回的是当前模块。</p></li><li><p>函数里面的this，如果函数不是作为对象的方法运行，而是单纯作为函数运行，this会指向顶层对象。但是，严格模式下，这时this会返回undefined。</p></li><li><p>不管是严格模式，还是普通模式，new Function(‘return this’)()，总是会返回全局对象。但是，如果浏览器用了 CSP（Content Security Policy，内容安全政策），那么eval、new Function这些方法都可能无法使用。</p></li></ul><h3 id="引入global作为顶层对象"><a href="#引入global作为顶层对象" class="headerlink" title="引入global作为顶层对象"></a>引入global作为顶层对象</h3><ul><li>方法一</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span></span><br><span class="line">    ? widnow</span><br><span class="line">    : (<span class="keyword">typeof</span> process === <span class="string">'object'</span> &amp;&amp;</span><br><span class="line">       <span class="keyword">typeof</span> <span class="built_in">require</span> === <span class="string">'function'</span> &amp;&amp;</span><br><span class="line">       <span class="keyword">typeof</span> global === <span class="string">'object'</span>)</span><br><span class="line">    ? global</span><br><span class="line">    : <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><ul><li>方法二</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getGlobal = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> self !== <span class="string">'undefined'</span>) &#123; <span class="keyword">return</span> self; &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span>) &#123; <span class="keyword">return</span> <span class="built_in">window</span>; &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> global !== <span class="string">'undefined'</span>) &#123;<span class="keyword">return</span> global; &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'unable to locate global object'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="destructuring-解构赋值"><a href="#destructuring-解构赋值" class="headerlink" title="destructuring 解构赋值"></a>destructuring 解构赋值</h1><p>从数组和对象中提取值，对变量进行赋值。</p><h2 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, , y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">head <span class="comment">// 1</span></span><br><span class="line">tail <span class="comment">// [2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, ,y, ...z] = [<span class="string">'a'</span>];</span><br><span class="line">x <span class="comment">// "a"</span></span><br><span class="line">y <span class="comment">// undefined</span></span><br><span class="line">z <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, [b], [d]] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line">a <span class="comment">// 1</span></span><br><span class="line">b <span class="comment">// 2</span></span><br><span class="line">d <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h2 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h2><blockquote><p>ES6 内部使用严格相等运算符（===），判断一个位置是否有值。所以，只有当一个数组成员严格等于undefined，默认值才会生效。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y = <span class="string">'b'</span>] = [<span class="string">'a'</span>, <span class="literal">undefined</span>]; <span class="comment">// x='a', y='b'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">undefined</span>]; <span class="comment">// x=1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>]; <span class="comment">// x=null</span></span><br></pre></td></tr></table></figure><h2 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h2><blockquote><p>对象的属性没有次序，变量必须与属性同名，才能取到正确的值。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; bar, foo &#125; = &#123; <span class="attr">foo</span>: <span class="string">"aaa"</span>, <span class="attr">bar</span>: <span class="string">"bbb"</span> &#125;;</span><br><span class="line">foo <span class="comment">// "aaa"</span></span><br><span class="line">bar <span class="comment">// "bbb"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(baz); <span class="comment">// "aaa"</span></span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// foo is not defined</span></span><br></pre></td></tr></table></figure><blockquote><p>解构赋值的内部机制：先找到同名属性，然后再赋给对应的变量。真正被赋值的是baz而不是foo。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">let</span> cat = <span class="string">'ken'</span></span><br><span class="line"><span class="keyword">let</span> dog = <span class="string">'lili'</span></span><br><span class="line"><span class="keyword">let</span> zoo = &#123;<span class="attr">cat</span>: cat, <span class="attr">dog</span>: dog&#125;  <span class="comment">// &#123;cat: 'ken', dog: 'lili'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">let</span> cat = <span class="string">'ken'</span></span><br><span class="line"><span class="keyword">let</span> dog = <span class="string">'lili'</span></span><br><span class="line"><span class="keyword">let</span> zoo = &#123;cat, dog&#125;; <span class="comment">// &#123;cat: 'ken', dog: 'lili'&#125;</span></span><br></pre></td></tr></table></figure><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><ul><li>变量交换</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">  [a, b] = [b, a];</span><br><span class="line">  <span class="built_in">console</span>.log(a, b); <span class="comment">// 2 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="class类"><a href="#class类" class="headerlink" title="class类"></a>class类</h1><ul><li><p>extends</p></li><li><p>super()</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 构造方法</span></span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = <span class="string">'animal'</span></span><br><span class="line">    &#125;</span><br><span class="line">    says(say)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.type + <span class="string">' says '</span> + say)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> animal = <span class="keyword">new</span> Animal()</span><br><span class="line">animal.says(<span class="string">'hello'</span>) <span class="comment">//animal says hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="comment">// 父类的实例方法，继承父类的this对象，不在constructor中使用this则不必调用super()</span></span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line">        <span class="keyword">this</span>.type = <span class="string">'cat'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cat = <span class="keyword">new</span> Cat()</span><br><span class="line">cat.says(<span class="string">'hello'</span>); <span class="comment">//cat says hello</span></span><br></pre></td></tr></table></figure><h1 id="arrow-function-箭头函数"><a href="#arrow-function-箭头函数" class="headerlink" title="arrow function 箭头函数"></a>arrow function 箭头函数</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line">(i) =&gt; i + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  x++;</span><br><span class="line">  y--;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line">(x, y) =&gt; &#123; x++; y--; <span class="keyword">return</span> x+y&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">let</span> bar = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a * b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="keyword">this</span>.birth; <span class="comment">// this指向window或undefined</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="keyword">this</span>.birth; <span class="comment">// this指向obj对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// es6  【和函数体的&#123; ... &#125;有语法冲突，需包裹小括号】</span></span><br><span class="line">x =&gt; (&#123; <span class="attr">foo</span>: x &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6 由于this在箭头函数中已经按照词法作用域绑定了，所以，用call()或者apply()调用箭头函数时，无法对this进行绑定，即传入的第一个参数被忽略</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    getAge: <span class="function"><span class="keyword">function</span> (<span class="params">year</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="keyword">this</span>.birth; <span class="comment">// 1990</span></span><br><span class="line">        <span class="keyword">var</span> fn = <span class="function">(<span class="params">y</span>) =&gt;</span> y - <span class="keyword">this</span>.birth; <span class="comment">// this.birth仍是1990</span></span><br><span class="line">        <span class="keyword">return</span> fn.call(&#123;<span class="attr">birth</span>:<span class="number">2000</span>&#125;, year);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.getAge(<span class="number">2015</span>); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure><ul><li>数组应用</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [ <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="string">'a'</span> ];</span><br><span class="line"><span class="keyword">let</span> b = arr.map( <span class="function"><span class="params">item</span> =&gt;</span> item + <span class="number">3</span> );</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// [ 8, 9, 10, 11, 'a3' ]</span></span><br></pre></td></tr></table></figure><ul><li>处理this</li></ul><blockquote><p>原理：箭头函数没有自己的this，他的this是继承外面的，因此内部的this就是外层代码块的this。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = <span class="string">'animal'</span></span><br><span class="line">    &#125;</span><br><span class="line">    says(say)&#123;</span><br><span class="line">        setTimeout( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.type + <span class="string">' says '</span> + say)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> animal = <span class="keyword">new</span> Animal()</span><br><span class="line">animal.says(<span class="string">'hi'</span>);  <span class="comment">//animal says hi</span></span><br></pre></td></tr></table></figure><h1 id="template-string-模版字符串"><a href="#template-string-模版字符串" class="headerlink" title="`` template string 模版字符串"></a>`` template string 模版字符串</h1><ul><li><p>` (反引号)模版字符串 包裹字符串及变量</p></li><li><p><code>${xxx}</code> 引用变量</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fName = <span class="string">'Peter'</span>, sName = <span class="string">'Smith'</span>, age = <span class="number">43</span>, job = <span class="string">'photographer'</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'Hi, I\'m '</span> + fName + <span class="string">' '</span> + sName + <span class="string">', I\'m '</span> + age + <span class="string">' and work as a '</span> + job + <span class="string">'.'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">`Hi, I'm <span class="subst">$&#123; fName &#125;</span> <span class="subst">$&#123; sName &#125;</span>, I'm <span class="subst">$&#123; age &#125;</span> and work as a <span class="subst">$&#123; job &#125;</span>.`</span>;</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#result"</span>).append(<span class="string">`</span></span><br><span class="line"><span class="string">  There are &lt;b&gt;<span class="subst">$&#123;basket.count&#125;</span>&lt;/b&gt; items</span></span><br><span class="line"><span class="string">   in your basket, &lt;em&gt;<span class="subst">$&#123;basket.onSale&#125;</span>&lt;/em&gt;</span></span><br><span class="line"><span class="string">  are on sale!</span></span><br><span class="line"><span class="string">`</span>);</span><br></pre></td></tr></table></figure><h1 id="Spread-扩展运算符-…"><a href="#Spread-扩展运算符-…" class="headerlink" title="Spread 扩展运算符 …"></a>Spread 扩展运算符 …</h1><ul><li>将多个参数合并到一个数组中</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]); <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> b = [<span class="number">1</span>, <span class="number">2</span>, ...a, <span class="number">6</span>];</span><br><span class="line"><span class="built_in">console</span>.log(b);  <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b, c</span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">`a=<span class="subst">$&#123;a&#125;</span>, b=<span class="subst">$&#123;b&#125;</span>, c=<span class="subst">$&#123;c&#125;</span>`</span>)&#125;</span><br><span class="line"><span class="keyword">let</span> data = [<span class="number">5</span>, <span class="number">15</span>, <span class="number">2</span>];</span><br><span class="line">foo( ...data); <span class="comment">// a=5, b=15, c=2</span></span><br></pre></td></tr></table></figure><ul><li>将数组或对象分散到新的数组或对象中</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> b = [ ...a ];</span><br><span class="line"><span class="keyword">let</span> c = a;</span><br><span class="line">b.push(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(b);  <span class="comment">// [1, 2, 3, 4] referencing different arrays</span></span><br><span class="line">c.push(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// [1, 2, 3, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(c);  <span class="comment">// [1, 2, 3, 5] referencing the same array</span></span><br></pre></td></tr></table></figure><h1 id="default-reset"><a href="#default-reset" class="headerlink" title="default reset"></a>default reset</h1><h2 id="default"><a href="#default" class="headerlink" title="default"></a>default</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// es5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animal</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">  type = type || <span class="string">'cat'</span></span><br><span class="line">  <span class="built_in">console</span>.log(type)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animal</span>(<span class="params">type = <span class="string">'cat'</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(type);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><ul><li><p><code>...变量名</code> 获取函数的多余参数</p></li><li><p>参数变量是一个数组，该变量将多余的参数放入数组中</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">animals</span>(<span class="params">...types</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(type)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">animals(<span class="string">'cat'</span>, <span class="string">'dog'</span>, <span class="string">'fish'</span>); <span class="comment">// ["cat", "dog", "fish"]</span></span><br></pre></td></tr></table></figure><h1 id="import-export"><a href="#import-export" class="headerlink" title="import export"></a>import export</h1><ul><li><p>es5 </p><ul><li>服务器端 CommonJS</li><li>浏览器端 AMD(eg:require.js)</li></ul></li><li><p>es6</p><ul><li>module功能</li></ul></li></ul><h2 id="es5"><a href="#es5" class="headerlink" title="es5"></a>es5</h2><ul><li>require.js</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// content.js</span></span><br><span class="line">define(<span class="string">'content.js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'A cat'</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'./content.js'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">animal</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(animal); <span class="comment">// A cat</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><ul><li>CommonJS</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">var</span> animal = <span class="built_in">require</span>(<span class="string">'./content.js'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// content.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">'A cat'</span></span><br></pre></td></tr></table></figure><h2 id="es6"><a href="#es6" class="headerlink" title="es6"></a>es6</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> animal <span class="keyword">from</span> <span class="string">'./content'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// content.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">'A cat'</span></span><br></pre></td></tr></table></figure><h1 id="proxy-amp-reflect"><a href="#proxy-amp-reflect" class="headerlink" title="proxy &amp; reflect"></a>proxy &amp; reflect</h1><h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name:<span class="string">'gao'</span>,</span><br><span class="line">  time:<span class="string">'2017-08-13'</span>,</span><br><span class="line">  emp:<span class="string">'123'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> temp = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">  get(target, key) &#123;</span><br><span class="line">    <span class="keyword">return</span> target[key].replace(<span class="string">'2017'</span>, <span class="string">'2018'</span>);</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">  set(target, key, value) &#123;</span><br><span class="line">    <span class="keyword">if</span>(key === <span class="string">'name'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> target[key] = value;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> target[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  deleteProperty(target, key) &#123;</span><br><span class="line">    <span class="keyword">if</span>(key.indexOf(<span class="string">'i'</span>) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">delete</span> target[key];</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> target[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  ownKeys(target) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(target).filter(<span class="function"><span class="params">item</span>=&gt;</span>item!=<span class="string">'name'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'get'</span>,temp.time);  <span class="comment">//get 2018-08-13</span></span><br><span class="line"></span><br><span class="line">temp.time = <span class="string">'2018'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'set'</span>,temp.name,temp); <span class="comment">//set gao   &#123;name: "gao", time: "2017-08-13", temp: "123"&#125;</span></span><br><span class="line"></span><br><span class="line">temp.name = <span class="string">'he'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'set'</span>,temp.name,temp); <span class="comment">// set he  &#123;name: "he", time: "2017-08-13", temp: "123"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'has'</span>,<span class="string">'name'</span> <span class="keyword">in</span> temp,<span class="string">'time'</span> <span class="keyword">in</span> temp);  <span class="comment">//has true false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> temp.time;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'delete'</span>,temp);   <span class="comment">//delete  &#123;name: "he", temp: "123"&#125;</span></span><br></pre></td></tr></table></figure><h2 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h2><blockquote><p>不管Proxy怎么修改默认行为，总可以在Reflect上获取默认行为。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name:<span class="string">'gao'</span>,</span><br><span class="line">  time:<span class="string">'2017-08-13'</span>,</span><br><span class="line">  emp:<span class="string">'123'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'reflect get'</span>,<span class="built_in">Reflect</span>.get(obj, <span class="string">'name'</span>));  <span class="comment">// reflect get gao</span></span><br><span class="line"><span class="built_in">Reflect</span>.set(obj,<span class="string">'name'</span>,<span class="string">'hexaiofei'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj);  <span class="comment">// &#123;name: "hexaiofei", time: "2017-08-13", emp: "123"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'reflect has'</span>, <span class="built_in">Reflect</span>.has(obj,<span class="string">'name'</span>));  <span class="comment">//reflect has true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Reflect</span>); <span class="comment">// "object"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys.toString()); <span class="comment">// "function ownKeys() &#123; [native code] &#125;"</span></span><br></pre></td></tr></table></figure><h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Promise</span>); <span class="comment">//"function"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Promise</span>.toString()); <span class="comment">//"function Promise() &#123; [native code] &#125;"</span></span><br></pre></td></tr></table></figure><blockquote><p> 异步编程解决方案</p></blockquote><ul><li><p>三种状态</p><ul><li>Pending(进行中)</li><li>Fulfilled(已成功)</li><li>Rejected(已失败)</li></ul></li><li><p>Resolved(已定型)</p><ul><li>Pending -&gt; Fulfilled</li><li>Pending -&gt; Rejected</li></ul></li><li><p>Promise构造函数接受一个函数作为参数，该函数的两个参数分别是resolve(必写)和reject(可选)</p><ul><li>resolve (Pending -&gt; Resolved) 未完成-&gt;成功</li><li>reject (Pending -&gt; Rejected) 未完成-&gt;失败</li></ul></li></ul><blockquote><p>Promise实例生成以后，可以用then方法分别指定Resolved状态和Rejected状态的回调函数。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// ES5回调函数</span><br><span class="line">let ajax = function(callback) &#123;</span><br><span class="line">  console.log(&apos;hello&apos;);</span><br><span class="line">  setTimeout(funciton()&#123;</span><br><span class="line">    callback &amp;&amp; callback()</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ajax(function()&#123;</span><br><span class="line">  console.log(&apos;timeout1&apos;);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">// ES6 Promise</span><br><span class="line">let ajax = function() &#123;</span><br><span class="line">  console.log(&apos;say&apos;);</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(function()&#123;</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Promise实例生成以后，可以用then方法分别指定Resolved状态和Rejected状态的回调函数。</span><br><span class="line">ajax().then(function() &#123;</span><br><span class="line">  console.log(&apos;promise&apos;, &apos;timeout1&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>promise用法</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// success</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>promise对象回调处理详解</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'我是顺序运行的1号'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//回调测试1，带promise实例化时的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'回调测试1'</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//回调测试2，不带promise实例化时的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'回调测试2'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">arguments</span>[<span class="number">0</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创造了一个Promise实例</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'创造了一个Promise实例'</span>);</span><br><span class="line">    <span class="comment">//异步操作成功时调用，并将异步操作的结果，作为参数传递出去</span></span><br><span class="line">    resolve(<span class="number">666</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'我是顺序运行的2号'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//方法一：最简便的,拿到的是创造Promise实例时给resolve的参数</span></span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// success</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'方法一回调成功结果是:'</span>+result)</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'failure1:'</span>+error)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法二：先执行指定的函数再回调，test1这时就是resovle,所以参数是666</span></span><br><span class="line">p.then(test1)</span><br><span class="line"> .then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'方法二回调成功结果是:'</span> + result);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'failure2:'</span>+error)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法三：先执行指定的函数再回调，test1这时就是resovle,所以默认参数是arguments里面也有666</span></span><br><span class="line">p.then(test2)</span><br><span class="line"> .then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'方法三回调成功结果是:'</span> + result);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'failure3:'</span>+error)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'我是顺序运行的3号'</span>);</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdn.net/20180309104556172?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTQxOTQxOQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><h1 id="for…of循环"><a href="#for…of循环" class="headerlink" title="for…of循环"></a>for…of循环</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> val <span class="keyword">of</span> a) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "a" "b" "c" "d"</span></span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;数据类型&lt;ul&gt;
&lt;li&gt;Symbol&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;数据结构&lt;ul&gt;
&lt;li&gt;Map&lt;ul&gt;
&lt;li&gt;WeakMap&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Set&lt;ul&gt;
&lt;li&gt;WeakSet&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;声明变量&lt;ul&gt;
&lt;li&gt;let&lt;ul&gt;
&lt;li&gt;let声明的变量只在当前代码块内有效&lt;/li&gt;
&lt;li&gt;for循环变量为副作用域，循环内部为子作用域，let范围不冲突不交叉&lt;ul&gt;
&lt;li&gt;字符串遍历器&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;不存在变量提升&lt;/li&gt;
&lt;li&gt;暂时性死区&lt;/li&gt;
&lt;li&gt;不允许重复声明&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;const&lt;ul&gt;
&lt;li&gt;应用场景&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ES5 &amp;amp; ES6 声明变量&lt;ul&gt;
&lt;li&gt;顶层对象 &amp;amp; 全局变量&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;global对象&lt;ul&gt;
&lt;li&gt;顶层对象&lt;/li&gt;
&lt;li&gt;this变量&lt;/li&gt;
&lt;li&gt;引入global作为顶层对象&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;destructuring 解构赋值&lt;ul&gt;
&lt;li&gt;数组的解构赋值&lt;/li&gt;
&lt;li&gt;默认值&lt;/li&gt;
&lt;li&gt;对象的解构赋值&lt;/li&gt;
&lt;li&gt;应用&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;class类&lt;/li&gt;
&lt;li&gt;arrow function 箭头函数&lt;/li&gt;
&lt;li&gt;`` template string 模版字符串&lt;/li&gt;
&lt;li&gt;Spread 扩展运算符 …&lt;/li&gt;
&lt;li&gt;default reset&lt;ul&gt;
&lt;li&gt;default&lt;ul&gt;
&lt;li&gt;reset&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;import export&lt;ul&gt;
&lt;li&gt;es5&lt;/li&gt;
&lt;li&gt;es6&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;proxy &amp;amp; reflect&lt;ul&gt;
&lt;li&gt;Proxy&lt;/li&gt;
&lt;li&gt;Reflect&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Promise&lt;/li&gt;
&lt;li&gt;for…of循环&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>webview回退</title>
    <link href="https://wangchloe.vip/2019/05/24/blog50/"/>
    <id>https://wangchloe.vip/2019/05/24/blog50/</id>
    <published>2019-05-24T06:47:24.000Z</published>
    <updated>2019-07-25T08:20:13.846Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>webview切换回退监听</li><li>webview指定回退至某页面</li></ul><!-- /MarkdownTOC --><a id="more"></a><h3 id="webview切换回退监听"><a href="#webview切换回退监听" class="headerlink" title="webview切换回退监听"></a>webview切换回退监听</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">appSubsribe: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">"visibilitychange"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">document</span>.hidden) &#123;</span><br><span class="line">            that.fetchData();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="webview指定回退至某页面"><a href="#webview指定回退至某页面" class="headerlink" title="webview指定回退至某页面"></a>webview指定回退至某页面</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindNativeBack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!history.state) &#123;</span><br><span class="line">        history.pushState(&#123;&#125;, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//超返首页回退到返利首页</span></span><br><span class="line">    <span class="comment">// 执行closewv?target协议，target链接中有‘？’，需encodeURIComponent转义</span></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">"popstate"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        Fanli.Utility.bridgeApp(<span class="string">"ifanli://m.51fanli.com/app/action/closewv?target="</span>+<span class="built_in">encodeURIComponent</span>(<span class="string">"ifanli://m.51fanli.com/app/show/native?name=sfmain"</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;webview切换回退监听&lt;/li&gt;
&lt;li&gt;webview指定回退至某页面&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="webview" scheme="https://wangchloe.vip/tags/webview/"/>
    
  </entry>
  
  <entry>
    <title>那些prototype那些call</title>
    <link href="https://wangchloe.vip/2019/05/13/blog46/"/>
    <id>https://wangchloe.vip/2019/05/13/blog46/</id>
    <published>2019-05-12T19:27:35.000Z</published>
    <updated>2019-07-24T06:28:15.653Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><p>原型链大法好！</p><a id="more"></a><h3 id="Array-prototype-slice-call-arguments-0-将具有length属性的对象转成数组"><a href="#Array-prototype-slice-call-arguments-0-将具有length属性的对象转成数组" class="headerlink" title="Array.prototype.slice.call(arguments, 0)  将具有length属性的对象转成数组"></a><code>Array.prototype.slice.call(arguments, 0)</code>  将具有length属性的对象转成数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//ES5 中的数组方法slice的底层内部实现</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.slice=<span class="function"><span class="keyword">function</span>(<span class="params">start,end</span>)</span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//新数组</span></span><br><span class="line">    <span class="keyword">var</span> start = start || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> end = end || <span class="keyword">this</span>.length; <span class="comment">//this指向调用的对象，用了call之后，改变this的指向，指向传进来的对象</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=start; i&lt;end; i++)&#123;</span><br><span class="line">        result.push(<span class="keyword">this</span>[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;<span class="comment">//返回的为一个新的数组</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">// 传入arguments类数组，调用Array.prototype.slice原型方法</span></span><br><span class="line">    <span class="comment">// 并用call()方法，将作用域限定在arguments中</span></span><br><span class="line">    <span class="comment">// 这里Array.prototype就可以理解为arguments</span></span><br><span class="line">    <span class="comment">// 参数0为slice()方法的第一个参数，即开始位置索引，返回整个数组。</span></span><br><span class="line">    <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Object-prototype-toString-call-xxx-检查对象类型"><a href="#Object-prototype-toString-call-xxx-检查对象类型" class="headerlink" title="Object.prototype.toString.call(xxx)  检查对象类型"></a><code>Object.prototype.toString.call(xxx)</code>  检查对象类型</h3><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1flaq2qoy21j309l06vjsa.jpg" alt="Object.prototype.toString.call"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> InputValidation = &#123;</span><br><span class="line">    <span class="string">"isNumber"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">intArg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(intArg) === <span class="string">"[object Number]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">InputValidation.isNumber(<span class="number">111</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><blockquote><p><a href="https://www.cnblogs.com/youhong/p/6209054.html" target="_blank" rel="noopener">为什么用Object.prototype.toString.call(obj)检测对象类型?</a><br>toString为Object的原型方法，而Array 、Function等类型作为Object的实例，都重写了toString方法。不同的对象类型调用toString方法时，根据原型链的知识，调用的是对应的重写之后的toString方法（Function类型返回内容为函数体的字符串，Array类型返回元素组成的字符串…..），而不会去调用Object上原型toString方法（返回对象的具体类型），所以采用obj.toString()不能得到其对象类型，只能将obj转换为字符串类型；因此，在想要得到对象的具体类型时，应该调用Object上原型toString方法。</p></blockquote><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;原型链大法好！&lt;/p&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>更改微信内分享链接</title>
    <link href="https://wangchloe.vip/2019/05/10/blog45/"/>
    <id>https://wangchloe.vip/2019/05/10/blog45/</id>
    <published>2019-05-09T19:27:35.000Z</published>
    <updated>2019-07-24T06:28:10.972Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">wx.ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 分享给朋友</span></span><br><span class="line">    wx.onMenuShareAppMessage(&#123;</span><br><span class="line">        link: shareUrl,</span><br><span class="line">        title: wxFanliConfig.session.title,</span><br><span class="line">        desc: wxFanliConfig.session.desc,</span><br><span class="line">        imgUrl: wxFanliConfig.session.img,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (wagv.inWeiXin &amp;&amp; <span class="keyword">typeof</span> wagv.inWeiXin[<span class="string">"shareAppSuccess"</span>] == <span class="string">"function"</span>) &#123;</span><br><span class="line">                wagv.inWeiXin[<span class="string">"shareAppSuccess"</span>]();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">'分享失败'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分享到朋友圈</span></span><br><span class="line">    wx.onMenuShareTimeline(&#123;</span><br><span class="line">        link: shareUrl,</span><br><span class="line">        title: wxFanliConfig.timeline.title,</span><br><span class="line">        desc: wxFanliConfig.timeline.desc,</span><br><span class="line">        imgUrl: wxFanliConfig.timeline.img,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (wagv.inWeiXin &amp;&amp; <span class="keyword">typeof</span> wagv.inWeiXin[<span class="string">"shareTimelineSuccess"</span>] == <span class="string">"function"</span>) &#123;</span><br><span class="line">                wagv.inWeiXin[<span class="string">"shareTimelineSuccess"</span>]();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">'分享失败'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="微信" scheme="https://wangchloe.vip/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>巴适川渝</title>
    <link href="https://wangchloe.vip/2019/05/04/life7/"/>
    <id>https://wangchloe.vip/2019/05/04/life7/</id>
    <published>2019-05-03T19:12:48.000Z</published>
    <updated>2019-07-23T09:41:35.558Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>巴适滴狠！</p><a id="more"></a><hr><p><a href="https://v.vuevideo.net/share/post/7699160849240349086" target="_blank" rel="noopener">wangchloe 的 Vlog | 巴适川渝</a></p><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;巴适滴狠！&lt;/p&gt;
    
    </summary>
    
      <category term="你好，陌生人" scheme="https://wangchloe.vip/categories/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E9%99%8C%E7%94%9F%E4%BA%BA/"/>
    
    
      <category term="爱旅游" scheme="https://wangchloe.vip/tags/%E7%88%B1%E6%97%85%E6%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>数组倒置拷贝问题</title>
    <link href="https://wangchloe.vip/2019/04/25/blog75/"/>
    <id>https://wangchloe.vip/2019/04/25/blog75/</id>
    <published>2019-04-25T09:46:06.000Z</published>
    <updated>2019-07-30T06:32:35.990Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><p>🐣以小见大</p><!-- MarkdownTOC --><ul><li>引用类型导致的问题</li><li>数组倒置需拷贝至新数组才能不影响原数组</li><li>ES6 数组浅拷贝</li><li>深拷贝实现<ul><li>元素的类型判断</li><li>(1)递归拷贝</li><li>(2)树的广度优先遍历</li><li>(3)JSON解析反解析</li></ul></li><li>应用：vue 父子组件传递数据深拷贝</li></ul><!-- /MarkdownTOC --><a id="more"></a><h3 id="引用类型导致的问题"><a href="#引用类型导致的问题" class="headerlink" title="引用类型导致的问题"></a>引用类型导致的问题</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrA = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> arrB = arrA.reverse();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arrA);  <span class="comment">// [4,3,2,1]</span></span><br><span class="line"><span class="built_in">console</span>.log(arrB);  <span class="comment">// [4,3,2,1]</span></span><br></pre></td></tr></table></figure><h3 id="数组倒置需拷贝至新数组才能不影响原数组"><a href="#数组倒置需拷贝至新数组才能不影响原数组" class="headerlink" title="数组倒置需拷贝至新数组才能不影响原数组"></a>数组倒置需拷贝至新数组才能不影响原数组</h3><ul><li>数组</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrA = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> arrB = arrA.slice(); <span class="comment">// 浅拷贝  **数组倒置需拷贝才能不影响原数组</span></span><br><span class="line"></span><br><span class="line">arrB.reverse();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arrA); <span class="comment">// [1,2,3,4]</span></span><br><span class="line"><span class="built_in">console</span>.log(arrB); <span class="comment">// [4,3,2,1]</span></span><br><span class="line"></span><br><span class="line">arrB[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arrA) <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"><span class="built_in">console</span>.log(arrB) <span class="comment">// [4, 0, 2, 1]</span></span><br></pre></td></tr></table></figure><ul><li>对象</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = [</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">'melin1'</span>,</span><br><span class="line">        job:<span class="string">'111'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">'melin2'</span>,</span><br><span class="line">        job:<span class="string">'222'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">'melin3'</span>,</span><br><span class="line">        job:<span class="string">'333'</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">var</span> copy = obj.slice(<span class="number">0</span>);</span><br><span class="line">copy[<span class="number">1</span>].name = <span class="string">'tom'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="number">1</span>].name); <span class="comment">//tom</span></span><br><span class="line"><span class="built_in">console</span>.log(copy[<span class="number">1</span>].name); <span class="comment">//tom</span></span><br></pre></td></tr></table></figure><blockquote><p>slice可看作浅拷贝，因为如果obj有引用类型的元素，<strong>slice仅仅是复制了元素的地址</strong>。</p><ol><li>如果obj所有值都是<strong>非引用类型</strong>，那么obj.slice(0)与深浅拷贝没有差别；</li><li>如果obj有<strong>引用类型</strong>的元素的话，obj.slice(0)仅仅是复制了元素的地址，obj.slice(0)可看作浅拷贝。</li></ol></blockquote><h3 id="ES6-数组浅拷贝"><a href="#ES6-数组浅拷贝" class="headerlink" title="ES6 数组浅拷贝"></a>ES6 数组浅拷贝</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrA = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> arrB = [...arrA];</span><br><span class="line"></span><br><span class="line">arrB.reverse();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arrA); <span class="comment">// [1,2,3,4]</span></span><br><span class="line"><span class="built_in">console</span>.log(arrB); <span class="comment">// [4,3,2,1]</span></span><br></pre></td></tr></table></figure><hr><p><a href="https://blog.csdn.net/sysuzhyupeng/article/details/70340598" target="_blank" rel="noopener">js实现深拷贝</a></p><h3 id="深拷贝实现"><a href="#深拷贝实现" class="headerlink" title="深拷贝实现"></a>深拷贝实现</h3><h4 id="元素的类型判断"><a href="#元素的类型判断" class="headerlink" title="元素的类型判断"></a>元素的类型判断</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//tostring会返回对应不同的标签的构造函数</span></span><br><span class="line">    <span class="keyword">var</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line">    <span class="keyword">var</span> map = &#123;</span><br><span class="line">       <span class="string">'[object Boolean]'</span>  : <span class="string">'boolean'</span>, </span><br><span class="line">       <span class="string">'[object Number]'</span>   : <span class="string">'number'</span>, </span><br><span class="line">       <span class="string">'[object String]'</span>   : <span class="string">'string'</span>, </span><br><span class="line">       <span class="string">'[object Function]'</span> : <span class="string">'function'</span>, </span><br><span class="line">       <span class="string">'[object Array]'</span>    : <span class="string">'array'</span>, </span><br><span class="line">       <span class="string">'[object Date]'</span>     : <span class="string">'date'</span>, </span><br><span class="line">       <span class="string">'[object RegExp]'</span>   : <span class="string">'regExp'</span>, </span><br><span class="line">       <span class="string">'[object Undefined]'</span>: <span class="string">'undefined'</span>,</span><br><span class="line">       <span class="string">'[object Null]'</span>     : <span class="string">'null'</span>, </span><br><span class="line">       <span class="string">'[object Object]'</span>   : <span class="string">'object'</span></span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> Element) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'element'</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> map[toString.call(obj)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-递归拷贝"><a href="#1-递归拷贝" class="headerlink" title="(1)递归拷贝"></a>(1)递归拷贝</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> type = getType(data);</span><br><span class="line">    <span class="keyword">var</span> obj;</span><br><span class="line">    <span class="keyword">if</span>(type === <span class="string">'array'</span>)&#123;</span><br><span class="line">        obj = [];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(type === <span class="string">'object'</span>)&#123;</span><br><span class="line">        obj = &#123;&#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//不再具有下一层次</span></span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(type === <span class="string">'array'</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, len = data.length; i &lt; len; i++)&#123;</span><br><span class="line">            obj.push(deepClone(data[i]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(type === <span class="string">'object'</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> data)&#123;</span><br><span class="line">            obj[key] = deepClone(data[key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-树的广度优先遍历"><a href="#2-树的广度优先遍历" class="headerlink" title="(2)树的广度优先遍历"></a>(2)树的广度优先遍历</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里为了阅读方便，只深拷贝对象，关于数组的判断参照上面的例子</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> originQueue = [data];</span><br><span class="line">    <span class="keyword">var</span> copyQueue = [obj];</span><br><span class="line">    <span class="comment">//以下两个队列用来保存复制过程中访问过的对象，以此来避免对象环的问题（对象的某个属性值是对象本身）</span></span><br><span class="line">    <span class="keyword">var</span> visitQueue = [];</span><br><span class="line">    <span class="keyword">var</span> copyVisitQueue = [];</span><br><span class="line">    <span class="keyword">while</span>(originQueue.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> _data = originQueue.shift();</span><br><span class="line">        <span class="keyword">var</span> _obj = copyQueue.shift();</span><br><span class="line">        visitQueue.push(_data);</span><br><span class="line">        copyVisitQueue.push(_obj);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> _data)&#123;</span><br><span class="line">            <span class="keyword">var</span> _value = _data[key]</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> _value !== <span class="string">'object'</span>)&#123;</span><br><span class="line">                _obj[key] = _value;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//使用indexOf可以发现数组中是否存在相同的对象(实现indexOf的难点就在于对象比较)</span></span><br><span class="line">                <span class="keyword">var</span> index = visitQueue.indexOf(_value);</span><br><span class="line">                <span class="keyword">if</span>(index &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">// 出现环的情况不需要再取出遍历</span></span><br><span class="line">                    _obj[key] = copyVisitQueue[index];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    originQueue.push(_value);</span><br><span class="line">                    _obj[key] = &#123;&#125;;</span><br><span class="line">                    copyQueue.push(_obj[key]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-JSON解析反解析"><a href="#3-JSON解析反解析" class="headerlink" title="(3)JSON解析反解析"></a>(3)JSON解析反解析</h4><p>深拷贝对象还有另一个解决方法，在<strong>对象中不含有函数</strong>的时候，使用JSON解析反解析就可以得到一个深拷贝对象</p><p><code>JSON.parse(JSON.stringify(obj))</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = [</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">'melin1'</span>,</span><br><span class="line">        job:<span class="string">'111'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">'melin2'</span>,</span><br><span class="line">        job:<span class="string">'222'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">'melin3'</span>,</span><br><span class="line">        job:<span class="string">'333'</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">var</span> copy = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj));</span><br><span class="line">copy[<span class="number">1</span>].name = <span class="string">'tom'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="number">1</span>].name); <span class="comment">//melin2</span></span><br><span class="line"><span class="built_in">console</span>.log(copy[<span class="number">1</span>].name); <span class="comment">//tom</span></span><br></pre></td></tr></table></figure><h2 id="应用：vue-父子组件传递数据深拷贝"><a href="#应用：vue-父子组件传递数据深拷贝" class="headerlink" title="应用：vue 父子组件传递数据深拷贝"></a>应用：vue 父子组件传递数据深拷贝</h2><p>场景：父组件props向子组件传递数据，若为引用类型（数组or对象），子组件改变该数据时会影响父组件数据，不想改变时可以深拷贝该数据再做操作。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;  </span><br><span class="line">   data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">      <span class="keyword">var</span> obj=&#123;&#125;;  </span><br><span class="line">      obj=<span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.templateData));</span><br><span class="line">      <span class="comment">//this.templateData是父组件传递的对象  </span></span><br><span class="line">      <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;🐣以小见大&lt;/p&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;引用类型导致的问题&lt;/li&gt;
&lt;li&gt;数组倒置需拷贝至新数组才能不影响原数组&lt;/li&gt;
&lt;li&gt;ES6 数组浅拷贝&lt;/li&gt;
&lt;li&gt;深拷贝实现&lt;ul&gt;
&lt;li&gt;元素的类型判断&lt;/li&gt;
&lt;li&gt;(1)递归拷贝&lt;/li&gt;
&lt;li&gt;(2)树的广度优先遍历&lt;/li&gt;
&lt;li&gt;(3)JSON解析反解析&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;应用：vue 父子组件传递数据深拷贝&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="项目总结" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>挖坑埋坑填坑</title>
    <link href="https://wangchloe.vip/2019/04/20/blog64/"/>
    <id>https://wangchloe.vip/2019/04/20/blog64/</id>
    <published>2019-04-20T06:44:42.000Z</published>
    <updated>2019-07-25T10:14:48.849Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>css3动画闪烁解决方案</li><li>减少DOM数量，尽可能少的使用position:relative，减少对DOM的操作</li><li>红米手机-圆角外背景色溢出</li><li>小米1s手机-android2.3以下fixed+transform无效</li><li>魅族手机-gmu1.0, 2.0 dialog widget导致样式破坏</li><li>软键盘调出后隐藏，一些fixed元素布局呈现到奇怪的位置</li><li>box-flex不均分问题</li><li>css取消移动端input样式</li></ul><!-- /MarkdownTOC --><a id="more"></a><h3 id="css3动画闪烁解决方案"><a href="#css3动画闪烁解决方案" class="headerlink" title="css3动画闪烁解决方案"></a>css3动画闪烁解决方案</h3><p> 强制把需要进行动画行为的dom对象在GPU中创建Layout缓存<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">-webkit-transform</span><span class="selector-pseudo">:translateZ(0)</span>;</span><br><span class="line"><span class="selector-tag">-webkit-transform-style</span><span class="selector-pseudo">:preserve-3d</span>;</span><br><span class="line"><span class="selector-tag">-webkit-backface-visibility</span><span class="selector-pseudo">:hidden</span>;</span><br></pre></td></tr></table></figure></p><h3 id="减少DOM数量，尽可能少的使用position-relative，减少对DOM的操作"><a href="#减少DOM数量，尽可能少的使用position-relative，减少对DOM的操作" class="headerlink" title="减少DOM数量，尽可能少的使用position:relative，减少对DOM的操作"></a>减少DOM数量，尽可能少的使用position:relative，减少对DOM的操作</h3><h3 id="红米手机-圆角外背景色溢出"><a href="#红米手机-圆角外背景色溢出" class="headerlink" title="红米手机-圆角外背景色溢出"></a>红米手机-圆角外背景色溢出</h3><p>对元素设置圆角及背景色 border-radius:50px;background-color:#000; 四个圆角外会溢出背景色<br>解决方案：增加样式background-clip:padding-box;<br>参考</p><h3 id="小米1s手机-android2-3以下fixed-transform无效"><a href="#小米1s手机-android2-3以下fixed-transform无效" class="headerlink" title="小米1s手机-android2.3以下fixed+transform无效"></a>小米1s手机-android2.3以下fixed+transform无效</h3><p>对fixed元素使用transform,沿着y轴-100%隐藏，等待触发时机<br>解决方案：先将元素隐藏，在触发之前动画之前显示，有动画效果的可以见到，无动画效果的直接显示。</p><h3 id="魅族手机-gmu1-0-2-0-dialog-widget导致样式破坏"><a href="#魅族手机-gmu1-0-2-0-dialog-widget导致样式破坏" class="headerlink" title="魅族手机-gmu1.0, 2.0 dialog widget导致样式破坏"></a>魅族手机-gmu1.0, 2.0 dialog widget导致样式破坏</h3><p>dialog widget容器外宽度无效<br>解决方案：css改变容器min-width</p><h3 id="软键盘调出后隐藏，一些fixed元素布局呈现到奇怪的位置"><a href="#软键盘调出后隐藏，一些fixed元素布局呈现到奇怪的位置" class="headerlink" title="软键盘调出后隐藏，一些fixed元素布局呈现到奇怪的位置"></a>软键盘调出后隐藏，一些fixed元素布局呈现到奇怪的位置</h3><p>调出软键盘后，点击取消，页面隐藏的fixed元素浮出<br>解决方案：调用scrollTo重绘页面<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="built_in">document</span>.body.scrollLeft, <span class="built_in">document</span>.body.scrollTop);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure></p><h3 id="box-flex不均分问题"><a href="#box-flex不均分问题" class="headerlink" title="box-flex不均分问题"></a>box-flex不均分问题</h3><p><a href="http://www.cnblogs.com/leolovexx/p/5857441.html" target="_blank" rel="noopener">box-flex不均分问题</a></p><p>在<code>fui-span0</code> <code>fui-span1</code>…上增加样式<code>width:1%;</code></p><h3 id="css取消移动端input样式"><a href="#css取消移动端input样式" class="headerlink" title="css取消移动端input样式"></a>css取消移动端input样式</h3><ul><li>IOS端：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-tag">background-color</span><span class="selector-pseudo">:transparent</span>; <span class="selector-tag">border-color</span><span class="selector-pseudo">:transparent</span>;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>andorid端：</li></ul><p>仅仅使用上面的代码还不够，可以发现select框在某些浏览器（包括微信）内置浏览器下 还会有箭头以及高亮的线框，要除去这个可以使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--取消webkit默认的样式。--&gt;</span></span></span><br><span class="line"><span class="undefined">-webkit-appearance: none;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;css3动画闪烁解决方案&lt;/li&gt;
&lt;li&gt;减少DOM数量，尽可能少的使用position:relative，减少对DOM的操作&lt;/li&gt;
&lt;li&gt;红米手机-圆角外背景色溢出&lt;/li&gt;
&lt;li&gt;小米1s手机-android2.3以下fixed+transform无效&lt;/li&gt;
&lt;li&gt;魅族手机-gmu1.0, 2.0 dialog widget导致样式破坏&lt;/li&gt;
&lt;li&gt;软键盘调出后隐藏，一些fixed元素布局呈现到奇怪的位置&lt;/li&gt;
&lt;li&gt;box-flex不均分问题&lt;/li&gt;
&lt;li&gt;css取消移动端input样式&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="填坑记" scheme="https://wangchloe.vip/tags/%E5%A1%AB%E5%9D%91%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>多倍屏、刘海屏解决方案</title>
    <link href="https://wangchloe.vip/2019/04/15/blog69/"/>
    <id>https://wangchloe.vip/2019/04/15/blog69/</id>
    <published>2019-04-15T08:02:35.000Z</published>
    <updated>2019-07-25T08:53:17.041Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><p>🙉极客到底！</p><a id="more"></a><h3 id="多倍屏、刘海屏判断逻辑"><a href="#多倍屏、刘海屏判断逻辑" class="headerlink" title="多倍屏、刘海屏判断逻辑"></a>多倍屏、刘海屏判断逻辑</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 一般UA</span></span><br><span class="line"><span class="comment">     * User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_4 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10B350 Safari/8536.25 </span></span><br><span class="line"><span class="comment">     * ua has 'context:com', fefine meta viewport width</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="keyword">var</span> appv = navigator.appVersion;</span><br><span class="line">    <span class="keyword">var</span> html = <span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">var</span> isIos = <span class="regexp">/ip(hone|od|ad)/i</span>.test(ua);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> uaContextReg = <span class="regexp">/context\:([^\s]+)/i</span>;</span><br><span class="line">    <span class="keyword">var</span> tryToGetContext = uaContextReg.exec(ua);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">window</span>.screen.width;</span><br><span class="line">    <span class="keyword">var</span> h = <span class="built_in">window</span>.screen.height;</span><br><span class="line">    <span class="keyword">var</span> ratio = <span class="built_in">window</span>.devicePixelRatio ? <span class="built_in">window</span>.devicePixelRatio : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> vArr, ver;</span><br><span class="line">    <span class="keyword">var</span> dev;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isIos) &#123;</span><br><span class="line">        html.classList.add(<span class="string">"ns-ios"</span>);</span><br><span class="line">        vArr = appv.match(<span class="regexp">/OS (\d+)[_\.](?:\d+)[_\.]?(?:\d+)?/</span>);</span><br><span class="line">        ver = <span class="built_in">parseInt</span>(vArr[<span class="number">1</span>], <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ver &gt;= <span class="number">8</span>) &#123;</span><br><span class="line">            html.classList.add(<span class="string">"ns-hairlines"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(ratio == <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>( w = <span class="number">375</span> &amp;&amp; h == <span class="number">812</span>) &#123; <span class="comment">// iPhone X、iPhone XS</span></span><br><span class="line">                html.classList.add(<span class="string">"ns-ios-bangs"</span>, <span class="string">"ns-ios-x"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( w = <span class="number">414</span> &amp;&amp; h == <span class="number">896</span>) &#123; <span class="comment">// iPhone XS Max</span></span><br><span class="line">                html.classList.add(<span class="string">"ns-ios-bangs"</span>, <span class="string">"ns-ios-xmax"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(ratio == <span class="number">2</span> &amp;&amp; w == <span class="number">414</span> &amp;&amp; h == <span class="number">896</span>) &#123;</span><br><span class="line">            html.classList.add(<span class="string">"ns-ios-bangs"</span>, <span class="string">"ns-ios-xr"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        vArr = appv;</span><br><span class="line">        ver = <span class="built_in">parseInt</span>(ua.substr(ua.indexOf(<span class="string">'android'</span>) + <span class="number">8</span>, <span class="number">3</span>));</span><br><span class="line">        html.classList.add(<span class="string">"ns-android"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (ver &lt; <span class="number">6</span>) &#123;</span><br><span class="line">            html.classList.add(<span class="string">"ns-android-"</span> + ver);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tryToGetContext &amp;&amp; tryToGetContext[<span class="number">1</span>] == <span class="string">'com'</span>) &#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">'meta[name=viewport]'</span>)</span><br><span class="line">            .setAttribute(<span class="string">'content'</span>, <span class="string">'initial-scale=1.0,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// iPhone X、iPhone XS</span></span><br><span class="line"><span class="string">"isIosX"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">3</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">375</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">812</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// iPhone XS Max</span></span><br><span class="line"><span class="string">"isIosXMax"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">3</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">414</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">896</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// iPhone XR</span></span><br><span class="line"><span class="string">"isIosXR"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">2</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">414</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">896</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">"isIosBangs"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> isIosX || isIosXMax || isIosXR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="刘海屏安全距离"><a href="#刘海屏安全距离" class="headerlink" title="刘海屏安全距离"></a>刘海屏安全距离</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ns-ios-bangs</span> <span class="selector-class">.video-info</span> &#123; <span class="attribute">bottom</span>: <span class="built_in">calc</span>(1.28rem + env(safe-area-inset-bottom)); &#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tuan-tabs</span>&#123;<span class="attribute">position</span>:fixed; <span class="attribute">bottom</span>:<span class="number">0</span>; <span class="attribute">left</span>:<span class="number">0</span>; <span class="attribute">width</span>:<span class="number">100%</span>; <span class="attribute">background</span>:<span class="number">#fff</span>; <span class="attribute">z-index</span>:<span class="number">3</span>;&#125;</span><br><span class="line">@<span class="keyword">supports</span> (padding-bottom:constant(safe-area-inset-bottom))&#123;</span><br><span class="line">    <span class="selector-class">.tuan-tabs</span>&#123;<span class="attribute">padding-bottom</span>:<span class="built_in">constant</span>(safe-area-inset-bottom);&#125;&#125; </span><br><span class="line">@<span class="keyword">supports</span> (padding-bottom:env(safe-area-inset-bottom))&#123;</span><br><span class="line">    <span class="selector-class">.tuan-tabs</span>&#123;<span class="attribute">padding-bottom</span>:<span class="built_in">env</span>(safe-area-inset-bottom);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ios11以下 */</span></span><br><span class="line">@<span class="keyword">supports</span> (padding-bottom:constant(safe-area-inset-bottom)) &#123;</span><br><span class="line">    <span class="selector-class">.detail-tab</span>, <span class="selector-class">.detail-buy-panel</span> &#123; <span class="attribute">padding-bottom</span>: <span class="built_in">constant</span>(safe-area-inset-bottom); &#125;</span><br><span class="line">    <span class="selector-class">.detail-buy-panel</span> &#123;<span class="attribute">max-height</span>: <span class="built_in">calc</span>(100% - 2.14rem - 0.6rem); <span class="attribute">background</span>:<span class="number">#fff</span>;&#125;</span><br><span class="line">    <span class="selector-class">.detail-buy-panel</span> <span class="selector-class">.panel-select</span> &#123;<span class="attribute">max-height</span>: <span class="built_in">calc</span>(100vh - 5.22rem - 0.68rem);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ios11以上 */</span></span><br><span class="line">@<span class="keyword">supports</span> (padding-bottom:env(safe-area-inset-bottom)) &#123;</span><br><span class="line">    <span class="selector-class">.detail-tab</span>, <span class="selector-class">.detail-buy-panel</span> &#123; <span class="attribute">padding-bottom</span>: <span class="built_in">env</span>(safe-area-inset-bottom); &#125;</span><br><span class="line">    <span class="selector-class">.detail-buy-panel</span> &#123;<span class="attribute">max-height</span>: <span class="built_in">calc</span>(100% - 2.14rem - 0.6rem); <span class="attribute">background</span>:<span class="number">#fff</span>;&#125;</span><br><span class="line">    <span class="selector-class">.detail-buy-panel</span> <span class="selector-class">.panel-select</span> &#123;<span class="attribute">max-height</span>: <span class="built_in">calc</span>(100vh - 5.22rem - 0.68rem);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ios-1px解决方案"><a href="#ios-1px解决方案" class="headerlink" title="ios 1px解决方案"></a>ios 1px解决方案</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ns-hairlines</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">border-width</span>: .<span class="number">7px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> all and (max-device-width:<span class="number">320px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.ns-hairlines</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">        <span class="attribute">border-width</span>: .<span class="number">5px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;🙉极客到底！&lt;/p&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="项目总结" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
      <category term="css" scheme="https://wangchloe.vip/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>Intellij IDEA建立mac下java开发环境</title>
    <link href="https://wangchloe.vip/2019/04/05/blog44/"/>
    <id>https://wangchloe.vip/2019/04/05/blog44/</id>
    <published>2019-04-04T19:27:35.000Z</published>
    <updated>2019-07-24T06:13:41.451Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><ul><li><code>commond+T</code> 拉取分支</li><li><code>commond+k</code> 提交分枝</li><li><code>shift+shift</code> 全局搜索文件名</li><li><code>control+shift+f</code> 全局搜索内容(.do)</li><li><p><code>command+command</code> maven projects</p><a id="more"></a></li><li><p>文件名 mall.properties 本地查看html效果</p></li><li>文件名 page-config.xml 配置css、js</li><li>新建分支</li></ul><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fm5o3mjyi1j30l10om114.jpg" alt="新建分支"><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5awgmpl9qj30nc0qetgv.jpg" alt="新建分支"></p><blockquote><p>新建分支后更改mall.properties文件内容，增加端口号</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mall.common.api.url=http://service.shzyfl.cn:7101</span><br></pre></td></tr></table></figure><ul><li>端口占用解决方法<br>终端输入占用端口号10100<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:10100</span><br></pre></td></tr></table></figure></li></ul><p>显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COMMAND  PID    USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME</span><br><span class="line">java    1372 wangjie   18u  IPv6 0x40969a7cc34a9943      0t0  TCP *:itap-ddtp (LISTEN)</span><br></pre></td></tr></table></figure></p><p>kill该端口进程PID<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 1372</span><br></pre></td></tr></table></figure></p><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;commond+T&lt;/code&gt; 拉取分支&lt;/li&gt;
&lt;li&gt;&lt;code&gt;commond+k&lt;/code&gt; 提交分枝&lt;/li&gt;
&lt;li&gt;&lt;code&gt;shift+shift&lt;/code&gt; 全局搜索文件名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;control+shift+f&lt;/code&gt; 全局搜索内容(.do)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;command+command&lt;/code&gt; maven projects&lt;/p&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="java" scheme="https://wangchloe.vip/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>征服宝岛～</title>
    <link href="https://wangchloe.vip/2019/04/01/life6/"/>
    <id>https://wangchloe.vip/2019/04/01/life6/</id>
    <published>2019-03-31T19:12:48.000Z</published>
    <updated>2019-07-23T09:38:45.104Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>世界多大，老汪的脚步就迈多大！PS：🇨🇳台湾真好吃</p><a id="more"></a><p><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59wjj0d8wj31bq0u0e82.jpg" alt="史上超强自制攻略"></p><hr><p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqi6df9j30rs15oaix.jpg" alt=""><br><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g59wqi0bnnj30rs15owln.jpg" alt=""><br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g59wqhui4kj30rs15ogt1.jpg" alt=""><br><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g59wqghp3uj30u00u0dlc.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqfxuvtj30u00u0wjj.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqfrqfej30rs15o12k.jpg" alt=""><br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59wqhp5r4j30u00u0thd.jpg" alt=""><br><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g59wqhighuj30u00u0gw4.jpg" alt=""><br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59wqgn8gyj30u00u047u.jpg" alt=""></p><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;世界多大，老汪的脚步就迈多大！PS：🇨🇳台湾真好吃&lt;/p&gt;
    
    </summary>
    
      <category term="你好，陌生人" scheme="https://wangchloe.vip/categories/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E9%99%8C%E7%94%9F%E4%BA%BA/"/>
    
    
      <category term="爱旅游" scheme="https://wangchloe.vip/tags/%E7%88%B1%E6%97%85%E6%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>承接页问题汇总</title>
    <link href="https://wangchloe.vip/2019/03/25/blog52/"/>
    <id>https://wangchloe.vip/2019/03/25/blog52/</id>
    <published>2019-03-25T07:00:04.000Z</published>
    <updated>2019-07-24T07:00:04.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><a id="more"></a><h2 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构"></a>页面结构</h2><ul><li><p>承接页</p><ul><li>单个商品+品牌一排一个商品+猜你喜欢一排两列商品</li><li><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g1etu8gs40j30u03q6b2c.jpg" alt=""></li><li>置顶效果</li><li><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g1etv6irx8j30u01hd1kx.jpg" alt=""></li></ul></li><li><p>品牌页</p><ul><li>品牌一排一个商品+猜你喜欢一排两列商品</li><li><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1etvs203qj30u02uzx6q.jpg" alt=""></li><li>置顶效果</li><li><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1etvuyy5lj30u02uzhdv.jpg" alt=""></li></ul></li></ul><h2 id="遇到问题"><a href="#遇到问题" class="headerlink" title="遇到问题"></a>遇到问题</h2><h3 id="1-有fixed-bar的情况下还需优惠券置顶"><a href="#1-有fixed-bar的情况下还需优惠券置顶" class="headerlink" title="1. 有fixed bar的情况下还需优惠券置顶"></a>1. 有fixed bar的情况下还需优惠券置顶</h3><ul><li><p>方案1: append <code>$(&quot;.page-bar&quot;).append($(&quot;#J_coupon&quot;))</code>✘</p><ul><li>优点：不需要为<code>$(&quot;#J_coupon&quot;)</code>增加fixed样式</li><li>缺点：如果券已向右滑动，不便于保持滑动状态，需iscroll/记录translateX(..)</li></ul></li><li><p>方案2: <code>$(&quot;#J_coupon.fixed&quot;)</code> ✔︎</p><ul><li>优点：能保持券状态</li><li>缺点：需要为<code>$(&quot;#J_coupon&quot;)</code>增加fixed样式</li></ul></li></ul><h3 id="2-滚动需监听事件颇多-目前方案不是最优"><a href="#2-滚动需监听事件颇多-目前方案不是最优" class="headerlink" title="2. 滚动需监听事件颇多 (目前方案不是最优)"></a>2. 滚动需监听事件颇多 (目前方案不是最优)</h3><ul><li><strong>bar</strong></li><li><strong>券</strong></li><li><strong>查看更多xx件商品</strong></li><li><strong>右下角置顶按钮</strong><ul><li>品牌商品数量 &gt; 20<ul><li>下滑 展示当前已浏览数量</li><li>上滑 展示置顶按钮</li></ul></li><li>品牌商品数量 &lt;= 20<ul><li>展示置顶按钮</li></ul></li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">bindScroll: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $relate = $(<span class="string">"#J_relate"</span>);</span><br><span class="line">    <span class="keyword">var</span> $brand = $(<span class="string">"#J_brand"</span>);</span><br><span class="line">    <span class="keyword">var</span> $coupon = $(<span class="string">"#J_coupon"</span>);</span><br><span class="line">    <span class="keyword">var</span> $couponSpacer = $(<span class="string">"#J_coupon_spacer"</span>);</span><br><span class="line">    <span class="keyword">var</span> barHeight = $(<span class="string">"#J_page_bar"</span>).outerHeight();</span><br><span class="line">    brandTop = $brand.length &amp;&amp; $brand.offset().top &gt; <span class="number">0</span> ? ($brand.offset().top - (<span class="keyword">this</span>.isPageBrand ? barHeight : <span class="number">0</span>)) : <span class="number">0</span>;</span><br><span class="line">    couponTop = $couponSpacer.length ? $couponSpacer.offset().top - barHeight : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> relateTop = $relate.length &amp;&amp; $relate.offset().top &gt; <span class="number">0</span> ? <span class="keyword">this</span>.isBrandManji ? $relate.offset().top - (<span class="keyword">this</span>.isPageBrand ? (barHeight + $coupon.outerHeight() ) : (barHeight + $coupon.height() - <span class="built_in">parseFloat</span>(<span class="number">.3</span> * htmlFS))) : $relate.offset().top - barHeight : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> brandColH = <span class="keyword">this</span>.isBrandManji ? <span class="built_in">parseFloat</span>(<span class="number">2.6</span> * htmlFS) : <span class="built_in">parseFloat</span>(<span class="number">1.48</span> * htmlFS);</span><br><span class="line">    <span class="keyword">var</span> brandItemH = <span class="built_in">parseFloat</span>(<span class="number">3.18</span> * htmlFS);</span><br><span class="line">    <span class="keyword">var</span> n = brandTop + brandColH - $win.height();</span><br><span class="line">    <span class="keyword">var</span> inRelate = <span class="literal">false</span>,</span><br><span class="line">        pgCFixed = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> curTop = <span class="number">0</span>,</span><br><span class="line">        beTop = <span class="number">0</span>,</span><br><span class="line">        stand = <span class="number">0</span>;</span><br><span class="line">    that.manji = that.isBrandManji;</span><br><span class="line"></span><br><span class="line">    $win.on(<span class="string">'scroll.HUB'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        curTop = <span class="built_in">parseFloat</span>($win.scrollTop());</span><br><span class="line">        <span class="keyword">if</span> (curTop == <span class="number">0</span>) &#123; <span class="comment">// 显示更多悬浮 隐藏置顶悬浮 隐藏bar 隐藏优惠券 off监听</span></span><br><span class="line">            that.showMore = <span class="literal">true</span>;</span><br><span class="line">            that.goTopShow = <span class="literal">false</span>;</span><br><span class="line">            that.scroll = <span class="literal">false</span>;</span><br><span class="line">            $doc.off(<span class="string">"touchmove.HUB"</span>);</span><br><span class="line">            that.inBrand = <span class="literal">false</span>;</span><br><span class="line">            that.cfixed = <span class="literal">false</span>;</span><br><span class="line">            inRelate = <span class="literal">false</span>;</span><br><span class="line">            pgCFixed = <span class="literal">false</span>;</span><br><span class="line">            that.manji = that.isBrandManji;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curTop &gt; <span class="number">0</span> &amp;&amp; ((brandTop &amp;&amp; curTop &lt; brandTop) || (!brandTop &amp;&amp; curTop &lt; relateTop))) &#123; <span class="comment">// 隐藏更多悬浮 隐藏置顶悬浮 隐藏bar 隐藏优惠券 off监听</span></span><br><span class="line">            that.showMore = <span class="literal">false</span>;</span><br><span class="line">            that.goTopShow = <span class="literal">false</span>;</span><br><span class="line">            that.scroll = <span class="literal">false</span>;</span><br><span class="line">            $doc.off(<span class="string">"touchmove.HUB"</span>);</span><br><span class="line">            that.inBrand = <span class="literal">false</span>;</span><br><span class="line">            that.cfixed = <span class="literal">false</span>;</span><br><span class="line">            inRelate = <span class="literal">false</span>;</span><br><span class="line">            pgCFixed = <span class="literal">false</span>;</span><br><span class="line">            that.manji = that.isBrandManji;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (brandTop &amp;&amp; curTop &gt; brandTop &amp;&amp; (relateTop &amp;&amp; curTop &lt; relateTop) || !relateTop) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!that.inBrand) &#123; <span class="comment">// inBrand 第一次 显示置顶悬浮 显示bar 显示优惠券</span></span><br><span class="line">                that.inBrand = <span class="literal">true</span>;</span><br><span class="line">                that.goTopShow = <span class="literal">true</span>;</span><br><span class="line">                that.showMore = <span class="literal">false</span>;</span><br><span class="line">                that.scroll = <span class="literal">true</span>;</span><br><span class="line">                inRelate = <span class="literal">false</span>;</span><br><span class="line">                pgCFixed = <span class="literal">false</span>;</span><br><span class="line">                that.manji = that.isBrandManji;</span><br><span class="line">                <span class="keyword">if</span> (that.isPageBrand) &#123;</span><br><span class="line">                    that.cfixed = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">if</span>(!pgCFixed &amp;&amp; curTop &gt;= couponTop) &#123;</span><br><span class="line">                        pgCFixed = <span class="literal">true</span>;</span><br><span class="line">                        that.cfixed = that.isBrandManji;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    that.cfixed = that.isBrandManji;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                that.barTitle = that.brandTitle;</span><br><span class="line">                <span class="keyword">if</span> (that.brandNum &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                    stand = <span class="built_in">Math</span>.ceil((curTop - n) / brandItemH);</span><br><span class="line">                    that.divide = stand &gt; that.brandNum ? that.brandNum : stand;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// 向上/向下 计算滑动个数</span></span><br><span class="line">                <span class="keyword">if</span> (that.isPageBrand &amp;&amp; !pgCFixed &amp;&amp; curTop &gt;= couponTop) &#123;</span><br><span class="line">                    pgCFixed = <span class="literal">true</span>;</span><br><span class="line">                    that.cfixed = that.isBrandManji;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (pgCFixed &amp;&amp; curTop &lt; couponTop) &#123;</span><br><span class="line">                    that.cfixed = <span class="literal">false</span>;</span><br><span class="line">                    that.manji = that.isBrandManji;</span><br><span class="line">                    pgCFixed = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (curTop &lt; beTop &amp;&amp; that.down) &#123; <span class="comment">// 向上</span></span><br><span class="line">                    that.down = <span class="literal">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curTop &gt; beTop &amp;&amp; !that.down) &#123; <span class="comment">// 向下</span></span><br><span class="line">                    that.down = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                beTop = curTop;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (that.brandNum &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                    stand = <span class="built_in">Math</span>.ceil((curTop - n) / brandItemH);</span><br><span class="line">                    that.divide = stand &gt; that.brandNum ? that.brandNum : stand;</span><br><span class="line">                    $doc.on(<span class="string">"touchmove.HUB"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                        stand = <span class="built_in">Math</span>.ceil((curTop - n) / brandItemH);</span><br><span class="line">                        that.divide = stand &gt; that.brandNum ? that.brandNum : stand;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (relateTop &amp;&amp; curTop &gt; relateTop &amp;&amp; !inRelate) &#123; <span class="comment">// inRelate 隐藏优惠券 off监听</span></span><br><span class="line">            inRelate = <span class="literal">true</span>;</span><br><span class="line">            pgCFixed = <span class="literal">false</span>;</span><br><span class="line">            that.inBrand = <span class="literal">false</span>;</span><br><span class="line">            that.cfixed = <span class="literal">false</span>;</span><br><span class="line">            that.showMore = <span class="literal">false</span>;</span><br><span class="line">            that.goTopShow = <span class="literal">true</span>;</span><br><span class="line">            that.scroll = <span class="literal">true</span>;</span><br><span class="line">            that.manji = <span class="literal">false</span>;</span><br><span class="line">            $doc.off(<span class="string">"touchmove.HUB"</span>);</span><br><span class="line">            that.barTitle = <span class="string">"猜你喜欢"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1ez9l6zw2j30c80c274o.jpg" alt=""></p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1ez9nxix6j306c03kaa1.jpg" alt=""></p><h4 id="后期优化"><a href="#后期优化" class="headerlink" title="后期优化"></a>后期优化</h4><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1g1ezax6t2wj30k0032mx5.jpg" alt=""></p><h5 id="优化scroll性能"><a href="#优化scroll性能" class="headerlink" title="优化scroll性能"></a>优化scroll性能</h5><ul><li>函数节流<ul><li>当持续触发事件时，debounce 会合并事件且不会去触发事件，当一定时间内没有触发再这个事件时，才真正去触发事件。</li><li>适用于多次提交（commit）的场景，如点击按钮提交发送请求的情况</li></ul></li><li><p>函数防抖</p><ul><li>持续触发事件时，throttle 会合并一定时间内的事件，并在该时间结束时真正去触发一次事件。</li><li>适用于scroll/resize等场景</li></ul></li><li><p>=&gt; 节流方案</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> didScroll = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    didScroll = <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( didScroll ) &#123;</span><br><span class="line">        didScroll = <span class="literal">false</span>;</span><br><span class="line">        fun();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">250</span>);</span><br></pre></td></tr></table></figure><h5 id="优化渲染方式"><a href="#优化渲染方式" class="headerlink" title="优化渲染方式"></a>优化渲染方式</h5><ul><li><p>当访问scrollWidth系列、clientHeight系列、offsetTop系列、ComputedStyle等属性时，会JS强制重排，导致Style和Layout前移到JS代码执行过程中</p></li><li><p>使用<code>requestAnimationFrame()</code>，将以上特殊操作汇集并延迟入队</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> newScrollTop = <span class="keyword">this</span>.getPosition(<span class="keyword">this</span>.panes[index].$refs.content).top - <span class="keyword">this</span>.distance</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollStep</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.documentElement.scrollTop += <span class="number">5</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.documentElement.scrollTop &lt; newScrollTop) &#123;</span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame(scrollStep)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.requestAnimationFrame(scrollStep);</span><br></pre></td></tr></table></figure><h5 id="做位移效果时使用tranform代替top-left-bottom-right"><a href="#做位移效果时使用tranform代替top-left-bottom-right" class="headerlink" title="做位移效果时使用tranform代替top/left/bottom/right"></a>做位移效果时使用tranform代替top/left/bottom/right</h5><ul><li><code>top/left/bottom/right</code>这类属性会影响元素在文档中的布局，可能改变其他元素的位置，引起重排，造成性能开销</li><li>使用<code>transform属性（3D/animation）</code>将元素提升至合成层，省去布局和绘制环节<ul><li><code>合成层</code>： 合成层的位图，会交由 GPU 合成，比 CPU 处理要快。当需要 repaint 时，只需要 repaint 本身，不会影响到其他的层。</li></ul></li></ul><h3 id="3-提醒组件"><a href="#3-提醒组件" class="headerlink" title="3. 提醒组件"></a>3. 提醒组件</h3><ul><li><code>static/super/src/h5/js/common/subscribe-jq.js</code></li></ul><p>增加callback</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> bindSub: <span class="function"><span class="keyword">function</span>(<span class="params">selector, spmSub, spmCancel, item</span>) </span>&#123;</span><br><span class="line">    Super.H5.Common.SubScribe(&#123;</span><br><span class="line">        triggerSelector: selector,</span><br><span class="line">        isNeedLogin: <span class="literal">true</span>,</span><br><span class="line">        isToast: <span class="literal">true</span>,</span><br><span class="line">        subsrcibeSelectorText: <span class="string">"提醒我"</span>,</span><br><span class="line">        toastSubsrcibedVal: <span class="string">"已取消提醒和收藏"</span>,</span><br><span class="line">        toastUnsubsrcibeVal: <span class="string">'已设置提醒并收藏成功'</span>,</span><br><span class="line">        subCallback: <span class="function"><span class="keyword">function</span>(<span class="params">itemId</span>) </span>&#123;</span><br><span class="line">            $.getJSON(ajaxAddSubUrl, &#123;</span><br><span class="line">                item_id: itemId,</span><br><span class="line">                t: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">            &#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">                UBT.track(spmSub);</span><br><span class="line">                <span class="keyword">if</span> (item) &#123;</span><br><span class="line">                    Vue.set(item, <span class="string">'isSubscribe'</span>, <span class="literal">true</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        unSubCallback: <span class="function"><span class="keyword">function</span>(<span class="params">itemId</span>) </span>&#123;</span><br><span class="line">            $.getJSON(ajaxAddSubUrl, &#123;</span><br><span class="line">                item_id: itemId,</span><br><span class="line">                t: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">            &#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">                UBT.track(spmCancel);</span><br><span class="line">                <span class="keyword">if</span> (item) &#123;</span><br><span class="line">                    Vue.set(item, <span class="string">'isSubscribe'</span>, <span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-iphoneX-1px边框问题-（若遇到相同问题，可进一步公用）"><a href="#4-iphoneX-1px边框问题-（若遇到相同问题，可进一步公用）" class="headerlink" title="4. iphoneX 1px边框问题 （若遇到相同问题，可进一步公用）"></a>4. iphoneX 1px边框问题 （若遇到相同问题，可进一步公用）</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*fl hairlines */</span></span><br><span class="line"><span class="selector-class">.fl-hairlines</span> <span class="selector-class">.border1px</span>&#123;<span class="attribute">border-width</span>:<span class="number">0.5px</span>;&#125;</span><br><span class="line"><span class="selector-class">.b1px</span> &#123; <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>; &#125;</span><br><span class="line"><span class="selector-class">.fl-hairlines</span> <span class="selector-class">.b1px</span> &#123; <span class="attribute">border-width</span>: <span class="number">0.7px</span>;&#125;</span><br><span class="line"> @<span class="keyword">media</span> all and (max-device-width:<span class="number">320px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.fl-hairlines</span><span class="selector-class">.fl-iphone</span> <span class="selector-class">.b1px</span> &#123;<span class="attribute">border-width</span>: <span class="number">0.5px</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>1px在用了hairlines能解决大部分，但在iphoneX的呈现上会出现<strong>上细下粗且有毛边</strong></p></li><li><p>当前解决方案：针对<code>iphonex</code>，去掉原有border，将border写为<code>:before</code>/<code>:after</code>定位在按钮上，当前测试border宽度宜为<code>.8px</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> only screen and (device-width:<span class="number">375px</span>) and (device-height:<span class="number">812px</span>) and (-webkit-device-pixel-ratio:<span class="number">3</span>) &#123;</span><br><span class="line"><span class="selector-class">.fl-hairlines</span><span class="selector-class">.fl-iphone</span> <span class="selector-class">.brand-list</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">content</span>: <span class="string">""</span>; <span class="attribute">position</span>: absolute; <span class="attribute">top</span>: .<span class="number">8px</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">width</span>: <span class="number">1.4rem</span>; <span class="attribute">height</span>: .<span class="number">5rem</span>; <span class="attribute">border</span>: .<span class="number">8px</span> solid <span class="number">#F10C10</span>; <span class="attribute">border-radius</span>: .<span class="number">25rem</span>; <span class="attribute">box-sizing</span>: border-box; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-iphoneX公用"><a href="#5-iphoneX公用" class="headerlink" title="5. iphoneX公用"></a>5. iphoneX公用</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">supports</span> (padding-bottom:constant(safe-area-inset-bottom))&#123;</span><br><span class="line">    <span class="selector-class">.nav-foot</span>&#123;<span class="attribute">padding-bottom</span>:<span class="built_in">constant</span>(safe-area-inset-bottom);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>static/webapp/js/common/attrsniffer.js</code></li><li><code>static/webapp/js/base.js</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isIos) &#123;</span><br><span class="line">    html.classList.add(<span class="string">"fl-ios"</span>);</span><br><span class="line">    vArr = appv.match(<span class="regexp">/OS (\d+)[_\.](?:\d+)[_\.]?(?:\d+)?/</span>);</span><br><span class="line">    ver = <span class="built_in">parseInt</span>(vArr[<span class="number">1</span>], <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ver &gt;= <span class="number">8</span>) &#123;</span><br><span class="line">        html.classList.add(<span class="string">"fl-hairlines"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(ratio == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>( w = <span class="number">375</span> &amp;&amp; h == <span class="number">812</span>) &#123; <span class="comment">// iPhone X、iPhone XS</span></span><br><span class="line">            html.classList.add(<span class="string">"fl-ios-bangs"</span>, <span class="string">"fl-ios-x"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( w = <span class="number">414</span> &amp;&amp; h == <span class="number">896</span>) &#123; <span class="comment">// iPhone XS Max</span></span><br><span class="line">            html.classList.add(<span class="string">"fl-ios-bangs"</span>, <span class="string">"fl-ios-xmax"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(ratio == <span class="number">2</span> &amp;&amp; w == <span class="number">414</span> &amp;&amp; h == <span class="number">896</span>) &#123;</span><br><span class="line">        html.classList.add(<span class="string">"fl-ios-bangs"</span>, <span class="string">"fl-ios-xr"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    vArr = appv;</span><br><span class="line">    ver = <span class="built_in">parseInt</span>(ua.substr(ua.indexOf(<span class="string">'android'</span>) + <span class="number">8</span>, <span class="number">3</span>));</span><br><span class="line">    html.classList.add(<span class="string">"fl-android"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ver &lt; <span class="number">6</span>) &#123;</span><br><span class="line">        html.classList.add(<span class="string">"fl-android-"</span> + ver);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// iPhone X、iPhone XS</span></span><br><span class="line"><span class="string">"isIosX"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">3</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">375</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">812</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// iPhone XS Max</span></span><br><span class="line"><span class="string">"isIosXMax"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">3</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">414</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">896</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// iPhone XR</span></span><br><span class="line"><span class="string">"isIosXR"</span>: <span class="regexp">/ip(hone|od|ad)/i</span>.test(navigator.userAgent.toLowerCase()) &amp;&amp; <span class="built_in">window</span>.devicePixelRatio === <span class="number">2</span> &amp;&amp; <span class="built_in">window</span>.screen.width === <span class="number">414</span> &amp;&amp; <span class="built_in">window</span>.screen.height === <span class="number">896</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">"isIosBangs"</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Fanli.Utility.isIosX || Fanli.Utility.isIosXMax || Fanli.Utility.isIosXR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-圆角悬浮动效"><a href="#6-圆角悬浮动效" class="headerlink" title="6. 圆角悬浮动效"></a>6. 圆角悬浮动效</h3><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1g119qw0ovgj30vt04576k.jpg" alt=""></p><p>ui想要的效果：</p><ul><li>边上滑边收圆角</li><li>页面从z轴分为三层：背景图层，页面滚动层，bar层</li></ul><p>实现：</p><ul><li>圆角：切出一行圆角png图</li><li>背景图做一个div background-image <code>z-index:-1;position:fixed;</code></li><li>bar层做一个div，限制高度，并且background: url(xxx) no-repeat top; 保证从视觉是bar层的背景图是一直在背景图层的</li><li>券层虽跟bar层在一个平面，但因为独立fixed，所以也加上background</li></ul><h3 id="7-skeleton骨架屏切换"><a href="#7-skeleton骨架屏切换" class="headerlink" title="7. skeleton骨架屏切换"></a>7. skeleton骨架屏切换</h3><ul><li>vue-router</li></ul><p><code>this.$route.name</code></p><ul><li>Fanli.Utility.getUrlParam(url, name)</li></ul><p><code>Fanli.Utility.getUrlParam(href, &#39;isbrand&#39;) == 1</code></p><h3 id="8-滚动加载-async-data"><a href="#8-滚动加载-async-data" class="headerlink" title="8. 滚动加载 async-data"></a>8. 滚动加载 async-data</h3><ul><li><code>static/super/src/h5/css/common/async-data.css</code></li><li><code>static/super/src/h5/js/common/async-data.vue.js</code></li></ul><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="项目总结" scheme="https://wangchloe.vip/tags/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>vue小记</title>
    <link href="https://wangchloe.vip/2019/03/24/blog49/"/>
    <id>https://wangchloe.vip/2019/03/24/blog49/</id>
    <published>2019-03-24T06:39:21.000Z</published>
    <updated>2019-07-24T06:58:28.550Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><a id="more"></a><h3 id="v-html使用filter"><a href="#v-html使用filter" class="headerlink" title="v-html使用filter"></a>v-html使用filter</h3><p><code>v-html=&quot;$options.filters.highlight(option.title)&quot;</code></p><h3 id="销毁window-scroll"><a href="#销毁window-scroll" class="headerlink" title="销毁window.scroll"></a>销毁window.scroll</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mounted()&#123;</span><br><span class="line">   <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.scrollListener,<span class="literal">false</span>)</span><br><span class="line">&#125;,</span><br><span class="line">destroyed()&#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>,<span class="keyword">this</span>.scrollListener,<span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="vue" scheme="https://wangchloe.vip/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>Array高阶函数</title>
    <link href="https://wangchloe.vip/2019/02/26/blog76/"/>
    <id>https://wangchloe.vip/2019/02/26/blog76/</id>
    <published>2019-02-26T08:46:58.000Z</published>
    <updated>2019-07-26T09:40:14.370Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><!-- MarkdownTOC --><ul><li>filter</li><li>map</li><li>reduce<ul><li>计算重复单词</li><li>array.reduce(fn, value)<ul><li>累加</li><li>初始值的重要性</li></ul></li></ul></li><li>sort<ul><li>添加函数</li></ul></li><li>every</li><li>forEach</li><li>$.inArray()</li><li>应用</li></ul><!-- /MarkdownTOC --><a id="more"></a><p><a href="https://blog.csdn.net/wbiokr/article/details/65939582" target="_blank" rel="noopener">ES6—数组array新增方法</a></p><p><a href="https://www.jb51.net/article/60502.htm" target="_blank" rel="noopener">5个数组Array方法: indexOf、filter、forEach、map、reduce使用实例</a></p><p><a href="https://zhuanlan.zhihu.com/p/28835709" target="_blank" rel="noopener">【译】高阶函数：利用Filter、Map和Reduce来编写更易维护的代码</a></p><ul><li>forEach没有返回值，重点是function里面处理逻辑</li><li>map有返回值，重点是function返回值，组成新数组</li><li>filter有返回值，重点是function返回值，过滤之后组成新数组</li><li>reduce有返回值，重点是计算数组，返回一个值</li></ul><blockquote><p>一个函数就可以接收另一个函数作为参数，这种函数就称之为高阶函数。</p></blockquote><h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><blockquote><p>创建一个<strong>新</strong>的<strong>匹配过滤条件</strong>的数组。</p><ul><li>filter() 不会对空数组进行检测</li><li>filter() 不会改变原始数组</li></ul></blockquote><p><code>array.filter(function(currentValue,index,arr), thisValue)</code></p><p>返回Array 类型//符合条件的值组成的数组</p><ul><li>不用filter()时</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"apple"</span>, <span class="string">"count"</span>: <span class="number">2</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"orange"</span>, <span class="string">"count"</span>: <span class="number">5</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"pear"</span>, <span class="string">"count"</span>: <span class="number">3</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"orange"</span>, <span class="string">"count"</span>: <span class="number">16</span>&#125;,</span><br><span class="line">];</span><br><span class="line">   </span><br><span class="line"><span class="keyword">var</span> newArr = [];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>, l = arr.length; i&lt; l; i++)&#123;</span><br><span class="line">  <span class="keyword">if</span>(arr[i].name === <span class="string">"orange"</span> )&#123;</span><br><span class="line">newArr.push(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Filter results:"</span>,newArr);</span><br></pre></td></tr></table></figure><ul><li>用filter()时</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"apple"</span>, <span class="string">"count"</span>: <span class="number">2</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"orange"</span>, <span class="string">"count"</span>: <span class="number">5</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"pear"</span>, <span class="string">"count"</span>: <span class="number">3</span>&#125;,</span><br><span class="line">  &#123;<span class="string">"name"</span>:<span class="string">"orange"</span>, <span class="string">"count"</span>: <span class="number">16</span>&#125;,</span><br><span class="line">];</span><br><span class="line">   </span><br><span class="line"><span class="keyword">var</span> newArr = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item.name === <span class="string">"orange"</span>;</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Filter results:"</span>,newArr);</span><br></pre></td></tr></table></figure><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><blockquote><p>map()对数组的每个元素进行一定操作（映射）后，会返回一个新的数组。</p></blockquote><p>返回 array 数组// 每个回调的返回值组成的新数组</p><ul><li>不用map()时</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oldArr = [&#123;<span class="attr">first_name</span>:<span class="string">"Colin"</span>,<span class="attr">last_name</span>:<span class="string">"Toh"</span>&#125;,&#123;<span class="attr">first_name</span>:<span class="string">"Addy"</span>,<span class="attr">last_name</span>:<span class="string">"Osmani"</span>&#125;,&#123;<span class="attr">first_name</span>:<span class="string">"Yehuda"</span>,<span class="attr">last_name</span>:<span class="string">"Katz"</span>&#125;];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNewArr</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">var</span> newArr = [];</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>, l = oldArr.length; i&lt; l; i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> item = oldArr[i];</span><br><span class="line">    item.full_name = [item.first_name,item.last_name].join(<span class="string">" "</span>);</span><br><span class="line">    newArr[i] = item;</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">return</span> newArr;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(getNewArr());</span><br></pre></td></tr></table></figure><ul><li>用map()时</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oldArr = [&#123;<span class="attr">first_name</span>:<span class="string">"Colin"</span>,<span class="attr">last_name</span>:<span class="string">"Toh"</span>&#125;,&#123;<span class="attr">first_name</span>:<span class="string">"Addy"</span>,<span class="attr">last_name</span>:<span class="string">"Osmani"</span>&#125;,&#123;<span class="attr">first_name</span>:<span class="string">"Yehuda"</span>,<span class="attr">last_name</span>:<span class="string">"Katz"</span>&#125;];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNewArr</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     </span><br><span class="line">  <span class="keyword">return</span> oldArr.map(<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line">    item.full_name = [item.first_name,item.last_name].join(<span class="string">" "</span>);</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;);</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(getNewArr());</span><br></pre></td></tr></table></figure><p><a href="https://juejin.im/entry/5beb69746fb9a049bd41d815?utm_source=gold_browser_extension" target="_blank" rel="noopener">你应该知道的 JavaScript Array.map() 的 5 种用途</a></p><h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><blockquote><p>实现一个累加器的功能，将数组的每个值（从左到右）将其降低到一个值。</p></blockquote><p>返回最后一次回调的值</p><p>相当于<code>[x1, x2, x3, x4].reduce(f) = f(f(f(x1, x2), x3), x4)</code></p><h3 id="计算重复单词"><a href="#计算重复单词" class="headerlink" title="计算重复单词"></a>计算重复单词</h3><ul><li>不用reduce()时</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"apple"</span>,<span class="string">"orange"</span>,<span class="string">"apple"</span>,<span class="string">"orange"</span>,<span class="string">"pear"</span>,<span class="string">"orange"</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWordCnt</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>, l = arr.length; i&lt; l; i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> item = arr[i];</span><br><span class="line">    obj[item] = (obj[item] +<span class="number">1</span> ) || <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(getWordCnt()); <span class="comment">// &#123;apple: 2, orange: 3, pear: 1&#125;</span></span><br></pre></td></tr></table></figure><ul><li>用reduce()时</li></ul><blockquote><p>注意reduce内function后的{}</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"apple"</span>,<span class="string">"orange"</span>,<span class="string">"apple"</span>,<span class="string">"orange"</span>,<span class="string">"pear"</span>,<span class="string">"orange"</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWordCnt</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">prev,next</span>)</span>&#123;</span><br><span class="line">    prev[next] = (prev[next] + <span class="number">1</span>) || <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">  &#125;,&#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(getWordCnt());</span><br></pre></td></tr></table></figure><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fujspdmnbej30dc08qjsf.jpg" alt=""></p><h3 id="array-reduce-fn-value"><a href="#array-reduce-fn-value" class="headerlink" title="array.reduce(fn, value)"></a>array.reduce(fn, value)</h3><p><code>array.reduce(function(total, currentValue, currentIndex, arr), initialValue)</code></p><ul><li>total    必需。初始值, 或者计算结束后的返回值。</li><li>currentValue    必需。当前元素</li><li>currentIndex    可选。当前元素的索引</li><li>arr    可选。当前元素所属的数组对象。</li><li><strong>initialValue 可选。传递给函数的初始值</strong></li></ul><h4 id="累加"><a href="#累加" class="headerlink" title="累加"></a>累加</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">65</span>, <span class="number">44</span>, <span class="number">12</span>, <span class="number">4</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSum</span>(<span class="params">total, num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> total + num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>).innerHTML = numbers.reduce(getSum); <span class="comment">// 125</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="初始值的重要性"><a href="#初始值的重要性" class="headerlink" title="初始值的重要性"></a>初始值的重要性</h4><blockquote><p>一般来讲prev是从数组中第一个元素开始的，next是第二个元素。但是当你<strong>传入初始值(initialValue)后，第一个prev将是initivalValue，next将是数组中的第一个元素</strong>。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"apple"</span>,<span class="string">"orange"</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">noPassValue</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">prev,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"prev:"</span>,prev);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"next:"</span>,next);</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">return</span> prev + <span class="string">" "</span> +next;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">passValue</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">prev,next</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"prev:"</span>,prev);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"next:"</span>,next);</span><br><span class="line">     </span><br><span class="line">    prev[next] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">  &#125;,&#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"No Additional parameter:"</span>,noPassValue());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"----------------"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"With &#123;&#125; as an additional parameter:"</span>,passValue());</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fujt1qypj8j30cb05iaae.jpg" alt=""></p><h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><blockquote><p>数组排序<br>PS: 字符串根据ASCII码进行排序 eg: A-65 a-97</p></blockquote><p><strong>Array的sort()方法默认把所有元素先转换为String再排序！</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'Banana'</span>, <span class="string">'Apple'</span>, <span class="string">'Orange'</span>].sort(); <span class="comment">// ['Apple', 'Banana', 'Orange'];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 小写字母a的ASCII码在大写字母之后。</span></span><br><span class="line">[<span class="string">'Banana'</span>, <span class="string">'apple'</span>, <span class="string">'Orange'</span>].sort(); <span class="comment">// ['Banana', 'Orange", 'apple']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为Array的sort()方法默认把所有元素先转换为String再排序，结果'10'排在了'2'的前面，因为字符'1'比字符'2'的ASCII码小。</span></span><br><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>].sort(); <span class="comment">// [1, 10, 2, 20]</span></span><br></pre></td></tr></table></figure><h3 id="添加函数"><a href="#添加函数" class="headerlink" title="添加函数"></a>添加函数</h3><ul><li>从小到大</li></ul><p>方法一<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 10, 20]</span></span><br></pre></td></tr></table></figure></p><p>方法二<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">n1, n2</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> n1-n2;  <span class="comment">// 可理解为：当n1-n2为正值即n1&gt;n2时，需调换顺序，则为大的向后挪，小的向前挪 -&gt; 升序</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><ul><li>从大到小</li></ul><p>方法一<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;); <span class="comment">// [20, 10, 2, 1]</span></span><br></pre></td></tr></table></figure></p><p>方法二<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">n1, n2</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> n2-n1;   <span class="comment">// 可理解为：当n2-n1为正值即n2&gt;n1时，需调换顺序，则为大的向前挪，小的向后挪 -&gt; 降序</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h2 id="every"><a href="#every" class="headerlink" title="every"></a>every</h2><blockquote><p>every可以判断数组的所有元素是否满足测试条件。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'Apple'</span>, <span class="string">'pear'</span>, <span class="string">'orange'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.every(<span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s.length &gt; <span class="number">0</span>;</span><br><span class="line">&#125;)); <span class="comment">// true, 因为每个元素都满足s.length&gt;0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.every(<span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s.toLowerCase() === s;</span><br><span class="line">&#125;)); <span class="comment">// false, 因为不是每个元素都全部是小写</span></span><br></pre></td></tr></table></figure><h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h2><blockquote><p>为每个元素执行对应的方法</p></blockquote><p>undefined// 这个东西没有返回值</p><ul><li>不用forEach()时</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Uses the usual "for" loop to iterate</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i= <span class="number">0</span>, l = arr.length; i&lt; l; i++)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>用forEach()时</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="inArray"><a href="#inArray" class="headerlink" title="$.inArray()"></a>$.inArray()</h2><ul><li>$.inArray(item, array)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">handleFav: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> item = <span class="keyword">this</span>.item;</span><br><span class="line">    <span class="keyword">var</span> favids = <span class="keyword">this</span>.favids;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>($.inArray(item.pid, favids) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">        Vue.set(that.item, <span class="string">'isFav'</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><ul><li>有一组用户信息按手机号降序排序，输出用户名称，用逗号分隔</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">name</span>: <span class="string">'l1'</span>, <span class="attr">phone</span>: <span class="string">'1507539'</span>&#125;,&#123;<span class="attr">name</span>: <span class="string">'l2'</span>, <span class="attr">phone</span>: <span class="string">'1507540'</span>&#125;,&#123;<span class="attr">name</span>: <span class="string">'l3'</span>, <span class="attr">phone</span>: <span class="string">'1507541'</span>&#125;,&#123;<span class="attr">name</span>: <span class="string">'l4'</span>, <span class="attr">phone</span>: <span class="string">'1507538'</span>&#125;]</span><br><span class="line"> .sort(<span class="function">(<span class="params">n,m</span>)=&gt;</span>n.phone&lt;m.phone)</span><br><span class="line"> .map(<span class="function"><span class="params">m</span>=&gt;</span>m.name)</span><br><span class="line"> .join(<span class="string">','</span>);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// "l3,l2,l1,l4"</span></span><br></pre></td></tr></table></figure><ul><li>给元素绑事件</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[].slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'div'</span>))</span><br><span class="line">.forEach(<span class="function"><span class="params">v</span>=&gt;</span>v.addEventListener(<span class="string">'click'</span>,e=&gt;<span class="built_in">console</span>.log(e.target.className))</span><br></pre></td></tr></table></figure><ul><li>获取所有元素的class,过滤空串</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[].slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'*'</span>))</span><br><span class="line"> .map(<span class="function"><span class="params">v</span>=&gt;</span>v.className)</span><br><span class="line"> .filter(<span class="function"><span class="params">v</span>=&gt;</span>v)</span><br></pre></td></tr></table></figure><ul><li><p>洗牌</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//随机排序</span></span><br><span class="line"><span class="built_in">String</span>.prototype.shuffle = <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">.5</span> - <span class="built_in">Math</span>.random()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> b = a.suffle(); <span class="comment">// [3, 1, 0, 4, 2]</span></span><br></pre></td></tr></table></figure></li><li><p>赋值</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  assign: (<span class="function"><span class="keyword">function</span>(<span class="params">fruits</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fruits.map(<span class="function"><span class="params">it</span> =&gt;</span> <span class="string">`&lt;label&gt;&lt;input type="checkbox" name="<span class="subst">$&#123;it.name&#125;</span>" title="<span class="subst">$&#123;it.title&#125;</span>" /&gt; <span class="subst">$&#123;it.title&#125;</span>&lt;/label&gt;`</span>).join(<span class="string">''</span>);</span><br><span class="line">  &#125;([</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'apple'</span>, <span class="attr">title</span>: <span class="string">'Apple'</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'banana'</span>, <span class="attr">title</span>: <span class="string">'Banana'</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'orange'</span>, <span class="attr">title</span>: <span class="string">'Orange'</span>&#125;</span><br><span class="line">  ]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>数组去重</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r,arr = [<span class="string">'apple'</span>, <span class="string">'strawberry'</span>, <span class="string">'banana'</span>, <span class="string">'pear'</span>, <span class="string">'apple'</span>, <span class="string">'orange'</span>, <span class="string">'orange'</span>, <span class="string">'strawberry'</span>];</span><br><span class="line"> </span><br><span class="line">r = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">element, index, self</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> self.indexOf(element) === index;</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(r.toString());</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;filter&lt;/li&gt;
&lt;li&gt;map&lt;/li&gt;
&lt;li&gt;reduce&lt;ul&gt;
&lt;li&gt;计算重复单词&lt;/li&gt;
&lt;li&gt;array.reduce(fn, value)&lt;ul&gt;
&lt;li&gt;累加&lt;/li&gt;
&lt;li&gt;初始值的重要性&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;sort&lt;ul&gt;
&lt;li&gt;添加函数&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;every&lt;/li&gt;
&lt;li&gt;forEach&lt;/li&gt;
&lt;li&gt;$.inArray()&lt;/li&gt;
&lt;li&gt;应用&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>css合辑</title>
    <link href="https://wangchloe.vip/2019/01/10/blog71/"/>
    <id>https://wangchloe.vip/2019/01/10/blog71/</id>
    <published>2019-01-10T08:33:14.000Z</published>
    <updated>2019-07-26T03:09:33.738Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><p>🐳专注css一百年，国际领先产品！</p><!-- MarkdownTOC --><ul><li>弹性布局</li><li>水平垂直居中</li><li>三角形</li><li>加号</li><li>限制行数 段落超出…</li><li>loading</li><li>横向溢出滚动</li><li>透明边框</li><li>ul横排滚动</li><li>渐变文字</li><li>渐变边框</li><li>input placeholder颜色</li></ul><!-- /MarkdownTOC --><a id="more"></a><h3 id="弹性布局"><a href="#弹性布局" class="headerlink" title="弹性布局"></a>弹性布局</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fui-grid</span>&#123;<span class="attribute">display</span>:-webkit-box; <span class="attribute">-webkit-box-sizing</span>:border-box; <span class="attribute">box-sizing</span>:border-box;&#125;</span><br><span class="line"><span class="selector-class">.fui-span0</span>&#123;<span class="attribute">display</span>:block; <span class="attribute">-webkit-box-flex</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.fui-span1</span>&#123;<span class="attribute">display</span>:block; <span class="attribute">-webkit-box-flex</span>:<span class="number">1</span>;&#125;</span><br><span class="line"><span class="selector-class">.fui-span2</span>&#123;<span class="attribute">display</span>:block; <span class="attribute">-webkit-box-flex</span>:<span class="number">2</span>;&#125;</span><br><span class="line"><span class="selector-class">.fui-span3</span>&#123;<span class="attribute">display</span>:block; <span class="attribute">-webkit-box-flex</span>:<span class="number">3</span>;&#125;</span><br></pre></td></tr></table></figure><h3 id="水平垂直居中"><a href="#水平垂直居中" class="headerlink" title="水平垂直居中"></a>水平垂直居中</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fui-uti-ver-mid</span> &#123; <span class="attribute">display</span>: -webkit-box; <span class="attribute">-webkit-box-orient</span>: vertical; <span class="attribute">-webkit-box-pack</span>: center; <span class="attribute">-webkit-box-align</span>: center; &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-hor-mid</span> &#123; <span class="attribute">display</span>: -webkit-box; <span class="attribute">-webkit-box-orient</span>: horizontal; <span class="attribute">-webkit-box-pack</span>: center; <span class="attribute">-webkit-box-align</span>: center; &#125;</span><br></pre></td></tr></table></figure><h3 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fui-uti-arrow</span> &#123; <span class="attribute">display</span>: inline-block; <span class="attribute">width</span>: <span class="number">8px</span>; <span class="attribute">height</span>: <span class="number">8px</span>; <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#666</span>; <span class="attribute">border-bottom</span>: none; <span class="attribute">border-left</span>: none; <span class="attribute">font-style</span>: normal; <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(135deg); <span class="attribute">transform</span>: <span class="built_in">rotate</span>(135deg); <span class="attribute">-webkit-transition</span>: transform .<span class="number">3s</span> ease-in-out; <span class="attribute">transition</span>: transform .<span class="number">3s</span> ease-in-out; &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-arrow-up</span> &#123; <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(-45deg); <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-45deg); &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-arrow-left</span> &#123; <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(225deg); <span class="attribute">transform</span>: <span class="built_in">rotate</span>(225deg); &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-arrow-right</span> &#123; <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(45deg); <span class="attribute">transform</span>: <span class="built_in">rotate</span>(45deg); &#125;</span><br></pre></td></tr></table></figure><h3 id="加号"><a href="#加号" class="headerlink" title="加号"></a>加号</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fui-uti-plus</span> &#123; <span class="attribute">position</span>: relative; <span class="attribute">display</span>: inline-block; <span class="attribute">width</span>: <span class="number">0.3rem</span>; <span class="attribute">height</span>: <span class="number">0.3rem</span>; <span class="attribute">vertical-align</span>: middle; &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-plus</span><span class="selector-pseudo">:before</span> &#123; <span class="attribute">position</span>: absolute; <span class="attribute">top</span>: <span class="number">0.14rem</span>; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">width</span>: <span class="number">0.3rem</span>; <span class="attribute">height</span>: <span class="number">0</span>; <span class="attribute">border-top</span>: <span class="number">0.02rem</span> solid <span class="number">#fff</span>; <span class="attribute">content</span>: <span class="string">""</span>; &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-plus</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">position</span>: absolute; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0.14rem</span>; <span class="attribute">width</span>: <span class="number">0</span>; <span class="attribute">height</span>: <span class="number">0.3rem</span>; <span class="attribute">border-left</span>: <span class="number">0.02rem</span> solid <span class="number">#fff</span>; <span class="attribute">content</span>: <span class="string">""</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="限制行数-段落超出…"><a href="#限制行数-段落超出…" class="headerlink" title="限制行数 段落超出…"></a>限制行数 段落超出…</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fui-uti-nowrap-line</span> &#123; <span class="attribute">display</span>: -webkit-box; <span class="attribute">overflow</span>: hidden; <span class="attribute">text-overflow</span>: ellipsis; <span class="attribute">-webkit-box-orient</span>: vertical; <span class="attribute">-webkit-line-clamp</span>: <span class="number">1</span>; &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-nowrap-two-line</span> &#123; <span class="attribute">display</span>: -webkit-box; <span class="attribute">overflow</span>: hidden; <span class="attribute">text-overflow</span>: ellipsis; <span class="attribute">-webkit-box-orient</span>: vertical; <span class="attribute">-webkit-line-clamp</span>: <span class="number">2</span>; &#125;</span><br></pre></td></tr></table></figure><h3 id="loading"><a href="#loading" class="headerlink" title="loading"></a>loading</h3><p><img src="http://static2.51fanli.net/webapp/images/icons/loading.png" alt=""><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5bx0sg5m7j300t00tmwx.jpg" alt=""></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*loading*/</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> fui-loading-rotate &#123;</span><br><span class="line">0% &#123; <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(0deg); &#125;</span><br><span class="line">100% &#123; <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(360deg); &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> fui-loading-rotate &#123;</span><br><span class="line">0% &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(0deg); &#125;</span><br><span class="line">100% &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(360deg); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.fui-uti-loading</span> &#123; <span class="attribute">display</span>: -webkit-box; <span class="attribute">display</span>: flex; <span class="attribute">-webkit-box-pack</span>: center; <span class="attribute">-webkit-box-align</span>: center; <span class="attribute">justify-content</span>: center; <span class="attribute">align-items</span>: center; <span class="attribute">margin</span>: <span class="number">0.1rem</span> <span class="number">0</span>; <span class="attribute">color</span>: <span class="number">#999</span>; &#125;</span><br><span class="line"><span class="selector-class">.fui-uti-loading</span><span class="selector-pseudo">:before</span> &#123; <span class="attribute">content</span>: <span class="string">''</span>; <span class="attribute">width</span>: <span class="number">0.29rem</span>; <span class="attribute">height</span>: <span class="number">0.29rem</span>; <span class="attribute">margin-right</span>: <span class="number">0.08rem</span>; <span class="attribute">background</span>: <span class="built_in">url</span>(/webapp/images/icons/loading.png) no-repeat; <span class="attribute">-webkit-background-size</span>: <span class="number">100%</span> auto; <span class="attribute">background-size</span>: <span class="number">100%</span> auto; <span class="attribute">-webkit-transform-origin</span>: center; <span class="attribute">-webkit-animation</span>: fui-loading-rotate <span class="number">1s</span> linear infinite; <span class="attribute">animation</span>: fui-loading-rotate <span class="number">1s</span> linear infinite; &#125;</span><br></pre></td></tr></table></figure><h3 id="横向溢出滚动"><a href="#横向溢出滚动" class="headerlink" title="横向溢出滚动"></a>横向溢出滚动</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">overflow-x</span>: scroll;</span><br><span class="line">    <span class="attribute">overflow-y</span>: hidden;</span><br><span class="line">    <span class="attribute">-webkit-overflow-scrolling</span>: touch;</span><br><span class="line">    <span class="attribute">overflow-scrolling</span>: touch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="透明边框"><a href="#透明边框" class="headerlink" title="透明边框"></a>透明边框</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>; </span><br><span class="line">    <span class="attribute">border</span>: .<span class="number">05rem</span> solid <span class="built_in">rgba</span>(255, 255, 255, .6);</span><br><span class="line">    background-clip: padding-box; // 重要</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ul横排滚动"><a href="#ul横排滚动" class="headerlink" title="ul横排滚动"></a>ul横排滚动</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--第一种方案  不推荐！！！  低版本安卓格式错乱 --&gt;</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap-of-scroll</span>&#123;<span class="attribute">overflow</span>:hidden;<span class="attribute">margin-bottom</span>:.<span class="number">2rem</span>;&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap-of-scroll</span> <span class="selector-tag">ul</span>&#123;<span class="attribute">display</span>:-webkit-box;<span class="attribute">display</span>:flex;<span class="attribute">overflow-x</span>:scroll;<span class="attribute">overflow-y</span>:hidden;<span class="attribute">-webkit-overflow-scrolling</span>:touch;<span class="attribute">overflow-scrolling</span>:touch&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap-of-scroll</span> <span class="selector-tag">li</span>&#123;<span class="attribute">float</span>:left;<span class="attribute">margin-right</span>:.<span class="number">1rem</span>;<span class="attribute">width</span>:<span class="number">3rem</span>;&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--第二种方案--&gt;</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap-of-scroll</span>&#123;&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap-of-scroll</span> <span class="selector-tag">ul</span>&#123;<span class="attribute">overflow-x</span>:scroll;<span class="attribute">overflow-y</span>:hidden;<span class="attribute">-webkit-overflow-scrolling</span>:touch;<span class="attribute">overflow-scrolling</span>:touch;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">white-space</span>:nowrap;&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap-of-scroll</span> <span class="selector-tag">li</span>&#123;<span class="attribute">display</span>:inline-block;<span class="attribute">margin-right</span>:.<span class="number">1rem</span>;<span class="attribute">width</span>:<span class="number">3rem</span>;&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap-of-scroll"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="渐变文字"><a href="#渐变文字" class="headerlink" title="渐变文字"></a>渐变文字</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.word</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(to right, #000, #fff);</span><br><span class="line">    <span class="attribute">-webkit-background-clip</span>:text;</span><br><span class="line">    <span class="attribute">-webkit-text-fill-color</span>:transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="渐变边框"><a href="#渐变边框" class="headerlink" title="渐变边框"></a>渐变边框</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.banner-countdown</span>&#123;<span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(to bottom,#f8c971, #e3a946);<span class="attribute">-webkit-background-clip</span>:text;<span class="attribute">-webkit-text-fill-color</span>:transparent;&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.banner-countdown</span> <span class="selector-tag">em</span>&#123;<span class="attribute">border</span>:<span class="number">2px</span> solid;<span class="attribute">border-image</span>: <span class="built_in">-webkit-linear-gradient</span>(#f8c971, #e3a946) <span class="number">3</span> <span class="number">3</span>;<span class="attribute">-webkit-text-fill-color</span>:initial;&#125;</span><br></pre></td></tr></table></figure><h3 id="input-placeholder颜色"><a href="#input-placeholder颜色" class="headerlink" title="input placeholder颜色"></a>input placeholder颜色</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-webkit-input-placeholder</span>&#123;<span class="attribute">color</span>:<span class="number">#ccc</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-webkit-input-placeholder</span>, <span class="selector-tag">textarea</span><span class="selector-pseudo">::-webkit-input-placeholder</span>&#123; <span class="attribute">color</span>: <span class="number">#999</span>; &#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;🐳专注css一百年，国际领先产品！&lt;/p&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;弹性布局&lt;/li&gt;
&lt;li&gt;水平垂直居中&lt;/li&gt;
&lt;li&gt;三角形&lt;/li&gt;
&lt;li&gt;加号&lt;/li&gt;
&lt;li&gt;限制行数 段落超出…&lt;/li&gt;
&lt;li&gt;loading&lt;/li&gt;
&lt;li&gt;横向溢出滚动&lt;/li&gt;
&lt;li&gt;透明边框&lt;/li&gt;
&lt;li&gt;ul横排滚动&lt;/li&gt;
&lt;li&gt;渐变文字&lt;/li&gt;
&lt;li&gt;渐变边框&lt;/li&gt;
&lt;li&gt;input placeholder颜色&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="css" scheme="https://wangchloe.vip/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>数字自增速变特效</title>
    <link href="https://wangchloe.vip/2018/12/11/blog58/"/>
    <id>https://wangchloe.vip/2018/12/11/blog58/</id>
    <published>2018-12-11T09:12:06.000Z</published>
    <updated>2019-07-25T07:33:40.939Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><p>嚓嚓嚓 顿顿顿<br><a id="more"></a></p><p>效果如下</p><p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5b1ulk5ydg30hs08we6m.gif" alt=""></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">bindNumScroll: <span class="function"><span class="keyword">function</span>(<span class="params">val, initVal</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> current = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> step = val &gt;= <span class="number">400</span> ? <span class="built_in">Math</span>.ceil(val / <span class="number">100</span>) : <span class="built_in">Math</span>.ceil(val / <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">var</span> start = <span class="built_in">parseFloat</span>(initVal);</span><br><span class="line"></span><br><span class="line">    timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        start += step;</span><br><span class="line">        <span class="keyword">if</span> (start &gt; val) &#123;</span><br><span class="line">            clearInterval(timer);</span><br><span class="line">            start = val;</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (current === start) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        current = start;</span><br><span class="line">        $numBounty.html(current.toString().replace(<span class="regexp">/(\d)(?=(?:\d&#123;3&#125;[+]?)+$)/g</span>, <span class="string">'$1,'</span>));</span><br><span class="line">    &#125;, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;嚓嚓嚓 顿顿顿&lt;br&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="特效" scheme="https://wangchloe.vip/tags/%E7%89%B9%E6%95%88/"/>
    
  </entry>
  
  <entry>
    <title>fixed input输入框解决方案</title>
    <link href="https://wangchloe.vip/2018/10/25/blog62/"/>
    <id>https://wangchloe.vip/2018/10/25/blog62/</id>
    <published>2018-10-25T03:41:07.000Z</published>
    <updated>2019-07-25T06:42:41.723Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>以下内容若有问题烦请即时告知我予以修改，以免误导更多人。</p><hr><p>挖坑填坑～</p><a id="more"></a><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="comment">/*解决ios-fixed导致间隔*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">body</span><span class="selector-class">.full-body</span>&#123;<span class="attribute">position</span>:fixed;<span class="attribute">top</span>:<span class="number">0</span>;<span class="attribute">right</span>:<span class="number">0</span>;<span class="attribute">bottom</span>:<span class="number">0</span>;<span class="attribute">left</span>:<span class="number">0</span>;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">height</span>:<span class="number">100%</span>;<span class="attribute">padding</span>:<span class="number">0</span>;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="comment">/*overflow:hidden;*/</span>&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">body</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">overflow</span>:visible;&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">body</span><span class="selector-class">.full-body</span> <span class="selector-class">.pop-change</span>&#123;<span class="attribute">position</span>:absolute;<span class="attribute">z-index</span>:<span class="number">1100</span>;<span class="attribute">overflow-x</span>:hidden&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_pop_change"</span> <span class="attr">class</span>=<span class="string">"fmu-dl-wrap pop-change"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>修改联系方式<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"change-info"</span>&gt;</span>为保证您中奖后第一时间通知您，请确认您的手机号码<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tel-wrapper fui-grid"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"J_tel_change"</span> <span class="attr">class</span>=<span class="string">"fui-span0"</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"J_tel_change"</span> <span class="attr">type</span>=<span class="string">"tel"</span> <span class="attr">name</span>=<span class="string">"number"</span> <span class="attr">value</span>=<span class="string">"&#123;$mobile&#125;"</span> <span class="attr">class</span>=<span class="string">"tel-input fui-span1"</span> <span class="attr">maxlength</span>=<span class="string">"11"</span> <span class="attr">placeholder</span>=<span class="string">"请输入你的手机号码"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"code-wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fui-grid code-box"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"J_msg_code"</span> <span class="attr">class</span>=<span class="string">"fui-span0"</span>&gt;</span>校验码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"tel"</span> <span class="attr">id</span>=<span class="string">"J_msg_code"</span> <span class="attr">maxlength</span>=<span class="string">"6"</span> <span class="attr">class</span>=<span class="string">"code-input J_required_info msg-code fui-span1"</span> <span class="attr">name</span>=<span class="string">"code"</span> <span class="attr">placeholder</span>=<span class="string">"请输入校验码"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"J_get_code"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"获取校验码"</span> <span class="attr">class</span>=<span class="string">"btn-send btn-dis"</span> <span class="attr">disabled</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"J_change_error"</span> <span class="attr">class</span>=<span class="string">"error-info"</span>&gt;</span>请输入正确的手机号<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"J_change_close"</span> <span class="attr">class</span>=<span class="string">"btn-submit btn-dis"</span> <span class="attr">disabled</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解决ios-fixed导致间隔</span></span><br><span class="line">$(<span class="string">"#J_tel_change, #J_msg_code"</span>).on(<span class="string">"focus"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $body.addClass(iosFixedClass);</span><br><span class="line">    $popChange.css(<span class="string">"position"</span>, <span class="string">'absolute'</span>);</span><br><span class="line"></span><br><span class="line">    popChangeTop();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isIos) &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $win.on(<span class="string">"resize.POPCHANGE"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                popChangeTop();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;, <span class="number">300</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#J_tel_change, #J_msg_code"</span>).on(<span class="string">"blur"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $body.removeClass(iosFixedClass);</span><br><span class="line">    $popChange.css(<span class="string">"position"</span>, <span class="string">'fixed'</span>).css(<span class="string">"top"</span>, <span class="string">"auto"</span>).css(<span class="string">"bottom"</span>, <span class="number">0</span>);</span><br><span class="line">    popChangeTop();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isIos) &#123;</span><br><span class="line">        $win.off(<span class="string">"resize.POPCHANGE"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">popChangeTop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> winH = $win.height();</span><br><span class="line">        <span class="keyword">var</span> objH = $popChange.height() + <span class="number">0.3</span> * htmlFS;</span><br><span class="line">        $popChange.css(<span class="string">"top"</span>, winH - objH);</span><br><span class="line">    &#125;, <span class="number">200</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>更多内容可以订阅本人微信公众号，一起开启前端小白进阶的世界！<br><img src="http://ww1.sinaimg.cn/large/006tNc79gy1g59sd1aky1j325s0m80xf.jpg" alt="微信公众号：无媛无故"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以下内容若有问题烦请即时告知我予以修改，以免误导更多人。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;挖坑填坑～&lt;/p&gt;
    
    </summary>
    
      <category term="前端札记" scheme="https://wangchloe.vip/categories/%E5%89%8D%E7%AB%AF%E6%9C%AD%E8%AE%B0/"/>
    
    
      <category term="js" scheme="https://wangchloe.vip/tags/js/"/>
    
      <category term="填坑记" scheme="https://wangchloe.vip/tags/%E5%A1%AB%E5%9D%91%E8%AE%B0/"/>
    
  </entry>
  
</feed>
